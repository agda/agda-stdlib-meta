<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Tactic.Derive.Convertible</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/agda/agda-stdlib-meta/tree/master///Tactic/Derive/Convertible.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--with-K</a> <a id="22" class="Symbol">#-}</a>
<a id="26" class="Keyword">module</a> <a id="33" href="Tactic.Derive.Convertible.html" class="Module">Tactic.Derive.Convertible</a> <a id="59" class="Keyword">where</a>

<a id="66" class="Keyword">open</a> <a id="71" class="Keyword">import</a> <a id="78" href="Meta.Prelude.html" class="Module">Meta.Prelude</a>
<a id="91" class="Keyword">open</a> <a id="96" class="Keyword">import</a> <a id="103" href="Meta.Init.html" class="Module">Meta.Init</a>

<a id="114" class="Keyword">import</a> <a id="121" href="Data.List.html" class="Module">Data.List</a> <a id="131" class="Symbol">as</a> <a id="134" class="Module">L</a>

<a id="137" class="Keyword">open</a> <a id="142" class="Keyword">import</a> <a id="149" href="Reflection.Tactic.html" class="Module">Reflection.Tactic</a>
<a id="167" class="Keyword">open</a> <a id="172" class="Keyword">import</a> <a id="179" href="Reflection.AST.DeBruijn.html" class="Module">Reflection.AST.DeBruijn</a>
<a id="203" class="Keyword">import</a> <a id="210" href="Reflection.TCM.html" class="Module">Reflection.TCM</a> <a id="225" class="Symbol">as</a> <a id="228" class="Module">R</a>
<a id="230" class="Keyword">open</a> <a id="235" class="Keyword">import</a> <a id="242" href="Reflection.Utils.html" class="Module">Reflection.Utils</a>
<a id="259" class="Keyword">open</a> <a id="264" class="Keyword">import</a> <a id="271" href="Reflection.Utils.TCI.html" class="Module">Reflection.Utils.TCI</a>

<a id="293" class="Keyword">open</a> <a id="298" class="Keyword">import</a> <a id="305" href="Class.DecEq.html" class="Module">Class.DecEq</a>
<a id="317" class="Keyword">open</a> <a id="322" class="Keyword">import</a> <a id="329" href="Class.Functor.html" class="Module">Class.Functor</a>
<a id="343" class="Keyword">open</a> <a id="348" class="Keyword">import</a> <a id="355" href="Class.Bifunctor.html" class="Module">Class.Bifunctor</a>
<a id="371" class="Keyword">open</a> <a id="376" class="Keyword">import</a> <a id="383" href="Class.Monad.html" class="Module">Class.Monad</a>
<a id="395" class="Keyword">open</a> <a id="400" class="Keyword">import</a> <a id="407" href="Class.MonadTC.Instances.html" class="Module">Class.MonadTC.Instances</a>
<a id="431" class="Keyword">open</a> <a id="436" class="Keyword">import</a> <a id="443" href="Class.MonadReader.html" class="Module">Class.MonadReader</a>

<a id="462" class="Keyword">open</a> <a id="467" class="Keyword">import</a> <a id="474" href="Class.Convertible.html" class="Module">Class.Convertible</a>
<a id="492" class="Keyword">open</a> <a id="497" class="Keyword">import</a> <a id="504" href="Class.HasHsType.html" class="Module">Class.HasHsType</a>
<a id="520" class="Keyword">open</a> <a id="525" class="Keyword">import</a> <a id="532" href="Tactic.Derive.HsType.html" class="Module">Tactic.Derive.HsType</a>

<a id="554" class="Keyword">private</a>
  <a id="564" class="Keyword">instance</a> <a id="573" href="Tactic.Derive.Convertible.html#573" class="Function">_</a> <a id="575" class="Symbol">=</a> <a id="577" href="Class.Monad.Core.html#699" class="Function">Functor-M</a> <a id="587" class="Symbol">{</a><a id="588" href="Reflection.TCI.html#554" class="Function">TC</a><a id="590" class="Symbol">}</a>

  <a id="595" class="Keyword">open</a> <a id="600" href="Class.MonadReader.html#258" class="Module">MonadReader</a> <a id="612" class="Symbol">⦃...⦄</a>

  <a id="TyViewTel"></a><a id="621" href="Tactic.Derive.Convertible.html#621" class="Function">TyViewTel</a> <a id="631" class="Symbol">=</a> <a id="633" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="638" class="Symbol">(</a><a id="639" href="Agda.Builtin.Reflection.html#4249" class="Datatype">Abs</a> <a id="643" class="Symbol">(</a><a id="644" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="648" href="Agda.Builtin.Reflection.html#5064" class="Function">Type</a><a id="652" class="Symbol">))</a>

  <a id="substTel"></a><a id="658" href="Tactic.Derive.Convertible.html#658" class="Function">substTel</a> <a id="667" class="Symbol">:</a> <a id="669" href="Reflection.Utils.Substitute.html#451" class="Function">Subst</a> <a id="675" href="Tactic.Derive.Convertible.html#621" class="Function">TyViewTel</a>
  <a id="687" href="Tactic.Derive.Convertible.html#658" class="Function">substTel</a> <a id="696" href="Tactic.Derive.Convertible.html#696" class="Bound">x</a> <a id="698" href="Tactic.Derive.Convertible.html#698" class="Bound">s</a> <a id="700" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="703" class="Symbol">=</a> <a id="705" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
  <a id="710" href="Tactic.Derive.Convertible.html#658" class="Function">substTel</a> <a id="719" href="Tactic.Derive.Convertible.html#719" class="Bound">x</a> <a id="721" href="Tactic.Derive.Convertible.html#721" class="Bound">s</a> <a id="723" class="Symbol">(</a><a id="724" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="728" href="Tactic.Derive.Convertible.html#728" class="Bound">z</a> <a id="730" href="Tactic.Derive.Convertible.html#730" class="Bound">t</a> <a id="732" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="734" href="Tactic.Derive.Convertible.html#734" class="Bound">tel</a><a id="737" class="Symbol">)</a> <a id="739" class="Symbol">=</a> <a id="741" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="745" href="Tactic.Derive.Convertible.html#728" class="Bound">z</a> <a id="747" class="Symbol">(</a><a id="748" href="Reflection.Utils.Substitute.html#1279" class="Function">substArg</a> <a id="757" href="Tactic.Derive.Convertible.html#719" class="Bound">x</a> <a id="759" href="Tactic.Derive.Convertible.html#721" class="Bound">s</a> <a id="761" href="Tactic.Derive.Convertible.html#730" class="Bound">t</a><a id="762" class="Symbol">)</a> <a id="764" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="766" class="Symbol">(</a><a id="767" href="Tactic.Derive.Convertible.html#658" class="Function">substTel</a> <a id="776" class="Symbol">(</a><a id="777" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">ℕ.suc</a> <a id="783" href="Tactic.Derive.Convertible.html#719" class="Bound">x</a><a id="784" class="Symbol">)</a> <a id="786" href="Tactic.Derive.Convertible.html#721" class="Bound">s</a> <a id="788" href="Tactic.Derive.Convertible.html#734" class="Bound">tel</a><a id="791" class="Symbol">)</a>
    <a id="797" class="Comment">-- Note: `abs` is abused in TyViewTel and doesn&#39;t actually scope over the `t`</a>

  <a id="878" class="Comment">-- Substitute leading level parameters with lzero</a>
  <a id="smashLevels"></a><a id="930" href="Tactic.Derive.Convertible.html#930" class="Function">smashLevels</a> <a id="942" class="Symbol">:</a> <a id="944" href="Tactic.Derive.Convertible.html#621" class="Function">TyViewTel</a> <a id="954" class="Symbol">→</a> <a id="956" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="958" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="960" href="Tactic.Derive.Convertible.html#621" class="Function">TyViewTel</a>
  <a id="972" href="Tactic.Derive.Convertible.html#930" class="Function">smashLevels</a> <a id="984" class="Symbol">(</a><a id="985" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="989" href="Tactic.Derive.Convertible.html#989" class="Bound">s</a> <a id="991" class="Symbol">(</a><a id="992" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="996" href="Tactic.Derive.Convertible.html#996" class="Bound">i</a> <a id="998" class="Symbol">(</a><a id="999" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="1003" class="Symbol">(</a><a id="1004" class="Keyword">quote</a> <a id="1010" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="1015" class="Symbol">)</a> <a id="1017" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="1019" class="Symbol">))</a> <a id="1022" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1024" href="Tactic.Derive.Convertible.html#1024" class="Bound">tel</a><a id="1027" class="Symbol">)</a> <a id="1029" class="Symbol">=</a>
    <a id="1035" href="Class.Bifunctor.html#960" class="Field">bimap</a> <a id="1041" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">ℕ.suc</a> <a id="1047" class="Symbol">(</a><a id="1048" href="Tactic.Derive.Convertible.html#658" class="Function">substTel</a> <a id="1057" class="Number">0</a> <a id="1059" class="Symbol">(</a><a id="1060" class="Keyword">quote</a> <a id="1066" href="Level.html#521" class="Function">0ℓ</a> <a id="1069" href="Reflection.Syntax.html#3023" class="InductiveConstructor Operator">∙</a><a id="1070" class="Symbol">))</a> <a id="1073" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="1075" href="Tactic.Derive.Convertible.html#930" class="Function">smashLevels</a> <a id="1087" href="Tactic.Derive.Convertible.html#1024" class="Bound">tel</a>
  <a id="1093" href="Tactic.Derive.Convertible.html#930" class="CatchallClause Function">smashLevels</a><a id="1104" class="CatchallClause"> </a><a id="1105" href="Tactic.Derive.Convertible.html#1105" class="CatchallClause Bound">tel</a> <a id="1109" class="Symbol">=</a> <a id="1111" class="Symbol">(</a><a id="1112" class="Number">0</a> <a id="1114" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1116" href="Tactic.Derive.Convertible.html#1105" class="Bound">tel</a><a id="1119" class="Symbol">)</a>

  <a id="tyViewToTel"></a><a id="1124" href="Tactic.Derive.Convertible.html#1124" class="Function">tyViewToTel</a> <a id="1136" class="Symbol">:</a> <a id="1138" href="Tactic.Derive.Convertible.html#621" class="Function">TyViewTel</a> <a id="1148" class="Symbol">→</a> <a id="1150" href="Reflection.AST.Term.html#1887" class="Function">Telescope</a>
  <a id="1162" href="Tactic.Derive.Convertible.html#1124" class="Function">tyViewToTel</a> <a id="1174" class="Symbol">=</a> <a id="1176" href="Data.List.Base.html#1612" class="Function">L.map</a> <a id="1182" class="Symbol">λ</a> <a id="1184" class="Keyword">where</a> <a id="1190" class="Symbol">(</a><a id="1191" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1195" href="Tactic.Derive.Convertible.html#1195" class="Bound">s</a> <a id="1197" href="Tactic.Derive.Convertible.html#1197" class="Bound">a</a><a id="1198" class="Symbol">)</a> <a id="1200" class="Symbol">→</a> <a id="1202" href="Tactic.Derive.Convertible.html#1195" class="Bound">s</a> <a id="1204" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1206" href="Tactic.Derive.Convertible.html#1197" class="Bound">a</a>

  <a id="hideTyView"></a><a id="1211" href="Tactic.Derive.Convertible.html#1211" class="Function">hideTyView</a> <a id="1222" class="Symbol">:</a> <a id="1224" href="Agda.Builtin.Reflection.html#4249" class="Datatype">Abs</a> <a id="1228" class="Symbol">(</a><a id="1229" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="1233" href="Meta.Prelude.html#195" class="Generalizable">A</a><a id="1234" class="Symbol">)</a> <a id="1236" class="Symbol">→</a> <a id="1238" href="Agda.Builtin.Reflection.html#4249" class="Datatype">Abs</a> <a id="1242" class="Symbol">(</a><a id="1243" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="1247" href="Meta.Prelude.html#195" class="Generalizable">A</a><a id="1248" class="Symbol">)</a>
  <a id="1252" href="Tactic.Derive.Convertible.html#1211" class="Function">hideTyView</a> <a id="1263" class="Symbol">(</a><a id="1264" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1268" href="Tactic.Derive.Convertible.html#1268" class="Bound">s</a> <a id="1270" class="Symbol">(</a><a id="1271" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="1275" class="Symbol">(</a><a id="1276" href="Agda.Builtin.Reflection.html#3637" class="InductiveConstructor">arg-info</a> <a id="1285" class="Symbol">_</a> <a id="1287" href="Tactic.Derive.Convertible.html#1287" class="Bound">m</a><a id="1288" class="Symbol">)</a> <a id="1290" href="Tactic.Derive.Convertible.html#1290" class="Bound">x</a><a id="1291" class="Symbol">))</a> <a id="1294" class="Symbol">=</a> <a id="1296" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1300" href="Tactic.Derive.Convertible.html#1268" class="Bound">s</a> <a id="1302" class="Symbol">(</a><a id="1303" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="1307" class="Symbol">(</a><a id="1308" href="Agda.Builtin.Reflection.html#3637" class="InductiveConstructor">arg-info</a> <a id="1317" href="Agda.Builtin.Reflection.html#2770" class="InductiveConstructor">hidden</a> <a id="1324" href="Tactic.Derive.Convertible.html#1287" class="Bound">m</a><a id="1325" class="Symbol">)</a> <a id="1327" href="Tactic.Derive.Convertible.html#1290" class="Bound">x</a><a id="1328" class="Symbol">)</a>

  <a id="1333" class="Comment">-- The type of a Convertible instance. For parameterised types adds the appropriate instance</a>
  <a id="1428" class="Comment">-- arguments and instantiates level arguments to lzero. For instance,</a>
  <a id="1500" class="Comment">-- instanceType _⊎_ Hs.Either = {A B : Set} {a b : Set} → ⦃ Convertible A a ⦄ → ⦃ Convertible B b ⦄</a>
  <a id="1602" class="Comment">--                              Convertible (A ⊎ B) (Hs.Either a b)</a>
  <a id="instanceType"></a><a id="1672" href="Tactic.Derive.Convertible.html#1672" class="Function">instanceType</a> <a id="1685" class="Symbol">:</a> <a id="1687" class="Symbol">(</a><a id="1688" href="Tactic.Derive.Convertible.html#1688" class="Bound">agdaName</a> <a id="1697" href="Tactic.Derive.Convertible.html#1697" class="Bound">hsName</a> <a id="1704" class="Symbol">:</a> <a id="1706" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="1710" class="Symbol">)</a> <a id="1712" class="Symbol">→</a> <a id="1714" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="1717" href="Reflection.Utils.Core.html#536" class="Function">TypeView</a>
  <a id="1728" href="Tactic.Derive.Convertible.html#1672" class="Function">instanceType</a> <a id="1741" href="Tactic.Derive.Convertible.html#1741" class="Bound">agdaName</a> <a id="1750" href="Tactic.Derive.Convertible.html#1750" class="Bound">hsName</a> <a id="1757" class="Symbol">=</a> <a id="1759" class="Keyword">do</a>
    <a id="1766" href="Tactic.Derive.Convertible.html#1766" class="Bound">aLvls</a> <a id="1772" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1774" href="Tactic.Derive.Convertible.html#1774" class="Bound">agdaParams</a> <a id="1785" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="1787" href="Tactic.Derive.Convertible.html#930" class="Function">smashLevels</a> <a id="1799" href="Class.Functor.Core.html#242" class="Field Operator">&lt;$&gt;</a> <a id="1803" href="Reflection.Utils.TCI.html#7769" class="Function">getParamsAndIndices</a> <a id="1823" href="Tactic.Derive.Convertible.html#1741" class="Bound">agdaName</a>
    <a id="1836" href="Tactic.Derive.Convertible.html#1836" class="Bound">hLvls</a> <a id="1842" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1844" href="Tactic.Derive.Convertible.html#1844" class="Bound">hsParams</a>   <a id="1855" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="1857" href="Tactic.Derive.Convertible.html#930" class="Function">smashLevels</a> <a id="1869" href="Class.Functor.Core.html#242" class="Field Operator">&lt;$&gt;</a> <a id="1873" href="Reflection.Utils.TCI.html#7769" class="Function">getParamsAndIndices</a> <a id="1893" href="Tactic.Derive.Convertible.html#1750" class="Bound">hsName</a>
    <a id="1904" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="1909" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="1911" href="Class.Monad.Core.html#316" class="Field">return</a> <a id="1918" class="Symbol">(</a><a id="1919" href="Data.List.Base.html#4746" class="Function">length</a> <a id="1926" href="Tactic.Derive.Convertible.html#1774" class="Bound">agdaParams</a> <a id="1937" href="Class.DecEq.Core.html#197" class="Function Operator">==</a> <a id="1940" href="Data.List.Base.html#4746" class="Function">length</a> <a id="1947" href="Tactic.Derive.Convertible.html#1844" class="Bound">hsParams</a><a id="1955" class="Symbol">)</a>
      <a id="1963" class="Keyword">where</a> <a id="1969" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="1975" class="Symbol">→</a> <a id="1977" href="Reflection.TCI.html#1770" class="Function">liftTC</a> <a id="1984" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="1986" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="2001" class="String">&quot;%q and %q have different number of parameters&quot;</a> <a id="2049" href="Tactic.Derive.Convertible.html#1741" class="Bound">agdaName</a> <a id="2058" href="Tactic.Derive.Convertible.html#1750" class="Bound">hsName</a>
    <a id="2069" class="Keyword">let</a> <a id="2073" href="Tactic.Derive.Convertible.html#2073" class="Bound">n</a> <a id="2075" class="Symbol">=</a> <a id="2077" href="Data.List.Base.html#4746" class="Function">length</a> <a id="2084" href="Tactic.Derive.Convertible.html#1774" class="Bound">agdaParams</a>
        <a id="2103" href="Tactic.Derive.Convertible.html#2103" class="Bound">l₀</a> <a id="2106" class="Symbol">=</a> <a id="2108" class="Keyword">quote</a> <a id="2114" href="Level.html#521" class="Function">0ℓ</a> <a id="2117" href="Reflection.Syntax.html#3023" class="InductiveConstructor Operator">∙</a>
    <a id="2123" href="Tactic.Derive.Convertible.html#2123" class="Bound">agdaTy</a> <a id="2130" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="2132" href="Reflection.Utils.TCI.html#9110" class="Function">applyWithVisibility</a> <a id="2152" href="Tactic.Derive.Convertible.html#1741" class="Bound">agdaName</a> <a id="2161" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="2163" href="Data.List.Base.html#5021" class="Function">L.replicate</a> <a id="2175" href="Tactic.Derive.Convertible.html#1766" class="Bound">aLvls</a> <a id="2181" href="Tactic.Derive.Convertible.html#2103" class="Bound">l₀</a> <a id="2184" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="2187" href="Data.List.Base.html#1612" class="Function">L.map</a> <a id="2193" href="Reflection.Syntax.html#1576" class="InductiveConstructor">♯</a> <a id="2195" class="Symbol">(</a><a id="2196" href="Data.List.Base.html#8389" class="Function">take</a> <a id="2201" href="Tactic.Derive.Convertible.html#2073" class="Bound">n</a> <a id="2203" class="Symbol">(</a><a id="2204" href="Data.List.Base.html#6430" class="Function">downFrom</a> <a id="2213" class="Symbol">(</a><a id="2214" href="Tactic.Derive.Convertible.html#2073" class="Bound">n</a> <a id="2216" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="2218" href="Tactic.Derive.Convertible.html#2073" class="Bound">n</a><a id="2219" class="Symbol">)))</a>
    <a id="2227" href="Tactic.Derive.Convertible.html#2227" class="Bound">hsTy</a>   <a id="2234" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="2236" href="Reflection.Utils.TCI.html#9110" class="Function">applyWithVisibility</a> <a id="2256" href="Tactic.Derive.Convertible.html#1750" class="Bound">hsName</a>   <a id="2265" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="2267" href="Data.List.Base.html#5021" class="Function">L.replicate</a> <a id="2279" href="Tactic.Derive.Convertible.html#1836" class="Bound">hLvls</a> <a id="2285" href="Tactic.Derive.Convertible.html#2103" class="Bound">l₀</a> <a id="2288" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="2291" href="Data.List.Base.html#1612" class="Function">L.map</a> <a id="2297" href="Reflection.Syntax.html#1576" class="InductiveConstructor">♯</a> <a id="2299" class="Symbol">(</a><a id="2300" href="Data.List.Base.html#6430" class="Function">downFrom</a> <a id="2309" href="Tactic.Derive.Convertible.html#2073" class="Bound">n</a><a id="2310" class="Symbol">)</a>
    <a id="2316" class="Keyword">let</a> <a id="2320" href="Tactic.Derive.Convertible.html#2320" class="Bound">instHead</a> <a id="2329" class="Symbol">=</a> <a id="2331" href="Reflection.AST.DeBruijn.html#1515" class="Function">weaken</a> <a id="2338" href="Tactic.Derive.Convertible.html#2073" class="Bound">n</a> <a id="2340" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="2342" class="Keyword">quote</a> <a id="2348" href="Class.Convertible.Core.html#184" class="Record">Convertible</a> <a id="2360" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">∙⟦</a> <a id="2363" href="Tactic.Derive.Convertible.html#2123" class="Bound">agdaTy</a> <a id="2370" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">∣</a> <a id="2372" href="Tactic.Derive.Convertible.html#2227" class="Bound">hsTy</a> <a id="2377" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">⟧</a>
        <a id="2387" href="Tactic.Derive.Convertible.html#2387" class="Bound">tel</a>      <a id="2396" class="Symbol">=</a> <a id="2398" href="Data.List.Base.html#1612" class="Function">L.map</a> <a id="2404" href="Tactic.Derive.Convertible.html#1211" class="Function">hideTyView</a> <a id="2415" class="Symbol">(</a><a id="2416" href="Tactic.Derive.Convertible.html#1774" class="Bound">agdaParams</a> <a id="2427" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="2430" href="Tactic.Derive.Convertible.html#1844" class="Bound">hsParams</a><a id="2438" class="Symbol">)</a> <a id="2440" href="Data.List.Base.html#1712" class="Function Operator">++</a>
                   <a id="2462" href="Data.List.Base.html#5021" class="Function">L.replicate</a> <a id="2474" href="Tactic.Derive.Convertible.html#2073" class="Bound">n</a> <a id="2476" class="Symbol">(</a><a id="2477" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="2481" class="String">&quot;_&quot;</a> <a id="2485" class="Symbol">(</a><a id="2486" href="Reflection.AST.Argument.html#1395" class="InductiveConstructor">iArg</a> <a id="2491" class="Symbol">(</a><a id="2492" class="Keyword">quote</a> <a id="2498" href="Class.Convertible.Core.html#184" class="Record">Convertible</a> <a id="2510" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">∙⟦</a> <a id="2513" href="Reflection.Syntax.html#1576" class="InductiveConstructor">♯</a> <a id="2515" class="Symbol">(</a><a id="2516" href="Tactic.Derive.Convertible.html#2073" class="Bound">n</a> <a id="2518" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="2520" href="Tactic.Derive.Convertible.html#2073" class="Bound">n</a> <a id="2522" href="Data.Nat.Base.html#4462" class="Primitive Operator">∸</a> <a id="2524" class="Number">1</a><a id="2525" class="Symbol">)</a> <a id="2527" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">∣</a> <a id="2529" href="Reflection.Syntax.html#1576" class="InductiveConstructor">♯</a> <a id="2531" class="Symbol">(</a><a id="2532" href="Tactic.Derive.Convertible.html#2073" class="Bound">n</a> <a id="2534" href="Data.Nat.Base.html#4462" class="Primitive Operator">∸</a> <a id="2536" class="Number">1</a><a id="2537" class="Symbol">)</a> <a id="2539" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">⟧</a><a id="2540" class="Symbol">)))</a>
    <a id="2548" href="Class.Monad.Core.html#316" class="Field">return</a> <a id="2555" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="2557" href="Tactic.Derive.Convertible.html#2387" class="Bound">tel</a> <a id="2561" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2563" href="Tactic.Derive.Convertible.html#2320" class="Bound">instHead</a>

  <a id="2575" class="Comment">-- Compute one clause of the Convertible instance. For instance,</a>
  <a id="2642" class="Comment">-- conversionClause Convertible.to to ((c₁ , _) , (c₂ , _)) generates</a>
  <a id="2714" class="Comment">-- .to (c₁ x₁ .. xn) = c₂ (to x₁) .. (to xn)</a>
  <a id="2761" class="Comment">-- where the xi are the visible constructor arguments.</a>
  <a id="conversionClause"></a><a id="2818" href="Tactic.Derive.Convertible.html#2818" class="Function">conversionClause</a> <a id="2835" class="Symbol">:</a> <a id="2837" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2842" class="Symbol">→</a> <a id="2844" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2849" class="Symbol">→</a> <a id="2851" class="Symbol">(</a><a id="2852" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2857" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2859" href="Agda.Builtin.Reflection.html#5064" class="Function">Type</a><a id="2863" class="Symbol">)</a> <a id="2865" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2867" class="Symbol">(</a><a id="2868" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2873" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2875" href="Agda.Builtin.Reflection.html#5064" class="Function">Type</a><a id="2879" class="Symbol">)</a> <a id="2881" class="Symbol">→</a> <a id="2883" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="2886" href="Agda.Builtin.Reflection.html#5050" class="Datatype">Clause</a>
  <a id="2895" href="Tactic.Derive.Convertible.html#2818" class="Function">conversionClause</a> <a id="2912" href="Tactic.Derive.Convertible.html#2912" class="Bound">prjP</a> <a id="2917" href="Tactic.Derive.Convertible.html#2917" class="Bound">prjE</a> <a id="2922" class="Symbol">((</a><a id="2924" href="Tactic.Derive.Convertible.html#2924" class="Bound">fromC</a> <a id="2930" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2932" href="Tactic.Derive.Convertible.html#2932" class="Bound">fromTy</a><a id="2938" class="Symbol">)</a> <a id="2940" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2942" class="Symbol">(</a><a id="2943" href="Tactic.Derive.Convertible.html#2943" class="Bound">toC</a> <a id="2947" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2949" href="Tactic.Derive.Convertible.html#2949" class="Bound">toTy</a><a id="2953" class="Symbol">))</a> <a id="2956" class="Symbol">=</a> <a id="2958" class="Keyword">do</a>
    <a id="2965" class="Keyword">let</a> <a id="2969" href="Tactic.Derive.Convertible.html#2969" class="Bound">isVis</a>   <a id="2977" class="Symbol">=</a> <a id="2979" class="Symbol">λ</a> <a id="2981" class="Symbol">{</a> <a id="2983" class="Symbol">(</a><a id="2984" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="2988" class="Symbol">_</a> <a id="2990" class="Symbol">(</a><a id="2991" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="2995" class="Symbol">(</a><a id="2996" href="Agda.Builtin.Reflection.html#3637" class="InductiveConstructor">arg-info</a> <a id="3005" href="Agda.Builtin.Reflection.html#2762" class="InductiveConstructor">visible</a> <a id="3013" class="Symbol">_)</a> <a id="3016" class="Symbol">_))</a> <a id="3020" class="Symbol">→</a> <a id="3022" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="3026" class="Symbol">;</a> <a id="3028" class="CatchallClause Symbol">_</a> <a id="3030" class="Symbol">→</a> <a id="3032" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="3038" class="Symbol">}</a>
        <a id="3048" href="Tactic.Derive.Convertible.html#3048" class="Bound">fromTel</a> <a id="3056" class="Symbol">=</a> <a id="3058" href="Data.List.Base.html#10560" class="Function">L.filterᵇ</a> <a id="3068" href="Tactic.Derive.Convertible.html#2969" class="Bound">isVis</a> <a id="3074" class="Symbol">(</a><a id="3075" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3081" class="Symbol">(</a><a id="3082" href="Reflection.Utils.Core.html#577" class="Function">viewTy</a> <a id="3089" href="Tactic.Derive.Convertible.html#2932" class="Bound">fromTy</a><a id="3095" class="Symbol">))</a>
        <a id="3106" href="Tactic.Derive.Convertible.html#3106" class="Bound">toTel</a>   <a id="3114" class="Symbol">=</a> <a id="3116" href="Data.List.Base.html#10560" class="Function">L.filterᵇ</a> <a id="3126" href="Tactic.Derive.Convertible.html#2969" class="Bound">isVis</a> <a id="3132" class="Symbol">(</a><a id="3133" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3139" class="Symbol">(</a><a id="3140" href="Reflection.Utils.Core.html#577" class="Function">viewTy</a> <a id="3147" href="Tactic.Derive.Convertible.html#2949" class="Bound">toTy</a><a id="3151" class="Symbol">))</a>
        <a id="3162" href="Tactic.Derive.Convertible.html#3162" class="Bound">n</a>       <a id="3170" class="Symbol">=</a> <a id="3172" href="Data.List.Base.html#4746" class="Function">length</a> <a id="3179" href="Tactic.Derive.Convertible.html#3048" class="Bound">fromTel</a>
        <a id="3195" href="Tactic.Derive.Convertible.html#3195" class="Bound">mkCon</a>  <a id="3202" href="Tactic.Derive.Convertible.html#3202" class="Bound">c</a> <a id="3204" href="Tactic.Derive.Convertible.html#3204" class="Bound">mkArg</a> <a id="3210" class="Symbol">=</a> <a id="3212" href="Agda.Builtin.Reflection.html#5194" class="InductiveConstructor">Term.con</a> <a id="3221" href="Tactic.Derive.Convertible.html#3202" class="Bound">c</a>    <a id="3226" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="3228" href="Data.List.Base.html#1612" class="Function">L.map</a> <a id="3234" class="Symbol">(</a><a id="3235" href="Reflection.AST.Argument.html#1271" class="InductiveConstructor">vArg</a> <a id="3240" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="3242" href="Tactic.Derive.Convertible.html#3204" class="Bound">mkArg</a> <a id="3248" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="3250" href="Reflection.Syntax.html#1576" class="InductiveConstructor">♯</a><a id="3251" class="Symbol">)</a>  <a id="3254" class="Symbol">(</a><a id="3255" href="Data.List.Base.html#6430" class="Function">downFrom</a> <a id="3264" href="Tactic.Derive.Convertible.html#3162" class="Bound">n</a><a id="3265" class="Symbol">)</a>
        <a id="3275" href="Tactic.Derive.Convertible.html#3275" class="Bound">mkConP</a> <a id="3282" href="Tactic.Derive.Convertible.html#3282" class="Bound">c</a> <a id="3284" href="Tactic.Derive.Convertible.html#3284" class="Bound">mkArg</a> <a id="3290" class="Symbol">=</a> <a id="3292" href="Agda.Builtin.Reflection.html#5814" class="InductiveConstructor">Pattern.con</a> <a id="3304" href="Tactic.Derive.Convertible.html#3282" class="Bound">c</a> <a id="3306" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="3308" href="Data.List.Base.html#1612" class="Function">L.map</a> <a id="3314" class="Symbol">(</a><a id="3315" href="Reflection.AST.Argument.html#1271" class="InductiveConstructor">vArg</a> <a id="3320" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="3322" href="Tactic.Derive.Convertible.html#3284" class="Bound">mkArg</a> <a id="3328" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="3330" href="Reflection.Syntax.html#1705" class="InductiveConstructor Operator">`_</a><a id="3332" class="Symbol">)</a> <a id="3334" class="Symbol">(</a><a id="3335" href="Data.List.Base.html#6430" class="Function">downFrom</a> <a id="3344" href="Tactic.Derive.Convertible.html#3162" class="Bound">n</a><a id="3345" class="Symbol">)</a>
    <a id="3351" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="3356" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="3358" href="Class.Monad.Core.html#316" class="Field">return</a> <a id="3365" class="Symbol">(</a><a id="3366" href="Tactic.Derive.Convertible.html#3162" class="Bound">n</a> <a id="3368" href="Class.DecEq.Core.html#197" class="Function Operator">==</a> <a id="3371" href="Data.List.Base.html#4746" class="Function">length</a> <a id="3378" href="Tactic.Derive.Convertible.html#3106" class="Bound">toTel</a><a id="3383" class="Symbol">)</a>
      <a id="3391" class="Keyword">where</a> <a id="3397" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="3403" class="Symbol">→</a> <a id="3405" href="Reflection.TCI.html#1770" class="Function">liftTC</a> <a id="3412" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="3414" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="3429" class="String">&quot;%q and %q have different number of arguments&quot;</a> <a id="3476" href="Tactic.Derive.Convertible.html#2924" class="Bound">fromC</a> <a id="3482" href="Tactic.Derive.Convertible.html#2943" class="Bound">toC</a>
    <a id="3490" href="Class.Monad.Core.html#316" class="Field">return</a> <a id="3497" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="3499" href="Agda.Builtin.Reflection.html#6106" class="InductiveConstructor">clause</a> <a id="3506" class="Symbol">(</a><a id="3507" href="Tactic.Derive.Convertible.html#1124" class="Function">tyViewToTel</a> <a id="3519" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="3521" href="Data.List.Base.html#1612" class="Function">L.map</a> <a id="3527" class="Symbol">(λ</a> <a id="3530" class="Keyword">where</a> <a id="3536" class="Symbol">(</a><a id="3537" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="3541" href="Tactic.Derive.Convertible.html#3541" class="Bound">x</a> <a id="3543" class="Symbol">(</a><a id="3544" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="3548" href="Tactic.Derive.Convertible.html#3548" class="Bound">i</a> <a id="3550" class="Symbol">_))</a> <a id="3554" class="Symbol">→</a> <a id="3556" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="3560" href="Tactic.Derive.Convertible.html#3541" class="Bound">x</a> <a id="3562" class="Symbol">(</a><a id="3563" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="3567" href="Tactic.Derive.Convertible.html#3548" class="Bound">i</a> <a id="3569" href="Agda.Builtin.Reflection.html#5594" class="InductiveConstructor">unknown</a><a id="3576" class="Symbol">))</a> <a id="3579" href="Tactic.Derive.Convertible.html#3048" class="Bound">fromTel</a><a id="3586" class="Symbol">)</a>
                    <a id="3608" class="Symbol">(</a><a id="3609" href="Reflection.AST.Argument.html#1271" class="InductiveConstructor">vArg</a> <a id="3614" class="Symbol">(</a><a id="3615" href="Agda.Builtin.Reflection.html#5977" class="InductiveConstructor">proj</a> <a id="3620" href="Tactic.Derive.Convertible.html#2912" class="Bound">prjP</a><a id="3624" class="Symbol">)</a> <a id="3626" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3628" href="Reflection.AST.Argument.html#1271" class="InductiveConstructor">vArg</a> <a id="3633" class="Symbol">(</a><a id="3634" href="Tactic.Derive.Convertible.html#3275" class="Bound">mkConP</a> <a id="3641" href="Tactic.Derive.Convertible.html#2924" class="Bound">fromC</a> <a id="3647" href="Function.Base.html#704" class="Function">id</a><a id="3649" class="Symbol">)</a> <a id="3651" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3653" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="3655" class="Symbol">)</a>
                    <a id="3677" class="Symbol">(</a><a id="3678" href="Tactic.Derive.Convertible.html#3195" class="Bound">mkCon</a> <a id="3684" href="Tactic.Derive.Convertible.html#2943" class="Bound">toC</a> <a id="3688" class="Symbol">(</a><a id="3689" href="Tactic.Derive.Convertible.html#2917" class="Bound">prjE</a> <a id="3694" href="Reflection.Syntax.html#3047" class="InductiveConstructor Operator">∙⟦_⟧</a><a id="3698" class="Symbol">))</a>

  <a id="3704" class="Comment">-- Compute the clauses of a convertible instance.</a>
  <a id="instanceClauses"></a><a id="3756" href="Tactic.Derive.Convertible.html#3756" class="Function">instanceClauses</a> <a id="3772" class="Symbol">:</a> <a id="3774" class="Symbol">(</a><a id="3775" href="Tactic.Derive.Convertible.html#3775" class="Bound">agdaName</a> <a id="3784" href="Tactic.Derive.Convertible.html#3784" class="Bound">hsName</a> <a id="3791" class="Symbol">:</a> <a id="3793" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="3797" class="Symbol">)</a> <a id="3799" class="Symbol">→</a> <a id="3801" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="3804" class="Symbol">(</a><a id="3805" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3810" href="Agda.Builtin.Reflection.html#5050" class="Datatype">Clause</a><a id="3816" class="Symbol">)</a>
  <a id="3820" href="Tactic.Derive.Convertible.html#3756" class="Function">instanceClauses</a> <a id="3836" href="Tactic.Derive.Convertible.html#3836" class="Bound">agdaName</a> <a id="3845" href="Tactic.Derive.Convertible.html#3845" class="Bound">hsName</a> <a id="3852" class="Symbol">=</a> <a id="3854" class="Keyword">do</a>
    <a id="3861" href="Tactic.Derive.Convertible.html#3861" class="Bound">agdaCons</a> <a id="3870" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="3872" href="Class.MonadTC.html#12000" class="Function">getConstrs</a> <a id="3883" href="Tactic.Derive.Convertible.html#3836" class="Bound">agdaName</a>
    <a id="3896" href="Tactic.Derive.Convertible.html#3896" class="Bound">hsCons</a>   <a id="3905" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="3907" href="Class.MonadTC.html#12000" class="Function">getConstrs</a> <a id="3918" href="Tactic.Derive.Convertible.html#3845" class="Bound">hsName</a>
    <a id="3929" href="Tactic.Derive.Convertible.html#3929" class="Bound">agdaPars</a> <a id="3938" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="3940" href="Data.List.Base.html#4746" class="Function">length</a> <a id="3947" href="Class.Functor.Core.html#242" class="Field Operator">&lt;$&gt;</a> <a id="3951" href="Reflection.Utils.TCI.html#7769" class="Function">getParamsAndIndices</a> <a id="3971" href="Tactic.Derive.Convertible.html#3836" class="Bound">agdaName</a>
    <a id="3984" href="Tactic.Derive.Convertible.html#3984" class="Bound">hsPars</a>   <a id="3993" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="3995" href="Data.List.Base.html#4746" class="Function">length</a> <a id="4002" href="Class.Functor.Core.html#242" class="Field Operator">&lt;$&gt;</a> <a id="4006" href="Reflection.Utils.TCI.html#7769" class="Function">getParamsAndIndices</a> <a id="4026" href="Tactic.Derive.Convertible.html#3845" class="Bound">hsName</a>
    <a id="4037" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="4042" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="4044" href="Class.Monad.Core.html#316" class="Field">return</a> <a id="4051" class="Symbol">(</a><a id="4052" href="Data.List.Base.html#4746" class="Function">length</a> <a id="4059" href="Tactic.Derive.Convertible.html#3861" class="Bound">agdaCons</a> <a id="4068" href="Class.DecEq.Core.html#197" class="Function Operator">==</a> <a id="4071" href="Data.List.Base.html#4746" class="Function">length</a> <a id="4078" href="Tactic.Derive.Convertible.html#3896" class="Bound">hsCons</a><a id="4084" class="Symbol">)</a>
      <a id="4092" class="Keyword">where</a> <a id="4098" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="4104" class="Symbol">→</a> <a id="4106" href="Reflection.TCI.html#1770" class="Function">liftTC</a> <a id="4113" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="4115" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="4130" class="String">&quot;%q and %q have different number of constructors&quot;</a> <a id="4180" href="Tactic.Derive.Convertible.html#3836" class="Bound">agdaName</a> <a id="4189" href="Tactic.Derive.Convertible.html#3845" class="Bound">hsName</a>
    <a id="4200" href="Tactic.Derive.Convertible.html#4200" class="Bound">toClauses</a>   <a id="4212" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="4214" href="Class.Monad.Core.html#832" class="Function">mapM</a> <a id="4219" class="Symbol">(</a><a id="4220" href="Tactic.Derive.Convertible.html#2818" class="Function">conversionClause</a> <a id="4237" class="Symbol">(</a><a id="4238" class="Keyword">quote</a> <a id="4244" href="Class.Convertible.Core.html#228" class="Field">Convertible.to</a><a id="4258" class="Symbol">)</a>   <a id="4262" class="Symbol">(</a><a id="4263" class="Keyword">quote</a> <a id="4269" href="Class.Convertible.Core.html#228" class="Field">to</a><a id="4271" class="Symbol">)</a>  <a id="4274" class="Symbol">)</a> <a id="4276" class="Symbol">(</a><a id="4277" href="Data.List.Base.html#3484" class="Function">L.zip</a> <a id="4283" href="Tactic.Derive.Convertible.html#3861" class="Bound">agdaCons</a> <a id="4292" href="Tactic.Derive.Convertible.html#3896" class="Bound">hsCons</a><a id="4298" class="Symbol">)</a>
    <a id="4304" href="Tactic.Derive.Convertible.html#4304" class="Bound">fromClauses</a> <a id="4316" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="4318" href="Class.Monad.Core.html#832" class="Function">mapM</a> <a id="4323" class="Symbol">(</a><a id="4324" href="Tactic.Derive.Convertible.html#2818" class="Function">conversionClause</a> <a id="4341" class="Symbol">(</a><a id="4342" class="Keyword">quote</a> <a id="4348" href="Class.Convertible.Core.html#249" class="Field">Convertible.from</a><a id="4364" class="Symbol">)</a> <a id="4366" class="Symbol">(</a><a id="4367" class="Keyword">quote</a> <a id="4373" href="Class.Convertible.Core.html#249" class="Field">from</a><a id="4377" class="Symbol">))</a> <a id="4380" class="Symbol">(</a><a id="4381" href="Data.List.Base.html#3484" class="Function">L.zip</a> <a id="4387" href="Tactic.Derive.Convertible.html#3896" class="Bound">hsCons</a> <a id="4394" href="Tactic.Derive.Convertible.html#3861" class="Bound">agdaCons</a><a id="4402" class="Symbol">)</a>
    <a id="4408" href="Class.Monad.Core.html#316" class="Field">return</a> <a id="4415" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="4417" href="Tactic.Derive.Convertible.html#4200" class="Bound">toClauses</a> <a id="4427" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="4430" href="Tactic.Derive.Convertible.html#4304" class="Bound">fromClauses</a>

  <a id="absurdClause"></a><a id="4445" href="Tactic.Derive.Convertible.html#4445" class="Function">absurdClause</a> <a id="4458" class="Symbol">:</a> <a id="4460" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="4465" class="Symbol">→</a> <a id="4467" href="Agda.Builtin.Reflection.html#5050" class="Datatype">Clause</a>
  <a id="4476" href="Tactic.Derive.Convertible.html#4445" class="Function">absurdClause</a> <a id="4489" href="Tactic.Derive.Convertible.html#4489" class="Bound">prj</a> <a id="4493" class="Symbol">=</a> <a id="4495" href="Agda.Builtin.Reflection.html#6188" class="InductiveConstructor">absurd-clause</a> <a id="4509" class="Symbol">((</a><a id="4511" class="String">&quot;x&quot;</a> <a id="4515" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4517" href="Reflection.AST.Argument.html#1271" class="InductiveConstructor">vArg</a> <a id="4522" href="Agda.Builtin.Reflection.html#5594" class="InductiveConstructor">unknown</a><a id="4529" class="Symbol">)</a> <a id="4531" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4533" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="4535" class="Symbol">)</a> <a id="4537" class="Symbol">(</a><a id="4538" href="Reflection.AST.Argument.html#1271" class="InductiveConstructor">vArg</a> <a id="4543" class="Symbol">(</a><a id="4544" href="Agda.Builtin.Reflection.html#5977" class="InductiveConstructor">proj</a> <a id="4549" href="Tactic.Derive.Convertible.html#4489" class="Bound">prj</a><a id="4552" class="Symbol">)</a> <a id="4554" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4556" href="Reflection.AST.Argument.html#1271" class="InductiveConstructor">vArg</a> <a id="4561" class="Symbol">(</a><a id="4562" href="Agda.Builtin.Reflection.html#6012" class="InductiveConstructor">absurd</a> <a id="4569" class="Number">0</a><a id="4570" class="Symbol">)</a> <a id="4572" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4574" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="4576" class="Symbol">)</a>

  <a id="4581" class="Comment">-- Compute conversion clauses for the current goal and wrap them in a pattern lambda.</a>
  <a id="patternLambda"></a><a id="4669" href="Tactic.Derive.Convertible.html#4669" class="Function">patternLambda</a> <a id="4683" class="Symbol">:</a> <a id="4685" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="4688" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="4695" href="Tactic.Derive.Convertible.html#4669" class="Function">patternLambda</a> <a id="4709" class="Symbol">=</a> <a id="4711" class="Keyword">do</a>
    <a id="4718" class="Keyword">quote</a> <a id="4724" href="Class.Convertible.Core.html#184" class="Record">Convertible</a> <a id="4736" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">∙⟦</a> <a id="4739" href="Tactic.Derive.Convertible.html#4739" class="Bound">`A</a> <a id="4742" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">∣</a> <a id="4744" href="Tactic.Derive.Convertible.html#4744" class="Bound">`B</a> <a id="4747" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">⟧</a> <a id="4749" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="4751" href="Class.MonadTC.html#1854" class="Field">reduce</a> <a id="4758" href="Class.Monad.Core.html#426" class="Function Operator">=&lt;&lt;</a> <a id="4762" href="Class.MonadTC.html#11510" class="Function">goalTy</a>
      <a id="4775" class="Keyword">where</a> <a id="4781" href="Tactic.Derive.Convertible.html#4781" class="CatchallClause Bound">t</a> <a id="4783" class="Symbol">→</a> <a id="4785" href="Reflection.TCI.html#1770" class="Function">liftTC</a> <a id="4792" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="4794" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="4809" class="String">&quot;Expected Convertible A B, got %t&quot;</a> <a id="4844" href="Tactic.Derive.Convertible.html#4781" class="Bound">t</a>
    <a id="4850" href="Tactic.Derive.Convertible.html#4850" class="Bound">agdaCons</a> <a id="4859" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="4861" href="Class.MonadTC.html#12352" class="Function">getConstrsForType</a> <a id="4879" href="Tactic.Derive.Convertible.html#4739" class="Bound">`A</a>
    <a id="4886" href="Tactic.Derive.Convertible.html#4886" class="Bound">hsCons</a>   <a id="4895" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="4897" href="Class.MonadTC.html#12352" class="Function">getConstrsForType</a> <a id="4915" href="Tactic.Derive.Convertible.html#4744" class="Bound">`B</a>
    <a id="4922" href="Tactic.Derive.Convertible.html#4922" class="Bound">toClauses</a>   <a id="4934" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="4936" href="Class.Monad.Core.html#832" class="Function">mapM</a> <a id="4941" class="Symbol">(</a><a id="4942" href="Tactic.Derive.Convertible.html#2818" class="Function">conversionClause</a> <a id="4959" class="Symbol">(</a><a id="4960" class="Keyword">quote</a> <a id="4966" href="Class.Convertible.Core.html#228" class="Field">Convertible.to</a><a id="4980" class="Symbol">)</a>   <a id="4984" class="Symbol">(</a><a id="4985" class="Keyword">quote</a> <a id="4991" href="Class.Convertible.Core.html#228" class="Field">to</a><a id="4993" class="Symbol">)</a>  <a id="4996" class="Symbol">)</a> <a id="4998" class="Symbol">(</a><a id="4999" href="Data.List.Base.html#3484" class="Function">L.zip</a> <a id="5005" href="Tactic.Derive.Convertible.html#4850" class="Bound">agdaCons</a> <a id="5014" href="Tactic.Derive.Convertible.html#4886" class="Bound">hsCons</a><a id="5020" class="Symbol">)</a>
    <a id="5026" href="Tactic.Derive.Convertible.html#5026" class="Bound">fromClauses</a> <a id="5038" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="5040" href="Class.Monad.Core.html#832" class="Function">mapM</a> <a id="5045" class="Symbol">(</a><a id="5046" href="Tactic.Derive.Convertible.html#2818" class="Function">conversionClause</a> <a id="5063" class="Symbol">(</a><a id="5064" class="Keyword">quote</a> <a id="5070" href="Class.Convertible.Core.html#249" class="Field">Convertible.from</a><a id="5086" class="Symbol">)</a> <a id="5088" class="Symbol">(</a><a id="5089" class="Keyword">quote</a> <a id="5095" href="Class.Convertible.Core.html#249" class="Field">from</a><a id="5099" class="Symbol">))</a> <a id="5102" class="Symbol">(</a><a id="5103" href="Data.List.Base.html#3484" class="Function">L.zip</a> <a id="5109" href="Tactic.Derive.Convertible.html#4886" class="Bound">hsCons</a> <a id="5116" href="Tactic.Derive.Convertible.html#4850" class="Bound">agdaCons</a><a id="5124" class="Symbol">)</a>
    <a id="5130" href="Function.Base.html#4061" class="Function Operator">case</a> <a id="5135" href="Tactic.Derive.Convertible.html#4922" class="Bound">toClauses</a> <a id="5145" href="Data.List.Base.html#1712" class="Function Operator">++</a> <a id="5148" href="Tactic.Derive.Convertible.html#5026" class="Bound">fromClauses</a> <a id="5160" href="Function.Base.html#4061" class="Function Operator">of</a> <a id="5163" class="Symbol">λ</a> <a id="5165" class="Keyword">where</a>
      <a id="5177" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>  <a id="5181" class="Symbol">→</a> <a id="5183" href="Class.Monad.Core.html#316" class="Field">return</a> <a id="5190" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="5192" href="Agda.Builtin.Reflection.html#5361" class="InductiveConstructor">pat-lam</a> <a id="5200" class="Symbol">(</a><a id="5201" href="Tactic.Derive.Convertible.html#4445" class="Function">absurdClause</a> <a id="5214" class="Symbol">(</a><a id="5215" class="Keyword">quote</a> <a id="5221" href="Class.Convertible.Core.html#228" class="Field">Convertible.to</a><a id="5235" class="Symbol">)</a> <a id="5237" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5239" href="Tactic.Derive.Convertible.html#4445" class="Function">absurdClause</a> <a id="5252" class="Symbol">(</a><a id="5253" class="Keyword">quote</a> <a id="5259" href="Class.Convertible.Core.html#249" class="Field">Convertible.from</a><a id="5275" class="Symbol">)</a> <a id="5277" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5279" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="5281" class="Symbol">)</a> <a id="5283" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
      <a id="5292" href="Tactic.Derive.Convertible.html#5292" class="CatchallClause Bound">cls</a> <a id="5296" class="Symbol">→</a> <a id="5298" href="Class.Monad.Core.html#316" class="Field">return</a> <a id="5305" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="5307" href="Agda.Builtin.Reflection.html#5361" class="InductiveConstructor">pat-lam</a> <a id="5315" href="Tactic.Derive.Convertible.html#5292" class="Bound">cls</a> <a id="5319" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>

<a id="doPatternLambda"></a><a id="5323" href="Tactic.Derive.Convertible.html#5323" class="Function">doPatternLambda</a> <a id="5339" class="Symbol">:</a> <a id="5341" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="5346" class="Symbol">→</a> <a id="5348" href="Agda.Builtin.Reflection.html#8617" class="Postulate">R.TC</a> <a id="5353" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
<a id="5358" href="Tactic.Derive.Convertible.html#5323" class="Function">doPatternLambda</a> <a id="5374" href="Tactic.Derive.Convertible.html#5374" class="Bound">hole</a> <a id="5379" class="Symbol">=</a> <a id="5381" href="Tactic.Derive.Convertible.html#4669" class="Function">patternLambda</a> <a id="5395" href="Class.Monad.Core.html#426" class="Function Operator">=&lt;&lt;</a> <a id="5399" href="Class.MonadTC.html#1120" class="Function">initTCEnvWithGoal</a> <a id="5417" href="Tactic.Derive.Convertible.html#5374" class="Bound">hole</a>

<a id="5423" class="Comment">-- Deriving a Convertible instance. Usage</a>
<a id="5465" class="Comment">--   unquoteDecl iName = deriveConvertible iName (quote AgdaTy) (quote HsTy)</a>
<a id="deriveConvertible"></a><a id="5542" href="Tactic.Derive.Convertible.html#5542" class="Function">deriveConvertible</a> <a id="5560" class="Symbol">:</a> <a id="5562" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="5567" class="Symbol">→</a> <a id="5569" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="5574" class="Symbol">→</a> <a id="5576" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="5581" class="Symbol">→</a> <a id="5583" href="Agda.Builtin.Reflection.html#8617" class="Postulate">R.TC</a> <a id="5588" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="5590" href="Tactic.Derive.Convertible.html#5542" class="Function">deriveConvertible</a> <a id="5608" href="Tactic.Derive.Convertible.html#5608" class="Bound">instName</a> <a id="5617" href="Tactic.Derive.Convertible.html#5617" class="Bound">agdaName</a> <a id="5626" href="Tactic.Derive.Convertible.html#5626" class="Bound">hsName</a> <a id="5633" class="Symbol">=</a> <a id="5635" href="Reflection.Tactic.html#868" class="Function">initUnquoteWithGoal</a> <a id="5655" class="Symbol">⦃</a> <a id="5657" href="Class.MonadTC.html#706" class="Function">defaultTCOptions</a> <a id="5674" class="Symbol">⦄</a> <a id="5676" class="Symbol">(</a><a id="5677" href="Agda.Builtin.Reflection.html#5477" class="InductiveConstructor">sort</a> <a id="5682" class="Symbol">(</a><a id="5683" href="Agda.Builtin.Reflection.html#5660" class="InductiveConstructor">lit</a> <a id="5687" class="Number">0</a><a id="5688" class="Symbol">))</a> <a id="5691" class="Keyword">do</a>
  <a id="5696" href="Tactic.Derive.Convertible.html#5696" class="Bound">agdaDef</a> <a id="5704" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="5706" href="Class.MonadTC.html#2222" class="Field">getDefinition</a> <a id="5720" href="Tactic.Derive.Convertible.html#5617" class="Bound">agdaName</a>
  <a id="5731" href="Tactic.Derive.Convertible.html#5731" class="Bound">hsDef</a>   <a id="5739" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="5741" href="Class.MonadTC.html#2222" class="Field">getDefinition</a> <a id="5755" href="Tactic.Derive.Convertible.html#5626" class="Bound">hsName</a>
  <a id="5764" class="Comment">-- instName ← freshName $ &quot;Convertible&quot; S.++ show hsName</a>
  <a id="5823" href="Tactic.Derive.Convertible.html#5823" class="Bound">instTel</a> <a id="5831" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5833" href="Tactic.Derive.Convertible.html#5833" class="Bound">instTy</a> <a id="5840" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="5842" href="Tactic.Derive.Convertible.html#1672" class="Function">instanceType</a> <a id="5855" href="Tactic.Derive.Convertible.html#5617" class="Bound">agdaName</a> <a id="5864" href="Tactic.Derive.Convertible.html#5626" class="Bound">hsName</a>
  <a id="5873" href="Tactic.Derive.Convertible.html#5873" class="Bound">inst</a>    <a id="5881" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="5883" href="Class.MonadTC.html#2047" class="Field">declareDef</a> <a id="5894" class="Symbol">(</a><a id="5895" href="Reflection.AST.Argument.html#1395" class="InductiveConstructor">iArg</a> <a id="5900" href="Tactic.Derive.Convertible.html#5608" class="Bound">instName</a><a id="5908" class="Symbol">)</a> <a id="5910" class="Symbol">(</a><a id="5911" href="Reflection.Utils.Core.html#693" class="Function">tyView</a> <a id="5918" class="Symbol">(</a><a id="5919" href="Tactic.Derive.Convertible.html#5823" class="Bound">instTel</a> <a id="5927" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5929" href="Tactic.Derive.Convertible.html#5833" class="Bound">instTy</a><a id="5935" class="Symbol">))</a>
  <a id="5940" href="Tactic.Derive.Convertible.html#5940" class="Bound">clauses</a> <a id="5948" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="5950" href="Tactic.Derive.Convertible.html#3756" class="Function">instanceClauses</a> <a id="5966" href="Tactic.Derive.Convertible.html#5617" class="Bound">agdaName</a> <a id="5975" href="Tactic.Derive.Convertible.html#5626" class="Bound">hsName</a>
  <a id="5984" href="Class.MonadTC.html#2137" class="Field">defineFun</a> <a id="5994" href="Tactic.Derive.Convertible.html#5608" class="Bound">instName</a> <a id="6003" href="Tactic.Derive.Convertible.html#5940" class="Bound">clauses</a>
  <a id="6013" href="Class.Monad.Core.html#316" class="Field">return</a> <a id="6020" class="Symbol">_</a>

<a id="6023" class="Comment">-- Macros providing an alternative interface. Usage</a>
<a id="6075" class="Comment">--   iName : ConvertibleType AgdaTy HsTy</a>
<a id="6116" class="Comment">--   iName = autoConvertible</a>
<a id="6145" class="Comment">-- or</a>
<a id="6151" class="Comment">--   iName = autoConvert AgdaTy</a>
<a id="6183" class="Keyword">macro</a>
  <a id="ConvertibleType"></a><a id="6191" href="Tactic.Derive.Convertible.html#6191" class="Macro">ConvertibleType</a> <a id="6207" class="Symbol">:</a> <a id="6209" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6214" class="Symbol">→</a> <a id="6216" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6221" class="Symbol">→</a> <a id="6223" href="Reflection.Tactic.html#453" class="Function">Tactic</a>
  <a id="6232" href="Tactic.Derive.Convertible.html#6191" class="Macro">ConvertibleType</a> <a id="6248" href="Tactic.Derive.Convertible.html#6248" class="Bound">agdaName</a> <a id="6257" href="Tactic.Derive.Convertible.html#6257" class="Bound">hsName</a> <a id="6264" class="Symbol">=</a> <a id="6266" href="Reflection.Tactic.html#801" class="Function">initTac</a> <a id="6274" class="Symbol">⦃</a> <a id="6276" href="Class.MonadTC.html#706" class="Function">defaultTCOptions</a> <a id="6293" class="Symbol">⦄</a> <a id="6295" href="Function.Base.html#1993" class="Function Operator">$</a>
    <a id="6301" href="Class.MonadTC.html#12881" class="Function">unifyWithGoal</a> <a id="6315" href="Function.Base.html#1134" class="Function Operator">∘</a> <a id="6317" href="Reflection.Utils.Core.html#693" class="Function">tyView</a> <a id="6324" href="Class.Monad.Core.html#426" class="Function Operator">=&lt;&lt;</a> <a id="6328" href="Tactic.Derive.Convertible.html#1672" class="Function">instanceType</a> <a id="6341" href="Tactic.Derive.Convertible.html#6248" class="Bound">agdaName</a> <a id="6350" href="Tactic.Derive.Convertible.html#6257" class="Bound">hsName</a>

  <a id="autoConvertible"></a><a id="6360" href="Tactic.Derive.Convertible.html#6360" class="Macro">autoConvertible</a> <a id="6376" class="Symbol">:</a> <a id="6378" href="Reflection.Tactic.html#453" class="Function">Tactic</a>
  <a id="6387" href="Tactic.Derive.Convertible.html#6360" class="Macro">autoConvertible</a> <a id="6403" class="Symbol">=</a> <a id="6405" href="Reflection.Tactic.html#801" class="Function">initTac</a> <a id="6413" class="Symbol">⦃</a> <a id="6415" href="Class.MonadTC.html#706" class="Function">defaultTCOptions</a> <a id="6432" class="Symbol">⦄</a> <a id="6434" href="Function.Base.html#1993" class="Function Operator">$</a>
    <a id="6440" href="Class.MonadTC.html#12881" class="Function">unifyWithGoal</a> <a id="6454" href="Class.Monad.Core.html#426" class="Function Operator">=&lt;&lt;</a> <a id="6458" href="Tactic.Derive.Convertible.html#4669" class="Function">patternLambda</a>

  <a id="autoConvert"></a><a id="6475" href="Tactic.Derive.Convertible.html#6475" class="Macro">autoConvert</a> <a id="6487" class="Symbol">:</a> <a id="6489" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6494" class="Symbol">→</a> <a id="6496" href="Reflection.Tactic.html#453" class="Function">Tactic</a>
  <a id="6505" href="Tactic.Derive.Convertible.html#6475" class="Macro">autoConvert</a> <a id="6517" href="Tactic.Derive.Convertible.html#6517" class="Bound">d</a> <a id="6519" href="Tactic.Derive.Convertible.html#6519" class="Bound">hole</a> <a id="6524" class="Symbol">=</a> <a id="6526" class="Keyword">do</a>
    <a id="6533" href="Tactic.Derive.Convertible.html#6533" class="Bound">hsTyMeta</a> <a id="6542" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="6544" href="Reflection.TCM.html#1261" class="Function">R.newMeta</a> <a id="6554" href="Reflection.Syntax.html#3546" class="InductiveConstructor">`Set</a>
    <a id="6563" href="Agda.Builtin.Reflection.html#8929" class="Postulate">R.checkType</a> <a id="6575" href="Tactic.Derive.Convertible.html#6519" class="Bound">hole</a> <a id="6580" href="Function.Base.html#1993" class="Function Operator">$</a> <a id="6582" class="Keyword">quote</a> <a id="6588" href="Class.Convertible.Core.html#184" class="Record">Convertible</a> <a id="6600" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">∙⟦</a> <a id="6603" href="Tactic.Derive.Convertible.html#6517" class="Bound">d</a> <a id="6605" href="Reflection.Syntax.html#3023" class="InductiveConstructor Operator">∙</a> <a id="6607" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">∣</a> <a id="6609" href="Tactic.Derive.Convertible.html#6533" class="Bound">hsTyMeta</a> <a id="6618" href="Reflection.Syntax.html#3087" class="InductiveConstructor Operator">⟧</a>
    <a id="6624" href="Tactic.Derive.Convertible.html#6624" class="Bound">hsTy</a> <a id="6629" href="Class.Monad.Core.html#337" class="Field Operator">←</a> <a id="6631" href="Tactic.Derive.HsType.html#3724" class="Function">solveHsType</a> <a id="6643" class="Symbol">(</a><a id="6644" href="Tactic.Derive.Convertible.html#6517" class="Bound">d</a> <a id="6646" href="Reflection.Syntax.html#3023" class="InductiveConstructor Operator">∙</a><a id="6647" class="Symbol">)</a>
    <a id="6653" href="Agda.Builtin.Reflection.html#8790" class="Postulate">R.unify</a> <a id="6661" href="Tactic.Derive.Convertible.html#6533" class="Bound">hsTyMeta</a> <a id="6670" href="Tactic.Derive.Convertible.html#6624" class="Bound">hsTy</a>
    <a id="6679" href="Agda.Builtin.Reflection.html#8790" class="Postulate">R.unify</a> <a id="6687" href="Tactic.Derive.Convertible.html#6519" class="Bound">hole</a> <a id="6692" href="Class.Monad.Core.html#426" class="Function Operator">=&lt;&lt;</a> <a id="6696" href="Tactic.Derive.Convertible.html#5323" class="Function">doPatternLambda</a> <a id="6712" href="Tactic.Derive.Convertible.html#6519" class="Bound">hole</a>

<a id="6718" class="Comment">-- Tests</a>

<a id="6728" class="Keyword">private</a>

  <a id="6739" class="Keyword">record</a> <a id="Test"></a><a id="6746" href="Tactic.Derive.Convertible.html#6746" class="Record">Test</a> <a id="6751" class="Symbol">:</a> <a id="6753" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="6757" class="Keyword">where</a>
    <a id="6767" class="Keyword">field</a> <a id="Test.f"></a><a id="6773" href="Tactic.Derive.Convertible.html#6773" class="Field">f</a> <a id="6775" class="Symbol">:</a> <a id="6777" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
          <a id="Test.g"></a><a id="6789" href="Tactic.Derive.Convertible.html#6789" class="Field">g</a> <a id="6791" class="Symbol">:</a> <a id="6793" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="6799" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
          <a id="Test.h"></a><a id="6811" href="Tactic.Derive.Convertible.html#6811" class="Field">h</a> <a id="6813" class="Symbol">:</a> <a id="6815" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="6820" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

  <a id="6825" class="Keyword">instance</a>
    <a id="HsTy-Test"></a><a id="6838" href="Tactic.Derive.Convertible.html#6838" class="Function">HsTy-Test</a> <a id="6848" class="Symbol">=</a> <a id="6850" href="Tactic.Derive.HsType.html#12259" class="Macro Operator">autoHsType</a> <a id="6861" href="Tactic.Derive.Convertible.html#6746" class="Record">Test</a> <a id="6866" href="Tactic.Derive.HsType.html#12259" class="Macro Operator">⊣</a> <a id="6868" href="Tactic.Derive.HsType.html#3071" class="Function">withConstructor</a> <a id="6884" class="String">&quot;MkTest&quot;</a> <a id="6893" href="Tactic.Derive.HsType.html#3357" class="Function Operator">•</a> <a id="6895" href="Tactic.Derive.HsType.html#3253" class="Function">fieldPrefix</a> <a id="6907" class="String">&quot;t&quot;</a>
    <a id="Conv-Test"></a><a id="6915" href="Tactic.Derive.Convertible.html#6915" class="Function">Conv-Test</a> <a id="6925" class="Symbol">=</a> <a id="6927" href="Tactic.Derive.Convertible.html#6475" class="Macro">autoConvert</a> <a id="6939" href="Tactic.Derive.Convertible.html#6746" class="Record">Test</a>
</pre></body></html>