<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Tactic.Derive.Convertible</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/agda/agda-stdlib-meta/tree/upstream-convertible-hstype///Tactic/Derive/Convertible.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="Tactic.Derive.Convertible.html" class="Module">Tactic.Derive.Convertible</a> <a id="34" class="Keyword">where</a>

<a id="41" class="Keyword">open</a> <a id="46" class="Keyword">import</a> <a id="53" href="Meta.Prelude.html" class="Module">Meta.Prelude</a>
<a id="66" class="Keyword">open</a> <a id="71" class="Keyword">import</a> <a id="78" href="Meta.Init.html" class="Module">Meta.Init</a>

<a id="89" class="Keyword">import</a> <a id="96" href="Data.List.html" class="Module">Data.List</a> <a id="106" class="Symbol">as</a> <a id="109" class="Module">L</a>

<a id="112" class="Keyword">open</a> <a id="117" class="Keyword">import</a> <a id="124" href="Reflection.Tactic.html" class="Module">Reflection.Tactic</a>
<a id="142" class="Keyword">open</a> <a id="147" class="Keyword">import</a> <a id="154" href="Reflection.AST.DeBruijn.html" class="Module">Reflection.AST.DeBruijn</a>
<a id="178" class="Keyword">import</a> <a id="185" href="Reflection.TCM.html" class="Module">Reflection.TCM</a> <a id="200" class="Symbol">as</a> <a id="203" class="Module">R</a>
<a id="205" class="Keyword">open</a> <a id="210" class="Keyword">import</a> <a id="217" href="Reflection.Utils.html" class="Module">Reflection.Utils</a>
<a id="234" class="Keyword">open</a> <a id="239" class="Keyword">import</a> <a id="246" href="Reflection.Utils.TCI.html" class="Module">Reflection.Utils.TCI</a>

<a id="268" class="Keyword">open</a> <a id="273" class="Keyword">import</a> <a id="280" href="Class.DecEq.html" class="Module">Class.DecEq</a>
<a id="292" class="Keyword">open</a> <a id="297" class="Keyword">import</a> <a id="304" href="Class.Functor.html" class="Module">Class.Functor</a>
<a id="318" class="Keyword">open</a> <a id="323" class="Keyword">import</a> <a id="330" href="Class.Bifunctor.html" class="Module">Class.Bifunctor</a>
<a id="346" class="Keyword">open</a> <a id="351" class="Keyword">import</a> <a id="358" href="Class.Monad.html" class="Module">Class.Monad</a>
<a id="370" class="Keyword">open</a> <a id="375" class="Keyword">import</a> <a id="382" href="Class.MonadTC.Instances.html" class="Module">Class.MonadTC.Instances</a>
<a id="406" class="Keyword">open</a> <a id="411" class="Keyword">import</a> <a id="418" href="Class.MonadReader.html" class="Module">Class.MonadReader</a>

<a id="437" class="Keyword">open</a> <a id="442" class="Keyword">import</a> <a id="449" href="Class.Convertible.html" class="Module">Class.Convertible</a>
<a id="467" class="Keyword">open</a> <a id="472" class="Keyword">import</a> <a id="479" href="Class.HasHsType.html" class="Module">Class.HasHsType</a>
<a id="495" class="Keyword">open</a> <a id="500" class="Keyword">import</a> <a id="507" href="Tactic.Derive.HsType.html" class="Module">Tactic.Derive.HsType</a>

<a id="529" class="Keyword">private</a>
  <a id="539" class="Keyword">instance</a> <a id="548" href="Tactic.Derive.Convertible.html#548" class="Function">_</a> <a id="550" class="Symbol">=</a> <a id="552" href="Class.Monad.Core.html#610" class="Function">Functor-M</a> <a id="562" class="Symbol">{</a><a id="563" href="Reflection.TCI.html#554" class="Function">TC</a><a id="565" class="Symbol">}</a>

  <a id="570" class="Keyword">open</a> <a id="575" href="Class.MonadReader.html#205" class="Module">MonadReader</a> <a id="587" class="Symbol">⦃...⦄</a>

  <a id="TyViewTel"></a><a id="596" href="Tactic.Derive.Convertible.html#596" class="Function">TyViewTel</a> <a id="606" class="Symbol">=</a> <a id="608" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="613" class="Symbol">(</a><a id="614" href="Agda.Builtin.Reflection.html#4249" class="Datatype">Abs</a> <a id="618" class="Symbol">(</a><a id="619" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="623" href="Agda.Builtin.Reflection.html#5064" class="Function">Type</a><a id="627" class="Symbol">))</a>

  <a id="substTel"></a><a id="633" href="Tactic.Derive.Convertible.html#633" class="Function">substTel</a> <a id="642" class="Symbol">:</a> <a id="644" href="Reflection.Utils.Substitute.html#451" class="Function">Subst</a> <a id="650" href="Tactic.Derive.Convertible.html#596" class="Function">TyViewTel</a>
  <a id="662" href="Tactic.Derive.Convertible.html#633" class="Function">substTel</a> <a id="671" href="Tactic.Derive.Convertible.html#671" class="Bound">x</a> <a id="673" href="Tactic.Derive.Convertible.html#673" class="Bound">s</a> <a id="675" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="678" class="Symbol">=</a> <a id="680" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
  <a id="685" href="Tactic.Derive.Convertible.html#633" class="Function">substTel</a> <a id="694" href="Tactic.Derive.Convertible.html#694" class="Bound">x</a> <a id="696" href="Tactic.Derive.Convertible.html#696" class="Bound">s</a> <a id="698" class="Symbol">(</a><a id="699" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="703" href="Tactic.Derive.Convertible.html#703" class="Bound">z</a> <a id="705" href="Tactic.Derive.Convertible.html#705" class="Bound">t</a> <a id="707" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="709" href="Tactic.Derive.Convertible.html#709" class="Bound">tel</a><a id="712" class="Symbol">)</a> <a id="714" class="Symbol">=</a> <a id="716" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="720" href="Tactic.Derive.Convertible.html#703" class="Bound">z</a> <a id="722" class="Symbol">(</a><a id="723" href="Reflection.Utils.Substitute.html#1284" class="Function">substArg</a> <a id="732" href="Tactic.Derive.Convertible.html#694" class="Bound">x</a> <a id="734" href="Tactic.Derive.Convertible.html#696" class="Bound">s</a> <a id="736" href="Tactic.Derive.Convertible.html#705" class="Bound">t</a><a id="737" class="Symbol">)</a> <a id="739" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="741" class="Symbol">(</a><a id="742" href="Tactic.Derive.Convertible.html#633" class="Function">substTel</a> <a id="751" class="Symbol">(</a><a id="752" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">ℕ.suc</a> <a id="758" href="Tactic.Derive.Convertible.html#694" class="Bound">x</a><a id="759" class="Symbol">)</a> <a id="761" href="Tactic.Derive.Convertible.html#696" class="Bound">s</a> <a id="763" href="Tactic.Derive.Convertible.html#709" class="Bound">tel</a><a id="766" class="Symbol">)</a>
    <a id="772" class="Comment">-- Note: `abs` is abused in TyViewTel and doesn&#39;t actually scope over the `t`</a>

  <a id="853" class="Comment">-- Substitute leading level parameters with lzero</a>
  <a id="smashLevels"></a><a id="905" href="Tactic.Derive.Convertible.html#905" class="Function">smashLevels</a> <a id="917" class="Symbol">:</a> <a id="919" href="Tactic.Derive.Convertible.html#596" class="Function">TyViewTel</a> <a id="929" class="Symbol">→</a> <a id="931" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a> <a id="933" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="935" href="Tactic.Derive.Convertible.html#596" class="Function">TyViewTel</a>
  <a id="947" href="Tactic.Derive.Convertible.html#905" class="Function">smashLevels</a> <a id="959" class="Symbol">(</a><a id="960" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="964" href="Tactic.Derive.Convertible.html#964" class="Bound">s</a> <a id="966" class="Symbol">(</a><a id="967" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="971" href="Tactic.Derive.Convertible.html#971" class="Bound">i</a> <a id="973" class="Symbol">(</a><a id="974" href="Agda.Builtin.Reflection.html#5251" class="InductiveConstructor">def</a> <a id="978" class="Symbol">(</a><a id="979" class="Keyword">quote</a> <a id="985" href="Agda.Primitive.html#742" class="Postulate">Level</a><a id="990" class="Symbol">)</a> <a id="992" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="994" class="Symbol">))</a> <a id="997" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="999" href="Tactic.Derive.Convertible.html#999" class="Bound">tel</a><a id="1002" class="Symbol">)</a> <a id="1004" class="Symbol">=</a>
    <a id="1010" href="Class.Bifunctor.html#951" class="Field">bimap</a> <a id="1016" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">ℕ.suc</a> <a id="1022" class="Symbol">(</a><a id="1023" href="Tactic.Derive.Convertible.html#633" class="Function">substTel</a> <a id="1032" class="Number">0</a> <a id="1034" class="Symbol">(</a><a id="1035" class="Keyword">quote</a> <a id="1041" href="Level.html#521" class="Function">0ℓ</a> <a id="1044" href="Reflection.Syntax.html#2900" class="InductiveConstructor Operator">∙</a><a id="1045" class="Symbol">))</a> <a id="1048" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1050" href="Tactic.Derive.Convertible.html#905" class="Function">smashLevels</a> <a id="1062" href="Tactic.Derive.Convertible.html#999" class="Bound">tel</a>
  <a id="1068" href="Tactic.Derive.Convertible.html#905" class="CatchallClause Function">smashLevels</a><a id="1079" class="CatchallClause"> </a><a id="1080" href="Tactic.Derive.Convertible.html#1080" class="CatchallClause Bound">tel</a> <a id="1084" class="Symbol">=</a> <a id="1086" class="Symbol">(</a><a id="1087" class="Number">0</a> <a id="1089" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1091" href="Tactic.Derive.Convertible.html#1080" class="Bound">tel</a><a id="1094" class="Symbol">)</a>

  <a id="tyViewToTel"></a><a id="1099" href="Tactic.Derive.Convertible.html#1099" class="Function">tyViewToTel</a> <a id="1111" class="Symbol">:</a> <a id="1113" href="Tactic.Derive.Convertible.html#596" class="Function">TyViewTel</a> <a id="1123" class="Symbol">→</a> <a id="1125" href="Reflection.AST.Term.html#2011" class="Function">Telescope</a>
  <a id="1137" href="Tactic.Derive.Convertible.html#1099" class="Function">tyViewToTel</a> <a id="1149" class="Symbol">=</a> <a id="1151" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="1157" class="Symbol">λ</a> <a id="1159" class="Keyword">where</a> <a id="1165" class="Symbol">(</a><a id="1166" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1170" href="Tactic.Derive.Convertible.html#1170" class="Bound">s</a> <a id="1172" href="Tactic.Derive.Convertible.html#1172" class="Bound">a</a><a id="1173" class="Symbol">)</a> <a id="1175" class="Symbol">→</a> <a id="1177" href="Tactic.Derive.Convertible.html#1170" class="Bound">s</a> <a id="1179" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1181" href="Tactic.Derive.Convertible.html#1172" class="Bound">a</a>

  <a id="hideTyView"></a><a id="1186" href="Tactic.Derive.Convertible.html#1186" class="Function">hideTyView</a> <a id="1197" class="Symbol">:</a> <a id="1199" href="Agda.Builtin.Reflection.html#4249" class="Datatype">Abs</a> <a id="1203" class="Symbol">(</a><a id="1204" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="1208" href="Meta.Prelude.html#1418" class="Generalizable">A</a><a id="1209" class="Symbol">)</a> <a id="1211" class="Symbol">→</a> <a id="1213" href="Agda.Builtin.Reflection.html#4249" class="Datatype">Abs</a> <a id="1217" class="Symbol">(</a><a id="1218" href="Agda.Builtin.Reflection.html#3696" class="Datatype">Arg</a> <a id="1222" href="Meta.Prelude.html#1418" class="Generalizable">A</a><a id="1223" class="Symbol">)</a>
  <a id="1227" href="Tactic.Derive.Convertible.html#1186" class="Function">hideTyView</a> <a id="1238" class="Symbol">(</a><a id="1239" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1243" href="Tactic.Derive.Convertible.html#1243" class="Bound">s</a> <a id="1245" class="Symbol">(</a><a id="1246" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="1250" class="Symbol">(</a><a id="1251" href="Agda.Builtin.Reflection.html#3637" class="InductiveConstructor">arg-info</a> <a id="1260" class="Symbol">_</a> <a id="1262" href="Tactic.Derive.Convertible.html#1262" class="Bound">m</a><a id="1263" class="Symbol">)</a> <a id="1265" href="Tactic.Derive.Convertible.html#1265" class="Bound">x</a><a id="1266" class="Symbol">))</a> <a id="1269" class="Symbol">=</a> <a id="1271" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="1275" href="Tactic.Derive.Convertible.html#1243" class="Bound">s</a> <a id="1277" class="Symbol">(</a><a id="1278" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="1282" class="Symbol">(</a><a id="1283" href="Agda.Builtin.Reflection.html#3637" class="InductiveConstructor">arg-info</a> <a id="1292" href="Agda.Builtin.Reflection.html#2770" class="InductiveConstructor">hidden</a> <a id="1299" href="Tactic.Derive.Convertible.html#1262" class="Bound">m</a><a id="1300" class="Symbol">)</a> <a id="1302" href="Tactic.Derive.Convertible.html#1265" class="Bound">x</a><a id="1303" class="Symbol">)</a>

  <a id="1308" class="Comment">-- The type of a Convertible instance. For parameterised types adds the appropriate instance</a>
  <a id="1403" class="Comment">-- arguments and instantiates level arguments to lzero. For instance,</a>
  <a id="1475" class="Comment">-- instanceType _⊎_ Hs.Either = {A B : Set} {a b : Set} → ⦃ Convertible A a ⦄ → ⦃ Convertible B b ⦄</a>
  <a id="1577" class="Comment">--                              Convertible (A ⊎ B) (Hs.Either a b)</a>
  <a id="instanceType"></a><a id="1647" href="Tactic.Derive.Convertible.html#1647" class="Function">instanceType</a> <a id="1660" class="Symbol">:</a> <a id="1662" class="Symbol">(</a><a id="1663" href="Tactic.Derive.Convertible.html#1663" class="Bound">agdaName</a> <a id="1672" href="Tactic.Derive.Convertible.html#1672" class="Bound">hsName</a> <a id="1679" class="Symbol">:</a> <a id="1681" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="1685" class="Symbol">)</a> <a id="1687" class="Symbol">→</a> <a id="1689" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="1692" href="Reflection.Utils.Core.html#536" class="Function">TypeView</a>
  <a id="1703" href="Tactic.Derive.Convertible.html#1647" class="Function">instanceType</a> <a id="1716" href="Tactic.Derive.Convertible.html#1716" class="Bound">agdaName</a> <a id="1725" href="Tactic.Derive.Convertible.html#1725" class="Bound">hsName</a> <a id="1732" class="Symbol">=</a> <a id="1734" class="Keyword">do</a>
    <a id="1741" href="Tactic.Derive.Convertible.html#1741" class="Bound">aLvls</a> <a id="1747" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1749" href="Tactic.Derive.Convertible.html#1749" class="Bound">agdaParams</a> <a id="1760" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="1762" href="Tactic.Derive.Convertible.html#905" class="Function">smashLevels</a> <a id="1774" href="Class.Functor.Core.html#233" class="Field Operator">&lt;$&gt;</a> <a id="1778" href="Reflection.Utils.TCI.html#7802" class="Function">getParamsAndIndices</a> <a id="1798" href="Tactic.Derive.Convertible.html#1716" class="Bound">agdaName</a>
    <a id="1811" href="Tactic.Derive.Convertible.html#1811" class="Bound">hLvls</a> <a id="1817" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1819" href="Tactic.Derive.Convertible.html#1819" class="Bound">hsParams</a>   <a id="1830" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="1832" href="Tactic.Derive.Convertible.html#905" class="Function">smashLevels</a> <a id="1844" href="Class.Functor.Core.html#233" class="Field Operator">&lt;$&gt;</a> <a id="1848" href="Reflection.Utils.TCI.html#7802" class="Function">getParamsAndIndices</a> <a id="1868" href="Tactic.Derive.Convertible.html#1725" class="Bound">hsName</a>
    <a id="1879" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="1884" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="1886" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="1893" class="Symbol">(</a><a id="1894" href="Data.List.Base.html#5044" class="Function">length</a> <a id="1901" href="Tactic.Derive.Convertible.html#1749" class="Bound">agdaParams</a> <a id="1912" href="Class.DecEq.Core.html#188" class="Function Operator">==</a> <a id="1915" href="Data.List.Base.html#5044" class="Function">length</a> <a id="1922" href="Tactic.Derive.Convertible.html#1819" class="Bound">hsParams</a><a id="1930" class="Symbol">)</a>
      <a id="1938" class="Keyword">where</a> <a id="1944" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="1950" class="Symbol">→</a> <a id="1952" href="Reflection.TCI.html#1835" class="Function">liftTC</a> <a id="1959" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1961" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="1976" class="String">&quot;%q and %q have different number of parameters&quot;</a> <a id="2024" href="Tactic.Derive.Convertible.html#1716" class="Bound">agdaName</a> <a id="2033" href="Tactic.Derive.Convertible.html#1725" class="Bound">hsName</a>
    <a id="2044" class="Keyword">let</a> <a id="2048" href="Tactic.Derive.Convertible.html#2048" class="Bound">n</a> <a id="2050" class="Symbol">=</a> <a id="2052" href="Data.List.Base.html#5044" class="Function">length</a> <a id="2059" href="Tactic.Derive.Convertible.html#1749" class="Bound">agdaParams</a>
        <a id="2078" href="Tactic.Derive.Convertible.html#2078" class="Bound">l₀</a> <a id="2081" class="Symbol">=</a> <a id="2083" class="Keyword">quote</a> <a id="2089" href="Level.html#521" class="Function">0ℓ</a> <a id="2092" href="Reflection.Syntax.html#2900" class="InductiveConstructor Operator">∙</a>
    <a id="2098" href="Tactic.Derive.Convertible.html#2098" class="Bound">agdaTy</a> <a id="2105" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="2107" href="Reflection.Utils.TCI.html#9148" class="Function">applyWithVisibility</a> <a id="2127" href="Tactic.Derive.Convertible.html#1716" class="Bound">agdaName</a> <a id="2136" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2138" href="Data.List.Base.html#5319" class="Function">L.replicate</a> <a id="2150" href="Tactic.Derive.Convertible.html#1741" class="Bound">aLvls</a> <a id="2156" href="Tactic.Derive.Convertible.html#2078" class="Bound">l₀</a> <a id="2159" href="Data.List.Base.html#1734" class="Function Operator">++</a> <a id="2162" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="2168" href="Reflection.Syntax.html#1453" class="InductiveConstructor">♯</a> <a id="2170" class="Symbol">(</a><a id="2171" href="Data.List.Base.html#8687" class="Function">take</a> <a id="2176" href="Tactic.Derive.Convertible.html#2048" class="Bound">n</a> <a id="2178" class="Symbol">(</a><a id="2179" href="Data.List.Base.html#6728" class="Function">downFrom</a> <a id="2188" class="Symbol">(</a><a id="2189" href="Tactic.Derive.Convertible.html#2048" class="Bound">n</a> <a id="2191" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="2193" href="Tactic.Derive.Convertible.html#2048" class="Bound">n</a><a id="2194" class="Symbol">)))</a>
    <a id="2202" href="Tactic.Derive.Convertible.html#2202" class="Bound">hsTy</a>   <a id="2209" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="2211" href="Reflection.Utils.TCI.html#9148" class="Function">applyWithVisibility</a> <a id="2231" href="Tactic.Derive.Convertible.html#1725" class="Bound">hsName</a>   <a id="2240" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2242" href="Data.List.Base.html#5319" class="Function">L.replicate</a> <a id="2254" href="Tactic.Derive.Convertible.html#1811" class="Bound">hLvls</a> <a id="2260" href="Tactic.Derive.Convertible.html#2078" class="Bound">l₀</a> <a id="2263" href="Data.List.Base.html#1734" class="Function Operator">++</a> <a id="2266" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="2272" href="Reflection.Syntax.html#1453" class="InductiveConstructor">♯</a> <a id="2274" class="Symbol">(</a><a id="2275" href="Data.List.Base.html#6728" class="Function">downFrom</a> <a id="2284" href="Tactic.Derive.Convertible.html#2048" class="Bound">n</a><a id="2285" class="Symbol">)</a>
    <a id="2291" class="Keyword">let</a> <a id="2295" href="Tactic.Derive.Convertible.html#2295" class="Bound">instHead</a> <a id="2304" class="Symbol">=</a> <a id="2306" href="Reflection.AST.DeBruijn.html#1479" class="Function">weaken</a> <a id="2313" href="Tactic.Derive.Convertible.html#2048" class="Bound">n</a> <a id="2315" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2317" class="Keyword">quote</a> <a id="2323" href="Class.Convertible.Core.html#149" class="Record">Convertible</a> <a id="2335" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">∙⟦</a> <a id="2338" href="Tactic.Derive.Convertible.html#2098" class="Bound">agdaTy</a> <a id="2345" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">∣</a> <a id="2347" href="Tactic.Derive.Convertible.html#2202" class="Bound">hsTy</a> <a id="2352" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">⟧</a>
        <a id="2362" href="Tactic.Derive.Convertible.html#2362" class="Bound">tel</a>      <a id="2371" class="Symbol">=</a> <a id="2373" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="2379" href="Tactic.Derive.Convertible.html#1186" class="Function">hideTyView</a> <a id="2390" class="Symbol">(</a><a id="2391" href="Tactic.Derive.Convertible.html#1749" class="Bound">agdaParams</a> <a id="2402" href="Data.List.Base.html#1734" class="Function Operator">++</a> <a id="2405" href="Tactic.Derive.Convertible.html#1819" class="Bound">hsParams</a><a id="2413" class="Symbol">)</a> <a id="2415" href="Data.List.Base.html#1734" class="Function Operator">++</a>
                   <a id="2437" href="Data.List.Base.html#5319" class="Function">L.replicate</a> <a id="2449" href="Tactic.Derive.Convertible.html#2048" class="Bound">n</a> <a id="2451" class="Symbol">(</a><a id="2452" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="2456" class="String">&quot;_&quot;</a> <a id="2460" class="Symbol">(</a><a id="2461" href="Reflection.AST.Argument.html#1453" class="InductiveConstructor">iArg</a> <a id="2466" class="Symbol">(</a><a id="2467" class="Keyword">quote</a> <a id="2473" href="Class.Convertible.Core.html#149" class="Record">Convertible</a> <a id="2485" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">∙⟦</a> <a id="2488" href="Reflection.Syntax.html#1453" class="InductiveConstructor">♯</a> <a id="2490" class="Symbol">(</a><a id="2491" href="Tactic.Derive.Convertible.html#2048" class="Bound">n</a> <a id="2493" href="Agda.Builtin.Nat.html#336" class="Primitive Operator">+</a> <a id="2495" href="Tactic.Derive.Convertible.html#2048" class="Bound">n</a> <a id="2497" href="Data.Nat.Base.html#4456" class="Primitive Operator">∸</a> <a id="2499" class="Number">1</a><a id="2500" class="Symbol">)</a> <a id="2502" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">∣</a> <a id="2504" href="Reflection.Syntax.html#1453" class="InductiveConstructor">♯</a> <a id="2506" class="Symbol">(</a><a id="2507" href="Tactic.Derive.Convertible.html#2048" class="Bound">n</a> <a id="2509" href="Data.Nat.Base.html#4456" class="Primitive Operator">∸</a> <a id="2511" class="Number">1</a><a id="2512" class="Symbol">)</a> <a id="2514" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">⟧</a><a id="2515" class="Symbol">)))</a>
    <a id="2523" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="2530" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2532" href="Tactic.Derive.Convertible.html#2362" class="Bound">tel</a> <a id="2536" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2538" href="Tactic.Derive.Convertible.html#2295" class="Bound">instHead</a>

  <a id="2550" class="Comment">-- Compute one clause of the Convertible instance. For instance,</a>
  <a id="2617" class="Comment">-- conversionClause Convertible.to to ((c₁ , _) , (c₂ , _)) generates</a>
  <a id="2689" class="Comment">-- .to (c₁ x₁ .. xn) = c₂ (to x₁) .. (to xn)</a>
  <a id="2736" class="Comment">-- where the xi are the visible constructor arguments.</a>
  <a id="conversionClause"></a><a id="2793" href="Tactic.Derive.Convertible.html#2793" class="Function">conversionClause</a> <a id="2810" class="Symbol">:</a> <a id="2812" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2817" class="Symbol">→</a> <a id="2819" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2824" class="Symbol">→</a> <a id="2826" class="Symbol">(</a><a id="2827" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2832" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2834" href="Agda.Builtin.Reflection.html#5064" class="Function">Type</a><a id="2838" class="Symbol">)</a> <a id="2840" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2842" class="Symbol">(</a><a id="2843" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="2848" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="2850" href="Agda.Builtin.Reflection.html#5064" class="Function">Type</a><a id="2854" class="Symbol">)</a> <a id="2856" class="Symbol">→</a> <a id="2858" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="2861" href="Agda.Builtin.Reflection.html#5050" class="Datatype">Clause</a>
  <a id="2870" href="Tactic.Derive.Convertible.html#2793" class="Function">conversionClause</a> <a id="2887" href="Tactic.Derive.Convertible.html#2887" class="Bound">prjP</a> <a id="2892" href="Tactic.Derive.Convertible.html#2892" class="Bound">prjE</a> <a id="2897" class="Symbol">((</a><a id="2899" href="Tactic.Derive.Convertible.html#2899" class="Bound">fromC</a> <a id="2905" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2907" href="Tactic.Derive.Convertible.html#2907" class="Bound">fromTy</a><a id="2913" class="Symbol">)</a> <a id="2915" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2917" class="Symbol">(</a><a id="2918" href="Tactic.Derive.Convertible.html#2918" class="Bound">toC</a> <a id="2922" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2924" href="Tactic.Derive.Convertible.html#2924" class="Bound">toTy</a><a id="2928" class="Symbol">))</a> <a id="2931" class="Symbol">=</a> <a id="2933" class="Keyword">do</a>
    <a id="2940" class="Keyword">let</a> <a id="2944" href="Tactic.Derive.Convertible.html#2944" class="Bound">isVis</a>   <a id="2952" class="Symbol">=</a> <a id="2954" class="Symbol">λ</a> <a id="2956" class="Symbol">{</a> <a id="2958" class="Symbol">(</a><a id="2959" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="2963" class="Symbol">_</a> <a id="2965" class="Symbol">(</a><a id="2966" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="2970" class="Symbol">(</a><a id="2971" href="Agda.Builtin.Reflection.html#3637" class="InductiveConstructor">arg-info</a> <a id="2980" href="Agda.Builtin.Reflection.html#2762" class="InductiveConstructor">visible</a> <a id="2988" class="Symbol">_)</a> <a id="2991" class="Symbol">_))</a> <a id="2995" class="Symbol">→</a> <a id="2997" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="3001" class="Symbol">;</a> <a id="3003" class="CatchallClause Symbol">_</a> <a id="3005" class="Symbol">→</a> <a id="3007" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="3013" class="Symbol">}</a>
        <a id="3023" href="Tactic.Derive.Convertible.html#3023" class="Bound">fromTel</a> <a id="3031" class="Symbol">=</a> <a id="3033" href="Data.List.Base.html#10858" class="Function">L.filterᵇ</a> <a id="3043" href="Tactic.Derive.Convertible.html#2944" class="Bound">isVis</a> <a id="3049" class="Symbol">(</a><a id="3050" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3056" class="Symbol">(</a><a id="3057" href="Reflection.Utils.Core.html#577" class="Function">viewTy</a> <a id="3064" href="Tactic.Derive.Convertible.html#2907" class="Bound">fromTy</a><a id="3070" class="Symbol">))</a>
        <a id="3081" href="Tactic.Derive.Convertible.html#3081" class="Bound">toTel</a>   <a id="3089" class="Symbol">=</a> <a id="3091" href="Data.List.Base.html#10858" class="Function">L.filterᵇ</a> <a id="3101" href="Tactic.Derive.Convertible.html#2944" class="Bound">isVis</a> <a id="3107" class="Symbol">(</a><a id="3108" href="Data.Product.Base.html#636" class="Field">proj₁</a> <a id="3114" class="Symbol">(</a><a id="3115" href="Reflection.Utils.Core.html#577" class="Function">viewTy</a> <a id="3122" href="Tactic.Derive.Convertible.html#2924" class="Bound">toTy</a><a id="3126" class="Symbol">))</a>
        <a id="3137" href="Tactic.Derive.Convertible.html#3137" class="Bound">n</a>       <a id="3145" class="Symbol">=</a> <a id="3147" href="Data.List.Base.html#5044" class="Function">length</a> <a id="3154" href="Tactic.Derive.Convertible.html#3023" class="Bound">fromTel</a>
        <a id="3170" href="Tactic.Derive.Convertible.html#3170" class="Bound">mkCon</a>  <a id="3177" href="Tactic.Derive.Convertible.html#3177" class="Bound">c</a> <a id="3179" href="Tactic.Derive.Convertible.html#3179" class="Bound">mkArg</a> <a id="3185" class="Symbol">=</a> <a id="3187" href="Agda.Builtin.Reflection.html#5194" class="InductiveConstructor">Term.con</a> <a id="3196" href="Tactic.Derive.Convertible.html#3177" class="Bound">c</a>    <a id="3201" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3203" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="3209" class="Symbol">(</a><a id="3210" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="3215" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3217" href="Tactic.Derive.Convertible.html#3179" class="Bound">mkArg</a> <a id="3223" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3225" href="Reflection.Syntax.html#1453" class="InductiveConstructor">♯</a><a id="3226" class="Symbol">)</a>  <a id="3229" class="Symbol">(</a><a id="3230" href="Data.List.Base.html#6728" class="Function">downFrom</a> <a id="3239" href="Tactic.Derive.Convertible.html#3137" class="Bound">n</a><a id="3240" class="Symbol">)</a>
        <a id="3250" href="Tactic.Derive.Convertible.html#3250" class="Bound">mkConP</a> <a id="3257" href="Tactic.Derive.Convertible.html#3257" class="Bound">c</a> <a id="3259" href="Tactic.Derive.Convertible.html#3259" class="Bound">mkArg</a> <a id="3265" class="Symbol">=</a> <a id="3267" href="Agda.Builtin.Reflection.html#5814" class="InductiveConstructor">Pattern.con</a> <a id="3279" href="Tactic.Derive.Convertible.html#3257" class="Bound">c</a> <a id="3281" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3283" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="3289" class="Symbol">(</a><a id="3290" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="3295" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3297" href="Tactic.Derive.Convertible.html#3259" class="Bound">mkArg</a> <a id="3303" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3305" href="Reflection.Syntax.html#1582" class="InductiveConstructor Operator">`_</a><a id="3307" class="Symbol">)</a> <a id="3309" class="Symbol">(</a><a id="3310" href="Data.List.Base.html#6728" class="Function">downFrom</a> <a id="3319" href="Tactic.Derive.Convertible.html#3137" class="Bound">n</a><a id="3320" class="Symbol">)</a>
    <a id="3326" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="3331" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="3333" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="3340" class="Symbol">(</a><a id="3341" href="Tactic.Derive.Convertible.html#3137" class="Bound">n</a> <a id="3343" href="Class.DecEq.Core.html#188" class="Function Operator">==</a> <a id="3346" href="Data.List.Base.html#5044" class="Function">length</a> <a id="3353" href="Tactic.Derive.Convertible.html#3081" class="Bound">toTel</a><a id="3358" class="Symbol">)</a>
      <a id="3366" class="Keyword">where</a> <a id="3372" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="3378" class="Symbol">→</a> <a id="3380" href="Reflection.TCI.html#1835" class="Function">liftTC</a> <a id="3387" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3389" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="3404" class="String">&quot;%q and %q have different number of arguments&quot;</a> <a id="3451" href="Tactic.Derive.Convertible.html#2899" class="Bound">fromC</a> <a id="3457" href="Tactic.Derive.Convertible.html#2918" class="Bound">toC</a>
    <a id="3465" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="3472" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3474" href="Agda.Builtin.Reflection.html#6106" class="InductiveConstructor">clause</a> <a id="3481" class="Symbol">(</a><a id="3482" href="Tactic.Derive.Convertible.html#1099" class="Function">tyViewToTel</a> <a id="3494" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3496" href="Data.List.Base.html#1634" class="Function">L.map</a> <a id="3502" class="Symbol">(λ</a> <a id="3505" class="Keyword">where</a> <a id="3511" class="Symbol">(</a><a id="3512" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="3516" href="Tactic.Derive.Convertible.html#3516" class="Bound">x</a> <a id="3518" class="Symbol">(</a><a id="3519" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="3523" href="Tactic.Derive.Convertible.html#3523" class="Bound">i</a> <a id="3525" class="Symbol">_))</a> <a id="3529" class="Symbol">→</a> <a id="3531" href="Agda.Builtin.Reflection.html#4285" class="InductiveConstructor">abs</a> <a id="3535" href="Tactic.Derive.Convertible.html#3516" class="Bound">x</a> <a id="3537" class="Symbol">(</a><a id="3538" href="Agda.Builtin.Reflection.html#3732" class="InductiveConstructor">arg</a> <a id="3542" href="Tactic.Derive.Convertible.html#3523" class="Bound">i</a> <a id="3544" href="Agda.Builtin.Reflection.html#5594" class="InductiveConstructor">unknown</a><a id="3551" class="Symbol">))</a> <a id="3554" href="Tactic.Derive.Convertible.html#3023" class="Bound">fromTel</a><a id="3561" class="Symbol">)</a>
                    <a id="3583" class="Symbol">(</a><a id="3584" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="3589" class="Symbol">(</a><a id="3590" href="Agda.Builtin.Reflection.html#5977" class="InductiveConstructor">proj</a> <a id="3595" href="Tactic.Derive.Convertible.html#2887" class="Bound">prjP</a><a id="3599" class="Symbol">)</a> <a id="3601" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3603" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="3608" class="Symbol">(</a><a id="3609" href="Tactic.Derive.Convertible.html#3250" class="Bound">mkConP</a> <a id="3616" href="Tactic.Derive.Convertible.html#2899" class="Bound">fromC</a> <a id="3622" href="Function.Base.html#704" class="Function">id</a><a id="3624" class="Symbol">)</a> <a id="3626" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3628" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="3630" class="Symbol">)</a>
                    <a id="3652" class="Symbol">(</a><a id="3653" href="Tactic.Derive.Convertible.html#3170" class="Bound">mkCon</a> <a id="3659" href="Tactic.Derive.Convertible.html#2918" class="Bound">toC</a> <a id="3663" class="Symbol">(</a><a id="3664" href="Tactic.Derive.Convertible.html#2892" class="Bound">prjE</a> <a id="3669" href="Reflection.Syntax.html#2924" class="InductiveConstructor Operator">∙⟦_⟧</a><a id="3673" class="Symbol">))</a>

  <a id="3679" class="Comment">-- Compute the clauses of a convertible instance.</a>
  <a id="instanceClauses"></a><a id="3731" href="Tactic.Derive.Convertible.html#3731" class="Function">instanceClauses</a> <a id="3747" class="Symbol">:</a> <a id="3749" class="Symbol">(</a><a id="3750" href="Tactic.Derive.Convertible.html#3750" class="Bound">agdaName</a> <a id="3759" href="Tactic.Derive.Convertible.html#3759" class="Bound">hsName</a> <a id="3766" class="Symbol">:</a> <a id="3768" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a><a id="3772" class="Symbol">)</a> <a id="3774" class="Symbol">→</a> <a id="3776" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="3779" class="Symbol">(</a><a id="3780" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3785" href="Agda.Builtin.Reflection.html#5050" class="Datatype">Clause</a><a id="3791" class="Symbol">)</a>
  <a id="3795" href="Tactic.Derive.Convertible.html#3731" class="Function">instanceClauses</a> <a id="3811" href="Tactic.Derive.Convertible.html#3811" class="Bound">agdaName</a> <a id="3820" href="Tactic.Derive.Convertible.html#3820" class="Bound">hsName</a> <a id="3827" class="Symbol">=</a> <a id="3829" class="Keyword">do</a>
    <a id="3836" href="Tactic.Derive.Convertible.html#3836" class="Bound">agdaCons</a> <a id="3845" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="3847" href="Class.MonadTC.html#12066" class="Function">getConstrs</a> <a id="3858" href="Tactic.Derive.Convertible.html#3811" class="Bound">agdaName</a>
    <a id="3871" href="Tactic.Derive.Convertible.html#3871" class="Bound">hsCons</a>   <a id="3880" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="3882" href="Class.MonadTC.html#12066" class="Function">getConstrs</a> <a id="3893" href="Tactic.Derive.Convertible.html#3820" class="Bound">hsName</a>
    <a id="3904" href="Tactic.Derive.Convertible.html#3904" class="Bound">agdaPars</a> <a id="3913" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="3915" href="Data.List.Base.html#5044" class="Function">length</a> <a id="3922" href="Class.Functor.Core.html#233" class="Field Operator">&lt;$&gt;</a> <a id="3926" href="Reflection.Utils.TCI.html#7802" class="Function">getParamsAndIndices</a> <a id="3946" href="Tactic.Derive.Convertible.html#3811" class="Bound">agdaName</a>
    <a id="3959" href="Tactic.Derive.Convertible.html#3959" class="Bound">hsPars</a>   <a id="3968" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="3970" href="Data.List.Base.html#5044" class="Function">length</a> <a id="3977" href="Class.Functor.Core.html#233" class="Field Operator">&lt;$&gt;</a> <a id="3981" href="Reflection.Utils.TCI.html#7802" class="Function">getParamsAndIndices</a> <a id="4001" href="Tactic.Derive.Convertible.html#3820" class="Bound">hsName</a>
    <a id="4012" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a> <a id="4017" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4019" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="4026" class="Symbol">(</a><a id="4027" href="Data.List.Base.html#5044" class="Function">length</a> <a id="4034" href="Tactic.Derive.Convertible.html#3836" class="Bound">agdaCons</a> <a id="4043" href="Class.DecEq.Core.html#188" class="Function Operator">==</a> <a id="4046" href="Data.List.Base.html#5044" class="Function">length</a> <a id="4053" href="Tactic.Derive.Convertible.html#3871" class="Bound">hsCons</a><a id="4059" class="Symbol">)</a>
      <a id="4067" class="Keyword">where</a> <a id="4073" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a> <a id="4079" class="Symbol">→</a> <a id="4081" href="Reflection.TCI.html#1835" class="Function">liftTC</a> <a id="4088" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4090" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="4105" class="String">&quot;%q and %q have different number of constructors&quot;</a> <a id="4155" href="Tactic.Derive.Convertible.html#3811" class="Bound">agdaName</a> <a id="4164" href="Tactic.Derive.Convertible.html#3820" class="Bound">hsName</a>
    <a id="4175" href="Tactic.Derive.Convertible.html#4175" class="Bound">toClauses</a>   <a id="4187" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4189" href="Class.Monad.Core.html#713" class="Function">mapM</a> <a id="4194" class="Symbol">(</a><a id="4195" href="Tactic.Derive.Convertible.html#2793" class="Function">conversionClause</a> <a id="4212" class="Symbol">(</a><a id="4213" class="Keyword">quote</a> <a id="4219" href="Class.Convertible.Core.html#193" class="Field">Convertible.to</a><a id="4233" class="Symbol">)</a>   <a id="4237" class="Symbol">(</a><a id="4238" class="Keyword">quote</a> <a id="4244" href="Class.Convertible.Core.html#193" class="Field">to</a><a id="4246" class="Symbol">)</a>  <a id="4249" class="Symbol">)</a> <a id="4251" class="Symbol">(</a><a id="4252" href="Data.List.Base.html#3506" class="Function">L.zip</a> <a id="4258" href="Tactic.Derive.Convertible.html#3836" class="Bound">agdaCons</a> <a id="4267" href="Tactic.Derive.Convertible.html#3871" class="Bound">hsCons</a><a id="4273" class="Symbol">)</a>
    <a id="4279" href="Tactic.Derive.Convertible.html#4279" class="Bound">fromClauses</a> <a id="4291" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4293" href="Class.Monad.Core.html#713" class="Function">mapM</a> <a id="4298" class="Symbol">(</a><a id="4299" href="Tactic.Derive.Convertible.html#2793" class="Function">conversionClause</a> <a id="4316" class="Symbol">(</a><a id="4317" class="Keyword">quote</a> <a id="4323" href="Class.Convertible.Core.html#214" class="Field">Convertible.from</a><a id="4339" class="Symbol">)</a> <a id="4341" class="Symbol">(</a><a id="4342" class="Keyword">quote</a> <a id="4348" href="Class.Convertible.Core.html#214" class="Field">from</a><a id="4352" class="Symbol">))</a> <a id="4355" class="Symbol">(</a><a id="4356" href="Data.List.Base.html#3506" class="Function">L.zip</a> <a id="4362" href="Tactic.Derive.Convertible.html#3871" class="Bound">hsCons</a> <a id="4369" href="Tactic.Derive.Convertible.html#3836" class="Bound">agdaCons</a><a id="4377" class="Symbol">)</a>
    <a id="4383" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="4390" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4392" href="Tactic.Derive.Convertible.html#4175" class="Bound">toClauses</a> <a id="4402" href="Data.List.Base.html#1734" class="Function Operator">++</a> <a id="4405" href="Tactic.Derive.Convertible.html#4279" class="Bound">fromClauses</a>

  <a id="absurdClause"></a><a id="4420" href="Tactic.Derive.Convertible.html#4420" class="Function">absurdClause</a> <a id="4433" class="Symbol">:</a> <a id="4435" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="4440" class="Symbol">→</a> <a id="4442" href="Agda.Builtin.Reflection.html#5050" class="Datatype">Clause</a>
  <a id="4451" href="Tactic.Derive.Convertible.html#4420" class="Function">absurdClause</a> <a id="4464" href="Tactic.Derive.Convertible.html#4464" class="Bound">prj</a> <a id="4468" class="Symbol">=</a> <a id="4470" href="Agda.Builtin.Reflection.html#6188" class="InductiveConstructor">absurd-clause</a> <a id="4484" class="Symbol">((</a><a id="4486" class="String">&quot;x&quot;</a> <a id="4490" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4492" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="4497" href="Agda.Builtin.Reflection.html#5594" class="InductiveConstructor">unknown</a><a id="4504" class="Symbol">)</a> <a id="4506" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4508" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="4510" class="Symbol">)</a> <a id="4512" class="Symbol">(</a><a id="4513" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="4518" class="Symbol">(</a><a id="4519" href="Agda.Builtin.Reflection.html#5977" class="InductiveConstructor">proj</a> <a id="4524" href="Tactic.Derive.Convertible.html#4464" class="Bound">prj</a><a id="4527" class="Symbol">)</a> <a id="4529" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4531" href="Reflection.AST.Argument.html#1329" class="InductiveConstructor">vArg</a> <a id="4536" class="Symbol">(</a><a id="4537" href="Agda.Builtin.Reflection.html#6012" class="InductiveConstructor">absurd</a> <a id="4544" class="Number">0</a><a id="4545" class="Symbol">)</a> <a id="4547" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4549" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="4551" class="Symbol">)</a>

  <a id="4556" class="Comment">-- Compute conversion clauses for the current goal and wrap them in a pattern lambda.</a>
  <a id="patternLambda"></a><a id="4644" href="Tactic.Derive.Convertible.html#4644" class="Function">patternLambda</a> <a id="4658" class="Symbol">:</a> <a id="4660" href="Reflection.TCI.html#554" class="Function">TC</a> <a id="4663" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
  <a id="4670" href="Tactic.Derive.Convertible.html#4644" class="Function">patternLambda</a> <a id="4684" class="Symbol">=</a> <a id="4686" class="Keyword">do</a>
    <a id="4693" class="Keyword">quote</a> <a id="4699" href="Class.Convertible.Core.html#149" class="Record">Convertible</a> <a id="4711" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">∙⟦</a> <a id="4714" href="Tactic.Derive.Convertible.html#4714" class="Bound">`A</a> <a id="4717" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">∣</a> <a id="4719" href="Tactic.Derive.Convertible.html#4719" class="Bound">`B</a> <a id="4722" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">⟧</a> <a id="4724" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4726" href="Class.MonadTC.html#1854" class="Field">reduce</a> <a id="4733" href="Class.Monad.Core.html#379" class="Function Operator">=&lt;&lt;</a> <a id="4737" href="Class.MonadTC.html#11576" class="Function">goalTy</a>
      <a id="4750" class="Keyword">where</a> <a id="4756" href="Tactic.Derive.Convertible.html#4756" class="CatchallClause Bound">t</a> <a id="4758" class="Symbol">→</a> <a id="4760" href="Reflection.TCI.html#1835" class="Function">liftTC</a> <a id="4767" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4769" href="Reflection.TCM.Format.html#2592" class="Function">R.typeErrorFmt</a> <a id="4784" class="String">&quot;Expected Convertible A B, got %t&quot;</a> <a id="4819" href="Tactic.Derive.Convertible.html#4756" class="Bound">t</a>
    <a id="4825" href="Tactic.Derive.Convertible.html#4825" class="Bound">agdaCons</a> <a id="4834" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4836" href="Class.MonadTC.html#12418" class="Function">getConstrsForType</a> <a id="4854" href="Tactic.Derive.Convertible.html#4714" class="Bound">`A</a>
    <a id="4861" href="Tactic.Derive.Convertible.html#4861" class="Bound">hsCons</a>   <a id="4870" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4872" href="Class.MonadTC.html#12418" class="Function">getConstrsForType</a> <a id="4890" href="Tactic.Derive.Convertible.html#4719" class="Bound">`B</a>
    <a id="4897" href="Tactic.Derive.Convertible.html#4897" class="Bound">toClauses</a>   <a id="4909" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="4911" href="Class.Monad.Core.html#713" class="Function">mapM</a> <a id="4916" class="Symbol">(</a><a id="4917" href="Tactic.Derive.Convertible.html#2793" class="Function">conversionClause</a> <a id="4934" class="Symbol">(</a><a id="4935" class="Keyword">quote</a> <a id="4941" href="Class.Convertible.Core.html#193" class="Field">Convertible.to</a><a id="4955" class="Symbol">)</a>   <a id="4959" class="Symbol">(</a><a id="4960" class="Keyword">quote</a> <a id="4966" href="Class.Convertible.Core.html#193" class="Field">to</a><a id="4968" class="Symbol">)</a>  <a id="4971" class="Symbol">)</a> <a id="4973" class="Symbol">(</a><a id="4974" href="Data.List.Base.html#3506" class="Function">L.zip</a> <a id="4980" href="Tactic.Derive.Convertible.html#4825" class="Bound">agdaCons</a> <a id="4989" href="Tactic.Derive.Convertible.html#4861" class="Bound">hsCons</a><a id="4995" class="Symbol">)</a>
    <a id="5001" href="Tactic.Derive.Convertible.html#5001" class="Bound">fromClauses</a> <a id="5013" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="5015" href="Class.Monad.Core.html#713" class="Function">mapM</a> <a id="5020" class="Symbol">(</a><a id="5021" href="Tactic.Derive.Convertible.html#2793" class="Function">conversionClause</a> <a id="5038" class="Symbol">(</a><a id="5039" class="Keyword">quote</a> <a id="5045" href="Class.Convertible.Core.html#214" class="Field">Convertible.from</a><a id="5061" class="Symbol">)</a> <a id="5063" class="Symbol">(</a><a id="5064" class="Keyword">quote</a> <a id="5070" href="Class.Convertible.Core.html#214" class="Field">from</a><a id="5074" class="Symbol">))</a> <a id="5077" class="Symbol">(</a><a id="5078" href="Data.List.Base.html#3506" class="Function">L.zip</a> <a id="5084" href="Tactic.Derive.Convertible.html#4861" class="Bound">hsCons</a> <a id="5091" href="Tactic.Derive.Convertible.html#4825" class="Bound">agdaCons</a><a id="5099" class="Symbol">)</a>
    <a id="5105" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="5110" href="Tactic.Derive.Convertible.html#4897" class="Bound">toClauses</a> <a id="5120" href="Data.List.Base.html#1734" class="Function Operator">++</a> <a id="5123" href="Tactic.Derive.Convertible.html#5001" class="Bound">fromClauses</a> <a id="5135" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="5138" class="Symbol">λ</a> <a id="5140" class="Keyword">where</a>
      <a id="5152" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>  <a id="5156" class="Symbol">→</a> <a id="5158" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="5165" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5167" href="Agda.Builtin.Reflection.html#5361" class="InductiveConstructor">pat-lam</a> <a id="5175" class="Symbol">(</a><a id="5176" href="Tactic.Derive.Convertible.html#4420" class="Function">absurdClause</a> <a id="5189" class="Symbol">(</a><a id="5190" class="Keyword">quote</a> <a id="5196" href="Class.Convertible.Core.html#193" class="Field">Convertible.to</a><a id="5210" class="Symbol">)</a> <a id="5212" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5214" href="Tactic.Derive.Convertible.html#4420" class="Function">absurdClause</a> <a id="5227" class="Symbol">(</a><a id="5228" class="Keyword">quote</a> <a id="5234" href="Class.Convertible.Core.html#214" class="Field">Convertible.from</a><a id="5250" class="Symbol">)</a> <a id="5252" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5254" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a><a id="5256" class="Symbol">)</a> <a id="5258" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>
      <a id="5267" href="Tactic.Derive.Convertible.html#5267" class="CatchallClause Bound">cls</a> <a id="5271" class="Symbol">→</a> <a id="5273" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="5280" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="5282" href="Agda.Builtin.Reflection.html#5361" class="InductiveConstructor">pat-lam</a> <a id="5290" href="Tactic.Derive.Convertible.html#5267" class="Bound">cls</a> <a id="5294" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a>

<a id="doPatternLambda"></a><a id="5298" href="Tactic.Derive.Convertible.html#5298" class="Function">doPatternLambda</a> <a id="5314" class="Symbol">:</a> <a id="5316" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a> <a id="5321" class="Symbol">→</a> <a id="5323" href="Agda.Builtin.Reflection.html#8617" class="Postulate">R.TC</a> <a id="5328" href="Agda.Builtin.Reflection.html#4993" class="Datatype">Term</a>
<a id="5333" href="Tactic.Derive.Convertible.html#5298" class="Function">doPatternLambda</a> <a id="5349" href="Tactic.Derive.Convertible.html#5349" class="Bound">hole</a> <a id="5354" class="Symbol">=</a> <a id="5356" href="Tactic.Derive.Convertible.html#4644" class="Function">patternLambda</a> <a id="5370" href="Class.Monad.Core.html#379" class="Function Operator">=&lt;&lt;</a> <a id="5374" href="Class.MonadTC.html#1120" class="Function">initTCEnvWithGoal</a> <a id="5392" href="Tactic.Derive.Convertible.html#5349" class="Bound">hole</a>

<a id="5398" class="Comment">-- Deriving a Convertible instance. Usage</a>
<a id="5440" class="Comment">--   unquoteDecl iName = deriveConvertible iName (quote AgdaTy) (quote HsTy)</a>
<a id="deriveConvertible"></a><a id="5517" href="Tactic.Derive.Convertible.html#5517" class="Function">deriveConvertible</a> <a id="5535" class="Symbol">:</a> <a id="5537" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="5542" class="Symbol">→</a> <a id="5544" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="5549" class="Symbol">→</a> <a id="5551" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="5556" class="Symbol">→</a> <a id="5558" href="Agda.Builtin.Reflection.html#8617" class="Postulate">R.TC</a> <a id="5563" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
<a id="5565" href="Tactic.Derive.Convertible.html#5517" class="Function">deriveConvertible</a> <a id="5583" href="Tactic.Derive.Convertible.html#5583" class="Bound">instName</a> <a id="5592" href="Tactic.Derive.Convertible.html#5592" class="Bound">agdaName</a> <a id="5601" href="Tactic.Derive.Convertible.html#5601" class="Bound">hsName</a> <a id="5608" class="Symbol">=</a> <a id="5610" href="Reflection.Tactic.html#868" class="Function">initUnquoteWithGoal</a> <a id="5630" class="Symbol">⦃</a> <a id="5632" href="Class.MonadTC.html#706" class="Function">defaultTCOptions</a> <a id="5649" class="Symbol">⦄</a> <a id="5651" class="Symbol">(</a><a id="5652" href="Agda.Builtin.Reflection.html#5477" class="InductiveConstructor">agda-sort</a> <a id="5662" class="Symbol">(</a><a id="5663" href="Agda.Builtin.Reflection.html#5660" class="InductiveConstructor">lit</a> <a id="5667" class="Number">0</a><a id="5668" class="Symbol">))</a> <a id="5671" class="Keyword">do</a>
  <a id="5676" href="Tactic.Derive.Convertible.html#5676" class="Bound">agdaDef</a> <a id="5684" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="5686" href="Class.MonadTC.html#2222" class="Field">getDefinition</a> <a id="5700" href="Tactic.Derive.Convertible.html#5592" class="Bound">agdaName</a>
  <a id="5711" href="Tactic.Derive.Convertible.html#5711" class="Bound">hsDef</a>   <a id="5719" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="5721" href="Class.MonadTC.html#2222" class="Field">getDefinition</a> <a id="5735" href="Tactic.Derive.Convertible.html#5601" class="Bound">hsName</a>
  <a id="5744" class="Comment">-- instName ← freshName $ &quot;Convertible&quot; S.++ show hsName</a>
  <a id="5803" href="Tactic.Derive.Convertible.html#5803" class="Bound">instTel</a> <a id="5811" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5813" href="Tactic.Derive.Convertible.html#5813" class="Bound">instTy</a> <a id="5820" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="5822" href="Tactic.Derive.Convertible.html#1647" class="Function">instanceType</a> <a id="5835" href="Tactic.Derive.Convertible.html#5592" class="Bound">agdaName</a> <a id="5844" href="Tactic.Derive.Convertible.html#5601" class="Bound">hsName</a>
  <a id="5853" href="Tactic.Derive.Convertible.html#5853" class="Bound">inst</a>    <a id="5861" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="5863" href="Class.MonadTC.html#2047" class="Field">declareDef</a> <a id="5874" class="Symbol">(</a><a id="5875" href="Reflection.AST.Argument.html#1453" class="InductiveConstructor">iArg</a> <a id="5880" href="Tactic.Derive.Convertible.html#5583" class="Bound">instName</a><a id="5888" class="Symbol">)</a> <a id="5890" class="Symbol">(</a><a id="5891" href="Reflection.Utils.Core.html#693" class="Function">tyView</a> <a id="5898" class="Symbol">(</a><a id="5899" href="Tactic.Derive.Convertible.html#5803" class="Bound">instTel</a> <a id="5907" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5909" href="Tactic.Derive.Convertible.html#5813" class="Bound">instTy</a><a id="5915" class="Symbol">))</a>
  <a id="5920" href="Tactic.Derive.Convertible.html#5920" class="Bound">clauses</a> <a id="5928" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="5930" href="Tactic.Derive.Convertible.html#3731" class="Function">instanceClauses</a> <a id="5946" href="Tactic.Derive.Convertible.html#5592" class="Bound">agdaName</a> <a id="5955" href="Tactic.Derive.Convertible.html#5601" class="Bound">hsName</a>
  <a id="5964" href="Class.MonadTC.html#2137" class="Field">defineFun</a> <a id="5974" href="Tactic.Derive.Convertible.html#5583" class="Bound">instName</a> <a id="5983" href="Tactic.Derive.Convertible.html#5920" class="Bound">clauses</a>
  <a id="5993" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="6000" class="Symbol">_</a>

<a id="6003" class="Comment">-- Macros providing an alternative interface. Usage</a>
<a id="6055" class="Comment">--   iName : ConvertibleType AgdaTy HsTy</a>
<a id="6096" class="Comment">--   iName = autoConvertible</a>
<a id="6125" class="Comment">-- or</a>
<a id="6131" class="Comment">--   iName = autoConvert AgdaTy</a>
<a id="6163" class="Keyword">macro</a>
  <a id="ConvertibleType"></a><a id="6171" href="Tactic.Derive.Convertible.html#6171" class="Function">ConvertibleType</a> <a id="6187" class="Symbol">:</a> <a id="6189" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6194" class="Symbol">→</a> <a id="6196" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6201" class="Symbol">→</a> <a id="6203" href="Reflection.Tactic.html#453" class="Function">Tactic</a>
  <a id="6212" href="Tactic.Derive.Convertible.html#6171" class="Function">ConvertibleType</a> <a id="6228" href="Tactic.Derive.Convertible.html#6228" class="Bound">agdaName</a> <a id="6237" href="Tactic.Derive.Convertible.html#6237" class="Bound">hsName</a> <a id="6244" class="Symbol">=</a> <a id="6246" href="Reflection.Tactic.html#801" class="Function">initTac</a> <a id="6254" class="Symbol">⦃</a> <a id="6256" href="Class.MonadTC.html#706" class="Function">defaultTCOptions</a> <a id="6273" class="Symbol">⦄</a> <a id="6275" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="6281" href="Class.MonadTC.html#12947" class="Function">unifyWithGoal</a> <a id="6295" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6297" href="Reflection.Utils.Core.html#693" class="Function">tyView</a> <a id="6304" href="Class.Monad.Core.html#379" class="Function Operator">=&lt;&lt;</a> <a id="6308" href="Tactic.Derive.Convertible.html#1647" class="Function">instanceType</a> <a id="6321" href="Tactic.Derive.Convertible.html#6228" class="Bound">agdaName</a> <a id="6330" href="Tactic.Derive.Convertible.html#6237" class="Bound">hsName</a>

  <a id="autoConvertible"></a><a id="6340" href="Tactic.Derive.Convertible.html#6340" class="Function">autoConvertible</a> <a id="6356" class="Symbol">:</a> <a id="6358" href="Reflection.Tactic.html#453" class="Function">Tactic</a>
  <a id="6367" href="Tactic.Derive.Convertible.html#6340" class="Function">autoConvertible</a> <a id="6383" class="Symbol">=</a> <a id="6385" href="Reflection.Tactic.html#801" class="Function">initTac</a> <a id="6393" class="Symbol">⦃</a> <a id="6395" href="Class.MonadTC.html#706" class="Function">defaultTCOptions</a> <a id="6412" class="Symbol">⦄</a> <a id="6414" href="Function.Base.html#1974" class="Function Operator">$</a>
    <a id="6420" href="Class.MonadTC.html#12947" class="Function">unifyWithGoal</a> <a id="6434" href="Class.Monad.Core.html#379" class="Function Operator">=&lt;&lt;</a> <a id="6438" href="Tactic.Derive.Convertible.html#4644" class="Function">patternLambda</a>

  <a id="autoConvert"></a><a id="6455" href="Tactic.Derive.Convertible.html#6455" class="Function">autoConvert</a> <a id="6467" class="Symbol">:</a> <a id="6469" href="Agda.Builtin.Reflection.html#488" class="Postulate">Name</a> <a id="6474" class="Symbol">→</a> <a id="6476" href="Reflection.Tactic.html#453" class="Function">Tactic</a>
  <a id="6485" href="Tactic.Derive.Convertible.html#6455" class="Function">autoConvert</a> <a id="6497" href="Tactic.Derive.Convertible.html#6497" class="Bound">d</a> <a id="6499" href="Tactic.Derive.Convertible.html#6499" class="Bound">hole</a> <a id="6504" class="Symbol">=</a> <a id="6506" class="Keyword">do</a>
    <a id="6513" href="Tactic.Derive.Convertible.html#6513" class="Bound">hsTyMeta</a> <a id="6522" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="6524" href="Reflection.TCM.html#1261" class="Function">R.newMeta</a> <a id="6534" href="Tactic.Derive.HsType.html#1367" class="Function">`Set</a>
    <a id="6543" href="Agda.Builtin.Reflection.html#8929" class="Postulate">R.checkType</a> <a id="6555" href="Tactic.Derive.Convertible.html#6499" class="Bound">hole</a> <a id="6560" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6562" class="Keyword">quote</a> <a id="6568" href="Class.Convertible.Core.html#149" class="Record">Convertible</a> <a id="6580" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">∙⟦</a> <a id="6583" href="Tactic.Derive.Convertible.html#6497" class="Bound">d</a> <a id="6585" href="Reflection.Syntax.html#2900" class="InductiveConstructor Operator">∙</a> <a id="6587" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">∣</a> <a id="6589" href="Tactic.Derive.Convertible.html#6513" class="Bound">hsTyMeta</a> <a id="6598" href="Reflection.Syntax.html#2964" class="InductiveConstructor Operator">⟧</a>
    <a id="6604" href="Tactic.Derive.Convertible.html#6604" class="Bound">hsTy</a> <a id="6609" href="Class.Monad.Core.html#290" class="Field Operator">←</a> <a id="6611" href="Tactic.Derive.HsType.html#3614" class="Function">solveHsType</a> <a id="6623" class="Symbol">(</a><a id="6624" href="Tactic.Derive.Convertible.html#6497" class="Bound">d</a> <a id="6626" href="Reflection.Syntax.html#2900" class="InductiveConstructor Operator">∙</a><a id="6627" class="Symbol">)</a>
    <a id="6633" href="Agda.Builtin.Reflection.html#8790" class="Postulate">R.unify</a> <a id="6641" href="Tactic.Derive.Convertible.html#6513" class="Bound">hsTyMeta</a> <a id="6650" href="Tactic.Derive.Convertible.html#6604" class="Bound">hsTy</a>
    <a id="6659" href="Agda.Builtin.Reflection.html#8790" class="Postulate">R.unify</a> <a id="6667" href="Tactic.Derive.Convertible.html#6499" class="Bound">hole</a> <a id="6672" href="Class.Monad.Core.html#379" class="Function Operator">=&lt;&lt;</a> <a id="6676" href="Tactic.Derive.Convertible.html#5298" class="Function">doPatternLambda</a> <a id="6692" href="Tactic.Derive.Convertible.html#6499" class="Bound">hole</a>

<a id="6698" class="Comment">-- Tests</a>

<a id="6708" class="Keyword">private</a>

  <a id="6719" class="Keyword">record</a> <a id="Test"></a><a id="6726" href="Tactic.Derive.Convertible.html#6726" class="Record">Test</a> <a id="6731" class="Symbol">:</a> <a id="6733" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="6737" class="Keyword">where</a>
    <a id="6747" class="Keyword">field</a> <a id="Test.f"></a><a id="6753" href="Tactic.Derive.Convertible.html#6753" class="Field">f</a> <a id="6755" class="Symbol">:</a> <a id="6757" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
          <a id="Test.g"></a><a id="6769" href="Tactic.Derive.Convertible.html#6769" class="Field">g</a> <a id="6771" class="Symbol">:</a> <a id="6773" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="6779" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
          <a id="Test.h"></a><a id="6791" href="Tactic.Derive.Convertible.html#6791" class="Field">h</a> <a id="6793" class="Symbol">:</a> <a id="6795" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="6800" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>

  <a id="6805" class="Keyword">instance</a>
    <a id="HsTy-Test"></a><a id="6818" href="Tactic.Derive.Convertible.html#6818" class="Function">HsTy-Test</a> <a id="6828" class="Symbol">=</a> <a id="6830" href="Tactic.Derive.HsType.html#11254" class="Macro Operator">autoHsType</a> <a id="6841" href="Tactic.Derive.Convertible.html#6726" class="Record">Test</a> <a id="6846" href="Tactic.Derive.HsType.html#11254" class="Macro Operator">⊣</a> <a id="6848" href="Tactic.Derive.HsType.html#2961" class="Function">withConstructor</a> <a id="6864" class="String">&quot;MkTest&quot;</a> <a id="6873" href="Tactic.Derive.HsType.html#3247" class="Function Operator">•</a> <a id="6875" href="Tactic.Derive.HsType.html#3143" class="Function">fieldPrefix</a> <a id="6887" class="String">&quot;t&quot;</a>
    <a id="Conv-Test"></a><a id="6895" href="Tactic.Derive.Convertible.html#6895" class="Function">Conv-Test</a> <a id="6905" class="Symbol">=</a> <a id="6907" href="Tactic.Derive.Convertible.html#6455" class="Macro">autoConvert</a> <a id="6919" href="Tactic.Derive.Convertible.html#6726" class="Record">Test</a>
</pre></body></html>