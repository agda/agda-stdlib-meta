<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Reflection.Tactic</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/stdlib-meta/tree/master/Reflection/Tactic.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>
<a id="36" class="Comment">--------------------------------------------------------------------------------</a>
<a id="117" class="Comment">-- Types &amp; functions for interacting with tactics/metaprograms</a>
<a id="180" class="Comment">--------------------------------------------------------------------------------</a>

<a id="262" class="Keyword">module</a> <a id="269" href="Reflection.Tactic.html" class="Module">Reflection.Tactic</a> <a id="287" class="Keyword">where</a>

<a id="294" class="Keyword">import</a> <a id="301" href="Reflection.html" class="Module">Reflection</a> <a id="312" class="Symbol">as</a> <a id="315" class="Module">R</a>
<a id="317" class="Keyword">open</a> <a id="322" class="Keyword">import</a> <a id="329" href="Class.Monad.html" class="Module">Class.Monad</a> <a id="341" class="Keyword">hiding</a> <a id="348" class="Symbol">(</a><a id="349" href="Class.Monad.Instances.html#104" class="Function">Monad-TC</a><a id="357" class="Symbol">)</a>
<a id="359" class="Keyword">open</a> <a id="364" class="Keyword">import</a> <a id="371" href="Class.MonadTC.html" class="Module">Class.MonadTC</a>
<a id="385" class="Keyword">open</a> <a id="390" class="Keyword">import</a> <a id="397" href="Prelude.html" class="Module">Prelude</a>
<a id="405" class="Keyword">open</a> <a id="410" class="Keyword">import</a> <a id="417" href="Meta.html" class="Module">Meta</a>

<a id="423" class="Keyword">open</a> <a id="428" href="Class.MonadTC.html#1520" class="Module">MonadTC</a> <a id="436" class="Symbol">⦃...⦄</a>

<a id="443" class="Keyword">private</a> <a id="451" class="Keyword">variable</a>
  <a id="462" href="Reflection.Tactic.html#462" class="Generalizable">a</a> <a id="464" class="Symbol">:</a> <a id="466" href="Agda.Primitive.html#591" class="Postulate">Level</a>
  <a id="474" href="Reflection.Tactic.html#474" class="Generalizable">A</a> <a id="476" class="Symbol">:</a> <a id="478" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="482" href="Reflection.Tactic.html#462" class="Generalizable">a</a>

<a id="Tactic"></a><a id="485" href="Reflection.Tactic.html#485" class="Function">Tactic</a> <a id="492" class="Symbol">=</a> <a id="494" href="Agda.Builtin.Reflection.html#4670" class="Datatype">Term</a> <a id="499" class="Symbol">→</a> <a id="501" href="Agda.Builtin.Reflection.html#8279" class="Postulate">R.TC</a> <a id="506" href="Agda.Builtin.Unit.html#158" class="Record">⊤</a>
<a id="UnquoteDecl"></a><a id="508" href="Reflection.Tactic.html#508" class="Function">UnquoteDecl</a> <a id="520" class="Symbol">=</a> <a id="522" href="Agda.Builtin.Reflection.html#8279" class="Postulate">R.TC</a> <a id="527" href="Agda.Builtin.Unit.html#158" class="Record">⊤</a>

<a id="ITactic"></a><a id="530" href="Reflection.Tactic.html#530" class="Function">ITactic</a> <a id="538" class="Symbol">:</a> <a id="540" href="Agda.Primitive.html#320" class="Primitive">Set</a>
<a id="544" href="Reflection.Tactic.html#530" class="Function">ITactic</a> <a id="552" class="Symbol">=</a> <a id="554" href="Reflection.TCI.html#612" class="Function">TC</a> <a id="557" href="Agda.Builtin.Unit.html#158" class="Record">⊤</a>

<a id="initTacEnv"></a><a id="560" href="Reflection.Tactic.html#560" class="Function">initTacEnv</a> <a id="571" class="Symbol">:</a> <a id="573" class="Symbol">(</a><a id="574" href="Class.MonadTC.html#819" class="Record">TCEnv</a> <a id="580" class="Symbol">→</a> <a id="582" href="Class.MonadTC.html#819" class="Record">TCEnv</a><a id="587" class="Symbol">)</a> <a id="589" class="Symbol">→</a> <a id="591" href="Reflection.Tactic.html#530" class="Function">ITactic</a> <a id="599" class="Symbol">→</a> <a id="601" href="Reflection.Tactic.html#485" class="Function">Tactic</a>
<a id="608" href="Reflection.Tactic.html#560" class="Function">initTacEnv</a> <a id="619" href="Reflection.Tactic.html#619" class="Bound">f</a> <a id="621" href="Reflection.Tactic.html#621" class="Bound">tac</a> <a id="625" href="Reflection.Tactic.html#625" class="Bound">goal</a> <a id="630" class="Symbol">=</a> <a id="632" class="Symbol">(</a><a id="633" href="Class.MonadTC.html#1121" class="Function">initTCEnvWithGoal</a> <a id="651" href="Reflection.Tactic.html#625" class="Bound">goal</a><a id="655" class="Symbol">)</a> <a id="657" href="Reflection.TypeChecking.Monad.Syntax.html#691" class="Function Operator">R.&gt;&gt;=</a> <a id="663" href="Reflection.Tactic.html#621" class="Bound">tac</a> <a id="667" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="669" href="Reflection.Tactic.html#619" class="Bound">f</a>

<a id="initTacOpts"></a><a id="672" href="Reflection.Tactic.html#672" class="Function">initTacOpts</a> <a id="684" class="Symbol">:</a> <a id="686" href="Reflection.Tactic.html#530" class="Function">ITactic</a> <a id="694" class="Symbol">→</a> <a id="696" href="Class.MonadTC.html#621" class="Record">TCOptions</a> <a id="706" class="Symbol">→</a> <a id="708" href="Reflection.Tactic.html#485" class="Function">Tactic</a>
<a id="715" href="Reflection.Tactic.html#672" class="Function">initTacOpts</a> <a id="727" href="Reflection.Tactic.html#727" class="Bound">tac</a> <a id="731" href="Reflection.Tactic.html#731" class="Bound">opts</a> <a id="736" class="Symbol">=</a> <a id="738" href="Reflection.Tactic.html#560" class="Function">initTacEnv</a> <a id="749" class="Symbol">(λ</a> <a id="752" href="Reflection.Tactic.html#752" class="Bound">env</a> <a id="756" class="Symbol">→</a> <a id="758" class="Keyword">record</a> <a id="765" href="Reflection.Tactic.html#752" class="Bound">env</a> <a id="769" class="Symbol">{</a> <a id="771" href="Class.MonadTC.html#1060" class="Field">options</a> <a id="779" class="Symbol">=</a> <a id="781" href="Reflection.Tactic.html#731" class="Bound">opts</a> <a id="786" class="Symbol">})</a> <a id="789" href="Reflection.Tactic.html#727" class="Bound">tac</a>

<a id="794" class="Keyword">module</a> <a id="801" href="Reflection.Tactic.html#801" class="Module">_</a> <a id="803" class="Symbol">⦃</a> <a id="805" href="Reflection.Tactic.html#805" class="Bound">opts</a> <a id="810" class="Symbol">:</a> <a id="812" href="Class.MonadTC.html#621" class="Record">TCOptions</a> <a id="822" class="Symbol">⦄</a> <a id="824" class="Keyword">where</a>

  <a id="833" href="Reflection.Tactic.html#833" class="Function">initTac</a> <a id="841" class="Symbol">:</a> <a id="843" href="Reflection.Tactic.html#530" class="Function">ITactic</a> <a id="851" class="Symbol">→</a> <a id="853" href="Reflection.Tactic.html#485" class="Function">Tactic</a>
  <a id="862" href="Reflection.Tactic.html#833" class="Function">initTac</a> <a id="870" href="Reflection.Tactic.html#870" class="Bound">tac</a> <a id="874" class="Symbol">=</a> <a id="876" href="Reflection.Tactic.html#672" class="Function">initTacOpts</a> <a id="888" href="Reflection.Tactic.html#870" class="Bound">tac</a> <a id="892" href="Reflection.Tactic.html#805" class="Bound">opts</a>

  <a id="900" href="Reflection.Tactic.html#900" class="Function">initUnquoteWithGoal</a> <a id="920" class="Symbol">:</a> <a id="922" href="Agda.Builtin.Reflection.html#4670" class="Datatype">Term</a> <a id="927" class="Symbol">→</a> <a id="929" href="Reflection.TCI.html#612" class="Function">TC</a> <a id="932" href="Agda.Builtin.Unit.html#158" class="Record">⊤</a> <a id="934" class="Symbol">→</a> <a id="936" href="Reflection.Tactic.html#508" class="Function">UnquoteDecl</a>
  <a id="950" href="Reflection.Tactic.html#900" class="Function">initUnquoteWithGoal</a> <a id="970" href="Reflection.Tactic.html#970" class="Bound">g</a> <a id="972" href="Reflection.Tactic.html#972" class="Bound">unq</a> <a id="976" class="Symbol">=</a> <a id="978" class="Symbol">(</a><a id="979" href="Class.MonadTC.html#1121" class="Function">initTCEnvWithGoal</a> <a id="997" href="Reflection.Tactic.html#970" class="Bound">g</a><a id="998" class="Symbol">)</a> <a id="1000" href="Reflection.TypeChecking.Monad.Syntax.html#691" class="Function Operator">R.&gt;&gt;=</a> <a id="1006" href="Reflection.Tactic.html#972" class="Bound">unq</a>
                            <a id="1038" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1040" class="Symbol">(λ</a> <a id="1043" href="Reflection.Tactic.html#1043" class="Bound">env</a> <a id="1047" class="Symbol">→</a> <a id="1049" class="Keyword">record</a> <a id="1056" href="Reflection.Tactic.html#1043" class="Bound">env</a> <a id="1060" class="Symbol">{</a> <a id="1062" href="Class.MonadTC.html#1060" class="Field">options</a> <a id="1070" class="Symbol">=</a> <a id="1072" href="Reflection.Tactic.html#805" class="Bound">opts</a> <a id="1077" class="Symbol">})</a>

  <a id="1083" href="Reflection.Tactic.html#1083" class="Function">initUnquote</a> <a id="1095" class="Symbol">:</a> <a id="1097" href="Reflection.TCI.html#612" class="Function">TC</a> <a id="1100" href="Agda.Builtin.Unit.html#158" class="Record">⊤</a> <a id="1102" class="Symbol">→</a> <a id="1104" href="Reflection.Tactic.html#508" class="Function">UnquoteDecl</a>
  <a id="1118" href="Reflection.Tactic.html#1083" class="Function">initUnquote</a> <a id="1130" href="Reflection.Tactic.html#1130" class="Bound">unq</a> <a id="1134" class="Symbol">=</a> <a id="1136" href="Reflection.Tactic.html#900" class="Function">initUnquoteWithGoal</a> <a id="1156" href="Agda.Builtin.Reflection.html#5271" class="InductiveConstructor">unknown</a> <a id="1164" href="Reflection.Tactic.html#1130" class="Bound">unq</a>

  <a id="1171" class="Keyword">macro</a>
    <a id="1181" href="Reflection.Tactic.html#1181" class="Function">byTC</a> <a id="1186" class="Symbol">:</a> <a id="1188" href="Reflection.TCI.html#612" class="Function">TC</a> <a id="1191" href="Reflection.Tactic.html#474" class="Generalizable">A</a> <a id="1193" class="Symbol">→</a> <a id="1195" href="Reflection.Tactic.html#485" class="Function">Tactic</a>
    <a id="1206" href="Reflection.Tactic.html#1181" class="Function">byTC</a> <a id="1211" href="Reflection.Tactic.html#1211" class="Bound">comp</a> <a id="1216" class="Symbol">=</a> <a id="1218" href="Reflection.Tactic.html#833" class="Function">initTac</a> <a id="1226" class="Symbol">((</a><a id="1228" href="Reflection.Tactic.html#1211" class="Bound">comp</a> <a id="1233" href="Class.Monad.Core.html#262" class="Field Operator">&gt;&gt;=</a> <a id="1237" href="Class.MonadTC.html#1908" class="Field">quoteTC</a><a id="1244" class="Symbol">)</a> <a id="1246" href="Class.Monad.Core.html#262" class="Field Operator">&gt;&gt;=</a> <a id="1250" href="Class.MonadTC.html#10513" class="Function">unifyWithGoal</a><a id="1263" class="Symbol">)</a>

    <a id="1270" href="Reflection.Tactic.html#1270" class="Function">by</a> <a id="1273" class="Symbol">:</a> <a id="1275" href="Reflection.Tactic.html#530" class="Function">ITactic</a> <a id="1283" class="Symbol">→</a> <a id="1285" href="Reflection.Tactic.html#485" class="Function">Tactic</a>
    <a id="1296" href="Reflection.Tactic.html#1270" class="Function">by</a> <a id="1299" class="Symbol">=</a> <a id="1301" href="Reflection.Tactic.html#833" class="Function">initTac</a>
</pre></body></html>