<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Tactic.Assumption</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/stdlib-meta/tree/master/Tactic/Assumption.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>
<a id="36" class="Comment">--------------------------------------------------------------------------------</a>
<a id="117" class="Comment">-- assumption: try to solve the goal with one of the available assumptions</a>
<a id="192" class="Comment">--------------------------------------------------------------------------------</a>

<a id="274" class="Keyword">module</a> <a id="281" href="Tactic.Assumption.html" class="Module">Tactic.Assumption</a> <a id="299" class="Keyword">where</a>

<a id="306" class="Keyword">open</a> <a id="311" class="Keyword">import</a> <a id="318" href="Prelude.html" class="Module">Prelude</a>
<a id="326" class="Keyword">open</a> <a id="331" class="Keyword">import</a> <a id="338" href="Meta.html" class="Module">Meta</a>

<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="Class.Monad.html" class="Module">Class.Monad</a>
<a id="368" class="Keyword">open</a> <a id="373" class="Keyword">import</a> <a id="380" href="Class.Functor.html" class="Module">Class.Functor</a>
<a id="394" class="Keyword">open</a> <a id="399" class="Keyword">import</a> <a id="406" href="Class.MonadError.Instances.html" class="Module">Class.MonadError.Instances</a>
<a id="433" class="Keyword">open</a> <a id="438" class="Keyword">import</a> <a id="445" href="Class.MonadReader.Instances.html" class="Module">Class.MonadReader.Instances</a>
<a id="473" class="Keyword">open</a> <a id="478" class="Keyword">import</a> <a id="485" href="Class.MonadTC.Instances.html" class="Module">Class.MonadTC.Instances</a>

<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Tactic.Helpers.html" class="Module">Tactic.Helpers</a>

<a id="538" class="Keyword">open</a> <a id="543" class="Keyword">import</a> <a id="550" href="Generics.html" class="Module">Generics</a>

<a id="560" class="Keyword">instance</a>
  <a id="571" href="Tactic.Assumption.html#571" class="Function">_</a> <a id="573" class="Symbol">=</a> <a id="575" href="Class.Monad.Core.html#655" class="Function">Functor-M</a>

<a id="solve"></a><a id="586" href="Tactic.Assumption.html#586" class="Function">solve</a> <a id="592" class="Symbol">:</a> <a id="594" class="Symbol">⦃</a> <a id="596" href="Class.MonadTC.html#621" class="Record">TCOptions</a> <a id="606" class="Symbol">⦄</a> <a id="608" class="Symbol">→</a> <a id="610" href="Agda.Builtin.Reflection.html#4670" class="Datatype">Term</a> <a id="615" class="Symbol">→</a> <a id="617" href="Generics.Core.html#2458" class="Function">Tactic</a>
<a id="624" href="Tactic.Assumption.html#586" class="Function">solve</a> <a id="630" href="Tactic.Assumption.html#630" class="Bound">t</a> <a id="632" class="Symbol">=</a> <a id="634" href="Tactic.Helpers.html#6320" class="Function">initTac</a> <a id="642" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="644" href="Class.MonadTC.html#2437" class="Field">runSpeculative</a> <a id="659" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="661" class="Keyword">do</a>
  <a id="666" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="671" href="Tactic.Assumption.html#671" class="Bound">goal</a> <a id="676" href="Class.Monad.Core.html#335" class="Field Operator">←</a> <a id="678" href="Class.MonadReader.html#386" class="Function">reader</a> <a id="685" href="Class.MonadTC.html#1027" class="Field">TCEnv.goal</a>
    <a id="700" class="Keyword">where</a> <a id="706" class="CatchallClause Symbol">_</a> <a id="708" class="Symbol">→</a> <a id="710" href="Class.MonadTC.html#8719" class="Function">error1</a> <a id="717" class="String">&quot;solve: Goal is not a term!&quot;</a>
  <a id="748" href="Tactic.Assumption.html#748" class="Bound">metas</a> <a id="754" href="Class.Monad.Core.html#335" class="Field Operator">←</a> <a id="756" href="Generics.Utils.html#1176" class="Function">findMetas</a> <a id="766" href="Class.Functor.Core.html#707" class="Field Operator">&lt;$&gt;</a> <a id="770" href="Class.MonadTC.html#1790" class="Field">checkType</a> <a id="780" href="Tactic.Assumption.html#630" class="Bound">t</a> <a id="782" href="Tactic.Assumption.html#671" class="Bound">goal</a>
  <a id="789" href="Data.Bool.Base.html#1292" class="Function Operator">if</a> <a id="792" href="Data.List.Base.html#4532" class="Function">null</a> <a id="797" href="Tactic.Assumption.html#748" class="Bound">metas</a>
    <a id="807" href="Data.Bool.Base.html#1292" class="Function Operator">then</a> <a id="812" class="Symbol">(</a><a id="813" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,</a> <a id="816" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="820" class="Symbol">)</a>  <a id="823" href="Class.Functor.Core.html#707" class="Field Operator">&lt;$&gt;</a> <a id="827" href="Class.MonadTC.html#1652" class="Field">unify</a> <a id="833" href="Tactic.Assumption.html#671" class="Bound">goal</a> <a id="838" href="Tactic.Assumption.html#630" class="Bound">t</a>
    <a id="844" href="Data.Bool.Base.html#1292" class="Function Operator">else</a> <a id="849" class="Symbol">(</a><a id="850" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,</a> <a id="853" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="858" class="Symbol">)</a> <a id="860" href="Class.Functor.Core.html#707" class="Field Operator">&lt;$&gt;</a> <a id="864" href="Class.MonadTC.html#8719" class="Function">error1</a> <a id="871" class="String">&quot;Unsolved metavariables remaining!&quot;</a>

<a id="assumption&#39;"></a><a id="908" href="Tactic.Assumption.html#908" class="Function">assumption&#39;</a> <a id="920" class="Symbol">:</a> <a id="922" href="Tactic.Helpers.html#6008" class="Function">ITactic</a>
<a id="930" href="Tactic.Assumption.html#908" class="Function">assumption&#39;</a> <a id="942" class="Symbol">=</a> <a id="944" href="Tactic.Helpers.html#2625" class="Function">inDebugPath</a> <a id="956" class="String">&quot;assumption&quot;</a> <a id="969" class="Keyword">do</a>
  <a id="974" href="Tactic.Assumption.html#974" class="Bound">c</a> <a id="976" href="Class.Monad.Core.html#335" class="Field Operator">←</a> <a id="978" href="Class.MonadTC.html#8025" class="Function">getContext</a>
  <a id="991" href="Data.List.Base.html#4302" class="Function">foldl</a> <a id="997" class="Symbol">(λ</a> <a id="1000" href="Tactic.Assumption.html#1000" class="Bound">x</a> <a id="1002" href="Tactic.Assumption.html#1002" class="Bound">k</a> <a id="1004" class="Symbol">→</a> <a id="1006" class="Keyword">do</a>
    <a id="1013" href="Class.MonadError.html#359" class="Field">catch</a> <a id="1019" class="Symbol">(</a><a id="1020" href="Class.MonadTC.html#10469" class="Function">unifyWithGoal</a> <a id="1034" class="Symbol">(</a><a id="1035" href="Generics.Core.html#372" class="InductiveConstructor">♯</a> <a id="1037" href="Tactic.Assumption.html#1002" class="Bound">k</a><a id="1038" class="Symbol">)</a> <a id="1040" href="Class.Monad.Core.html#369" class="Function Operator">&gt;&gt;</a> <a id="1043" href="Class.MonadTC.html#5721" class="Function">debugLog</a> <a id="1052" class="Symbol">(</a><a id="1053" class="String">&quot;Success with: &quot;</a> <a id="1070" href="Reflection.Debug.html#992" class="Function Operator">∷ᵈ</a> <a id="1073" href="Generics.Core.html#372" class="InductiveConstructor">♯</a> <a id="1075" href="Tactic.Assumption.html#1002" class="Bound">k</a> <a id="1077" href="Reflection.Debug.html#992" class="Function Operator">∷ᵈ</a> <a id="1080" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="1082" class="Symbol">))</a> <a id="1085" class="Symbol">(λ</a> <a id="1088" href="Tactic.Assumption.html#1088" class="Bound">_</a> <a id="1090" class="Symbol">→</a> <a id="1092" href="Tactic.Assumption.html#1000" class="Bound">x</a><a id="1093" class="Symbol">))</a>
    <a id="1100" class="Symbol">(</a><a id="1101" href="Class.MonadTC.html#8866" class="Function">logAndError1</a> <a id="1114" class="String">&quot;No valid assumption!&quot;</a><a id="1136" class="Symbol">)</a> <a id="1138" class="Symbol">(</a><a id="1139" href="Data.List.Base.html#6282" class="Function">downFrom</a> <a id="1148" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="1150" href="Data.List.Base.html#4873" class="Function">length</a> <a id="1157" href="Tactic.Assumption.html#974" class="Bound">c</a><a id="1158" class="Symbol">)</a>

<a id="1161" class="Keyword">module</a> <a id="1168" href="Tactic.Assumption.html#1168" class="Module">_</a> <a id="1170" class="Symbol">⦃</a> <a id="1172" href="Tactic.Assumption.html#1172" class="Bound">_</a> <a id="1174" class="Symbol">:</a> <a id="1176" href="Class.MonadTC.html#621" class="Record">TCOptions</a> <a id="1186" class="Symbol">⦄</a> <a id="1188" class="Keyword">where</a>
  <a id="1196" class="Keyword">macro</a>
    <a id="1206" href="Tactic.Assumption.html#1206" class="Function">assumption</a> <a id="1217" class="Symbol">=</a> <a id="1219" href="Tactic.Helpers.html#6320" class="Function">initTac</a> <a id="1227" href="Tactic.Assumption.html#908" class="Function">assumption&#39;</a>
    <a id="1243" href="Tactic.Assumption.html#1243" class="Function">assumptionOpts</a> <a id="1258" class="Symbol">=</a> <a id="1260" href="Tactic.Helpers.html#6159" class="Function">initTacOpts</a> <a id="1272" href="Tactic.Assumption.html#908" class="Function">assumption&#39;</a>

<a id="1285" class="Keyword">private</a>
  <a id="1295" class="Keyword">open</a> <a id="1300" class="Keyword">import</a> <a id="1307" href="Tactic.Defaults.html" class="Module">Tactic.Defaults</a>
  <a id="1325" class="Keyword">module</a> <a id="Test"></a><a id="1332" href="Tactic.Assumption.html#1332" class="Module">Test</a> <a id="1337" class="Keyword">where</a>
    <a id="Test.test₁"></a><a id="1347" href="Tactic.Assumption.html#1347" class="Function">test₁</a> <a id="1353" class="Symbol">:</a> <a id="1355" class="Symbol">{</a><a id="1356" href="Tactic.Assumption.html#1356" class="Bound">A</a> <a id="1358" href="Tactic.Assumption.html#1358" class="Bound">B</a> <a id="1360" class="Symbol">:</a> <a id="1362" href="Agda.Primitive.html#320" class="Primitive">Set</a><a id="1365" class="Symbol">}</a> <a id="1367" class="Symbol">→</a> <a id="1369" href="Tactic.Assumption.html#1356" class="Bound">A</a> <a id="1371" class="Symbol">→</a> <a id="1373" href="Tactic.Assumption.html#1358" class="Bound">B</a> <a id="1375" class="Symbol">→</a> <a id="1377" href="Tactic.Assumption.html#1356" class="Bound">A</a>
    <a id="1383" href="Tactic.Assumption.html#1347" class="Function">test₁</a> <a id="1389" href="Tactic.Assumption.html#1389" class="Bound">a</a> <a id="1391" href="Tactic.Assumption.html#1391" class="Bound">b</a> <a id="1393" class="Symbol">=</a> <a id="1395" href="Tactic.Assumption.html#1206" class="Macro">assumption</a>
    
    <a id="Test.test₂"></a><a id="1415" href="Tactic.Assumption.html#1415" class="Function">test₂</a> <a id="1421" class="Symbol">:</a> <a id="1423" class="Symbol">{</a><a id="1424" href="Tactic.Assumption.html#1424" class="Bound">A</a> <a id="1426" href="Tactic.Assumption.html#1426" class="Bound">B</a> <a id="1428" class="Symbol">:</a> <a id="1430" href="Agda.Primitive.html#320" class="Primitive">Set</a><a id="1433" class="Symbol">}</a> <a id="1435" class="Symbol">→</a> <a id="1437" href="Tactic.Assumption.html#1424" class="Bound">A</a> <a id="1439" class="Symbol">→</a> <a id="1441" href="Tactic.Assumption.html#1426" class="Bound">B</a> <a id="1443" class="Symbol">→</a> <a id="1445" href="Tactic.Assumption.html#1426" class="Bound">B</a>
    <a id="1451" href="Tactic.Assumption.html#1415" class="Function">test₂</a> <a id="1457" href="Tactic.Assumption.html#1457" class="Bound">a</a> <a id="1459" href="Tactic.Assumption.html#1459" class="Bound">b</a> <a id="1461" class="Symbol">=</a> <a id="1463" href="Tactic.Assumption.html#1206" class="Macro">assumption</a>
</pre></body></html>