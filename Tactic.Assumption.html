<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Tactic.Assumption</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/stdlib-meta/tree/external-classes/Tactic/Assumption.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>
<a id="36" class="Comment">--------------------------------------------------------------------------------</a>
<a id="117" class="Comment">-- assumption: try to solve the goal with one of the available assumptions</a>
<a id="192" class="Comment">--------------------------------------------------------------------------------</a>

<a id="274" class="Keyword">module</a> <a id="281" href="Tactic.Assumption.html" class="Module">Tactic.Assumption</a> <a id="299" class="Keyword">where</a>

<a id="306" class="Keyword">open</a> <a id="311" class="Keyword">import</a> <a id="318" href="Prelude.html" class="Module">Prelude</a>
<a id="326" class="Keyword">open</a> <a id="331" class="Keyword">import</a> <a id="338" href="Meta.html" class="Module">Meta</a>

<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="Class.Functor.html" class="Module">Class.Functor</a>
<a id="370" class="Keyword">open</a> <a id="375" class="Keyword">import</a> <a id="382" href="Class.Monad.html" class="Module">Class.Monad</a>
<a id="394" class="Keyword">open</a> <a id="399" class="Keyword">import</a> <a id="406" href="Class.MonadError.Instances.html" class="Module">Class.MonadError.Instances</a>
<a id="433" class="Keyword">open</a> <a id="438" class="Keyword">import</a> <a id="445" href="Class.MonadReader.Instances.html" class="Module">Class.MonadReader.Instances</a>
<a id="473" class="Keyword">open</a> <a id="478" class="Keyword">import</a> <a id="485" href="Class.MonadTC.Instances.html" class="Module">Class.MonadTC.Instances</a>

<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Reflection.Tactic.html" class="Module">Reflection.Tactic</a>
<a id="540" class="Keyword">open</a> <a id="545" class="Keyword">import</a> <a id="552" href="Reflection.Utils.html" class="Module">Reflection.Utils</a>
<a id="569" class="Keyword">open</a> <a id="574" class="Keyword">import</a> <a id="581" href="Reflection.Utils.TCI.html" class="Module">Reflection.Utils.TCI</a>

<a id="603" class="Keyword">instance</a>
  <a id="614" href="Tactic.Assumption.html#614" class="Function">_</a> <a id="616" class="Symbol">=</a> <a id="618" href="Class.Monad.Core.html#582" class="Function">Functor-M</a>

<a id="solve"></a><a id="629" href="Tactic.Assumption.html#629" class="Function">solve</a> <a id="635" class="Symbol">:</a> <a id="637" class="Symbol">⦃</a> <a id="639" href="Class.MonadTC.html#621" class="Record">TCOptions</a> <a id="649" class="Symbol">⦄</a> <a id="651" class="Symbol">→</a> <a id="653" href="Agda.Builtin.Reflection.html#4670" class="Datatype">Term</a> <a id="658" class="Symbol">→</a> <a id="660" href="Reflection.Tactic.html#485" class="Function">Tactic</a>
<a id="667" href="Tactic.Assumption.html#629" class="Function">solve</a> <a id="673" href="Tactic.Assumption.html#673" class="Bound">t</a> <a id="675" class="Symbol">=</a> <a id="677" href="Reflection.Tactic.html#833" class="Function">initTac</a> <a id="685" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="687" href="Class.MonadTC.html#2437" class="Field">runSpeculative</a> <a id="702" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="704" class="Keyword">do</a>
  <a id="709" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="714" href="Tactic.Assumption.html#714" class="Bound">goal</a> <a id="719" href="Class.Monad.Core.html#262" class="Field Operator">←</a> <a id="721" href="Class.MonadReader.html#386" class="Function">reader</a> <a id="728" href="Class.MonadTC.html#1027" class="Field">TCEnv.goal</a>
    <a id="743" class="Keyword">where</a> <a id="749" class="CatchallClause Symbol">_</a> <a id="751" class="Symbol">→</a> <a id="753" href="Class.MonadTC.html#8763" class="Function">error1</a> <a id="760" class="String">&quot;solve: Goal is not a term!&quot;</a>
  <a id="791" href="Tactic.Assumption.html#791" class="Bound">metas</a> <a id="797" href="Class.Monad.Core.html#262" class="Field Operator">←</a> <a id="799" href="Reflection.Utils.html#1182" class="Function">findMetas</a> <a id="809" href="Class.Functor.Core.html#205" class="Field Operator">&lt;$&gt;</a> <a id="813" href="Class.MonadTC.html#1790" class="Field">checkType</a> <a id="823" href="Tactic.Assumption.html#673" class="Bound">t</a> <a id="825" href="Tactic.Assumption.html#714" class="Bound">goal</a>
  <a id="832" href="Data.Bool.Base.html#1292" class="Function Operator">if</a> <a id="835" href="Data.List.Base.html#4532" class="Function">null</a> <a id="840" href="Tactic.Assumption.html#791" class="Bound">metas</a>
    <a id="850" href="Data.Bool.Base.html#1292" class="Function Operator">then</a> <a id="855" class="Symbol">(</a><a id="856" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,</a> <a id="859" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="863" class="Symbol">)</a>  <a id="866" href="Class.Functor.Core.html#205" class="Field Operator">&lt;$&gt;</a> <a id="870" href="Class.MonadTC.html#1652" class="Field">unify</a> <a id="876" href="Tactic.Assumption.html#714" class="Bound">goal</a> <a id="881" href="Tactic.Assumption.html#673" class="Bound">t</a>
    <a id="887" href="Data.Bool.Base.html#1292" class="Function Operator">else</a> <a id="892" class="Symbol">(</a><a id="893" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">_,</a> <a id="896" href="Agda.Builtin.Bool.html#175" class="InductiveConstructor">false</a><a id="901" class="Symbol">)</a> <a id="903" href="Class.Functor.Core.html#205" class="Field Operator">&lt;$&gt;</a> <a id="907" href="Class.MonadTC.html#8763" class="Function">error1</a> <a id="914" class="String">&quot;Unsolved metavariables remaining!&quot;</a>

<a id="assumption&#39;"></a><a id="951" href="Tactic.Assumption.html#951" class="Function">assumption&#39;</a> <a id="963" class="Symbol">:</a> <a id="965" href="Reflection.Tactic.html#530" class="Function">ITactic</a>
<a id="973" href="Tactic.Assumption.html#951" class="Function">assumption&#39;</a> <a id="985" class="Symbol">=</a> <a id="987" href="Reflection.Utils.TCI.html#5941" class="Function">inDebugPath</a> <a id="999" class="String">&quot;assumption&quot;</a> <a id="1012" class="Keyword">do</a>
  <a id="1017" href="Tactic.Assumption.html#1017" class="Bound">c</a> <a id="1019" href="Class.Monad.Core.html#262" class="Field Operator">←</a> <a id="1021" href="Class.MonadTC.html#8069" class="Function">getContext</a>
  <a id="1034" href="Data.List.Base.html#4302" class="Function">foldl</a> <a id="1040" class="Symbol">(λ</a> <a id="1043" href="Tactic.Assumption.html#1043" class="Bound">x</a> <a id="1045" href="Tactic.Assumption.html#1045" class="Bound">k</a> <a id="1047" class="Symbol">→</a> <a id="1049" class="Keyword">do</a>
    <a id="1056" href="Class.MonadError.html#359" class="Field">catch</a> <a id="1062" class="Symbol">(</a><a id="1063" href="Class.MonadTC.html#10513" class="Function">unifyWithGoal</a> <a id="1077" class="Symbol">(</a><a id="1078" href="Reflection.Syntax.html#1131" class="InductiveConstructor">♯</a> <a id="1080" href="Tactic.Assumption.html#1045" class="Bound">k</a><a id="1081" class="Symbol">)</a> <a id="1083" href="Class.Monad.Core.html#296" class="Function Operator">&gt;&gt;</a> <a id="1086" href="Class.MonadTC.html#5765" class="Function">debugLog</a> <a id="1095" class="Symbol">(</a><a id="1096" class="String">&quot;Success with: &quot;</a> <a id="1113" href="Reflection.Debug.html#1010" class="Function Operator">∷ᵈ</a> <a id="1116" href="Reflection.Syntax.html#1131" class="InductiveConstructor">♯</a> <a id="1118" href="Tactic.Assumption.html#1045" class="Bound">k</a> <a id="1120" href="Reflection.Debug.html#1010" class="Function Operator">∷ᵈ</a> <a id="1123" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="1125" class="Symbol">))</a> <a id="1128" class="Symbol">(λ</a> <a id="1131" href="Tactic.Assumption.html#1131" class="Bound">_</a> <a id="1133" class="Symbol">→</a> <a id="1135" href="Tactic.Assumption.html#1043" class="Bound">x</a><a id="1136" class="Symbol">))</a>
    <a id="1143" class="Symbol">(</a><a id="1144" href="Class.MonadTC.html#8910" class="Function">logAndError1</a> <a id="1157" class="String">&quot;No valid assumption!&quot;</a><a id="1179" class="Symbol">)</a> <a id="1181" class="Symbol">(</a><a id="1182" href="Data.List.Base.html#6282" class="Function">downFrom</a> <a id="1191" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="1193" href="Data.List.Base.html#4873" class="Function">length</a> <a id="1200" href="Tactic.Assumption.html#1017" class="Bound">c</a><a id="1201" class="Symbol">)</a>

<a id="1204" class="Keyword">module</a> <a id="1211" href="Tactic.Assumption.html#1211" class="Module">_</a> <a id="1213" class="Symbol">⦃</a> <a id="1215" href="Tactic.Assumption.html#1215" class="Bound">_</a> <a id="1217" class="Symbol">:</a> <a id="1219" href="Class.MonadTC.html#621" class="Record">TCOptions</a> <a id="1229" class="Symbol">⦄</a> <a id="1231" class="Keyword">where</a>
  <a id="1239" class="Keyword">macro</a>
    <a id="1249" href="Tactic.Assumption.html#1249" class="Function">assumption</a> <a id="1260" class="Symbol">=</a> <a id="1262" href="Reflection.Tactic.html#833" class="Function">initTac</a> <a id="1270" href="Tactic.Assumption.html#951" class="Function">assumption&#39;</a>
    <a id="1286" href="Tactic.Assumption.html#1286" class="Function">assumptionOpts</a> <a id="1301" class="Symbol">=</a> <a id="1303" href="Reflection.Tactic.html#672" class="Function">initTacOpts</a> <a id="1315" href="Tactic.Assumption.html#951" class="Function">assumption&#39;</a>

<a id="1328" class="Keyword">private</a>
  <a id="1338" class="Keyword">open</a> <a id="1343" class="Keyword">import</a> <a id="1350" href="Tactic.Defaults.html" class="Module">Tactic.Defaults</a>
  <a id="1368" class="Keyword">module</a> <a id="Test"></a><a id="1375" href="Tactic.Assumption.html#1375" class="Module">Test</a> <a id="1380" class="Keyword">where</a>
    <a id="Test.test₁"></a><a id="1390" href="Tactic.Assumption.html#1390" class="Function">test₁</a> <a id="1396" class="Symbol">:</a> <a id="1398" class="Symbol">{</a><a id="1399" href="Tactic.Assumption.html#1399" class="Bound">A</a> <a id="1401" href="Tactic.Assumption.html#1401" class="Bound">B</a> <a id="1403" class="Symbol">:</a> <a id="1405" href="Agda.Primitive.html#320" class="Primitive">Set</a><a id="1408" class="Symbol">}</a> <a id="1410" class="Symbol">→</a> <a id="1412" href="Tactic.Assumption.html#1399" class="Bound">A</a> <a id="1414" class="Symbol">→</a> <a id="1416" href="Tactic.Assumption.html#1401" class="Bound">B</a> <a id="1418" class="Symbol">→</a> <a id="1420" href="Tactic.Assumption.html#1399" class="Bound">A</a>
    <a id="1426" href="Tactic.Assumption.html#1390" class="Function">test₁</a> <a id="1432" href="Tactic.Assumption.html#1432" class="Bound">a</a> <a id="1434" href="Tactic.Assumption.html#1434" class="Bound">b</a> <a id="1436" class="Symbol">=</a> <a id="1438" href="Tactic.Assumption.html#1249" class="Macro">assumption</a>
    
    <a id="Test.test₂"></a><a id="1458" href="Tactic.Assumption.html#1458" class="Function">test₂</a> <a id="1464" class="Symbol">:</a> <a id="1466" class="Symbol">{</a><a id="1467" href="Tactic.Assumption.html#1467" class="Bound">A</a> <a id="1469" href="Tactic.Assumption.html#1469" class="Bound">B</a> <a id="1471" class="Symbol">:</a> <a id="1473" href="Agda.Primitive.html#320" class="Primitive">Set</a><a id="1476" class="Symbol">}</a> <a id="1478" class="Symbol">→</a> <a id="1480" href="Tactic.Assumption.html#1467" class="Bound">A</a> <a id="1482" class="Symbol">→</a> <a id="1484" href="Tactic.Assumption.html#1469" class="Bound">B</a> <a id="1486" class="Symbol">→</a> <a id="1488" href="Tactic.Assumption.html#1469" class="Bound">B</a>
    <a id="1494" href="Tactic.Assumption.html#1458" class="Function">test₂</a> <a id="1500" href="Tactic.Assumption.html#1500" class="Bound">a</a> <a id="1502" href="Tactic.Assumption.html#1502" class="Bound">b</a> <a id="1504" class="Symbol">=</a> <a id="1506" href="Tactic.Assumption.html#1249" class="Macro">assumption</a>
</pre></body></html>