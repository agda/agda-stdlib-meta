<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Tactic.Assumption</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/stdlib-meta/tree/tactics-and-deriving/Tactic/Assumption.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>
<a id="36" class="Comment">--------------------------------------------------------------------------------</a>
<a id="117" class="Comment">-- assumption: try to solve the goal with one of the available assumptions</a>
<a id="192" class="Comment">--------------------------------------------------------------------------------</a>

<a id="274" class="Keyword">module</a> <a id="281" href="Tactic.Assumption.html" class="Module">Tactic.Assumption</a> <a id="299" class="Keyword">where</a>

<a id="306" class="Keyword">open</a> <a id="311" class="Keyword">import</a> <a id="318" href="Prelude.html" class="Module">Prelude</a>
<a id="326" class="Keyword">open</a> <a id="331" class="Keyword">import</a> <a id="338" href="Meta.html" class="Module">Meta</a>

<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="Interface.Monad.Instance.html" class="Module">Interface.Monad.Instance</a>
<a id="381" class="Keyword">open</a> <a id="386" class="Keyword">import</a> <a id="393" href="Interface.MonadError.Instance.html" class="Module">Interface.MonadError.Instance</a>
<a id="423" class="Keyword">open</a> <a id="428" class="Keyword">import</a> <a id="435" href="Interface.MonadReader.Instance.html" class="Module">Interface.MonadReader.Instance</a>
<a id="466" class="Keyword">open</a> <a id="471" class="Keyword">import</a> <a id="478" href="Interface.MonadTC.Instance.html" class="Module">Interface.MonadTC.Instance</a>

<a id="506" class="Keyword">open</a> <a id="511" class="Keyword">import</a> <a id="518" href="Tactic.Helpers.html" class="Module">Tactic.Helpers</a>

<a id="534" class="Keyword">open</a> <a id="539" class="Keyword">import</a> <a id="546" href="Generics.html" class="Module">Generics</a>

<a id="solve"></a><a id="556" href="Tactic.Assumption.html#556" class="Function">solve</a> <a id="562" class="Symbol">:</a> <a id="564" class="Symbol">⦃</a> <a id="566" href="Tactic.Assumption.html#566" class="Bound">_</a> <a id="568" class="Symbol">:</a> <a id="570" href="Reflection.Debug.html#2340" class="Record">DebugOptions</a> <a id="583" class="Symbol">⦄</a> <a id="585" class="Symbol">→</a> <a id="587" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="592" class="Symbol">→</a> <a id="594" href="Generics.Core.html#2458" class="Function">Tactic</a>
<a id="601" href="Tactic.Assumption.html#556" class="Function">solve</a> <a id="607" href="Tactic.Assumption.html#607" class="Bound">t</a> <a id="609" class="Symbol">=</a> <a id="611" href="Tactic.Helpers.html#5866" class="Function">initTac</a> <a id="619" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="621" href="Interface.MonadTC.html#2263" class="Field">runSpeculative</a> <a id="636" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="638" class="Keyword">do</a>
  <a id="643" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="648" href="Tactic.Assumption.html#648" class="Bound">goal</a> <a id="653" href="Interface.Monad.html#307" class="Field Operator">←</a> <a id="655" href="Interface.MonadReader.html#389" class="Function">reader</a> <a id="662" href="Interface.MonadTC.html#866" class="Field">TCEnv.goal</a>
    <a id="677" class="Keyword">where</a> <a id="683" class="CatchallClause Symbol">_</a> <a id="685" class="Symbol">→</a> <a id="687" href="Interface.MonadTC.html#8509" class="Function">error1</a> <a id="694" class="String">&quot;solve: Goal is not a term!&quot;</a>
  <a id="725" href="Tactic.Assumption.html#725" class="Bound">metas</a> <a id="731" href="Interface.Monad.html#307" class="Field Operator">←</a> <a id="733" href="Generics.Utils.html#1176" class="Function">findMetas</a> <a id="743" href="Interface.Monad.html#627" class="Function Operator">&lt;$&gt;</a> <a id="747" href="Interface.MonadTC.html#1616" class="Field">checkType</a> <a id="757" href="Tactic.Assumption.html#607" class="Bound">t</a> <a id="759" href="Tactic.Assumption.html#648" class="Bound">goal</a>
  <a id="766" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="769" href="Data.List.Base.html#4523" class="Function">null</a> <a id="774" href="Tactic.Assumption.html#725" class="Bound">metas</a>
    <a id="784" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="789" class="Symbol">(</a><a id="790" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,</a> <a id="793" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="797" class="Symbol">)</a>  <a id="800" href="Interface.Monad.html#627" class="Function Operator">&lt;$&gt;</a> <a id="804" href="Interface.MonadTC.html#1478" class="Field">unify</a> <a id="810" href="Tactic.Assumption.html#648" class="Bound">goal</a> <a id="815" href="Tactic.Assumption.html#607" class="Bound">t</a>
    <a id="821" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="826" class="Symbol">(</a><a id="827" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,</a> <a id="830" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a><a id="835" class="Symbol">)</a> <a id="837" href="Interface.Monad.html#627" class="Function Operator">&lt;$&gt;</a> <a id="841" href="Interface.MonadTC.html#8509" class="Function">error1</a> <a id="848" class="String">&quot;Unsolved metavariables remaining!&quot;</a>

<a id="assumption&#39;"></a><a id="885" href="Tactic.Assumption.html#885" class="Function">assumption&#39;</a> <a id="897" class="Symbol">:</a> <a id="899" href="Tactic.Helpers.html#5592" class="Function">ITactic</a>
<a id="907" href="Tactic.Assumption.html#885" class="Function">assumption&#39;</a> <a id="919" class="Symbol">=</a> <a id="921" href="Tactic.Helpers.html#2505" class="Function">inDebugPath</a> <a id="933" class="String">&quot;assumption&quot;</a> <a id="946" class="Keyword">do</a>
  <a id="951" href="Tactic.Assumption.html#951" class="Bound">c</a> <a id="953" href="Interface.Monad.html#307" class="Field Operator">←</a> <a id="955" href="Interface.MonadTC.html#7754" class="Function">getContext</a>
  <a id="968" href="Data.List.Base.html#4293" class="Function">foldl</a> <a id="974" class="Symbol">(λ</a> <a id="977" href="Tactic.Assumption.html#977" class="Bound">x</a> <a id="979" href="Tactic.Assumption.html#979" class="Bound">k</a> <a id="981" class="Symbol">→</a> <a id="983" class="Keyword">do</a>
    <a id="990" href="Interface.MonadError.html#385" class="Field">catch</a> <a id="996" class="Symbol">(</a><a id="997" href="Interface.MonadTC.html#10290" class="Function">unifyWithGoal</a> <a id="1011" class="Symbol">(</a><a id="1012" href="Generics.Core.html#372" class="InductiveConstructor">♯</a> <a id="1014" href="Tactic.Assumption.html#979" class="Bound">k</a><a id="1015" class="Symbol">)</a> <a id="1017" href="Interface.Monad.html#341" class="Function Operator">&gt;&gt;</a> <a id="1020" href="Interface.MonadTC.html#5534" class="Function">debugLog</a> <a id="1029" class="Symbol">(</a><a id="1030" class="String">&quot;Success with: &quot;</a> <a id="1047" href="Reflection.Debug.html#992" class="Function Operator">∷ᵈ</a> <a id="1050" href="Generics.Core.html#372" class="InductiveConstructor">♯</a> <a id="1052" href="Tactic.Assumption.html#979" class="Bound">k</a> <a id="1054" href="Reflection.Debug.html#992" class="Function Operator">∷ᵈ</a> <a id="1057" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1059" class="Symbol">))</a> <a id="1062" class="Symbol">(λ</a> <a id="1065" href="Tactic.Assumption.html#1065" class="Bound">_</a> <a id="1067" class="Symbol">→</a> <a id="1069" href="Tactic.Assumption.html#977" class="Bound">x</a><a id="1070" class="Symbol">))</a>
    <a id="1077" class="Symbol">(</a><a id="1078" href="Interface.MonadTC.html#8656" class="Function">logAndError1</a> <a id="1091" class="String">&quot;No valid assumption!&quot;</a><a id="1113" class="Symbol">)</a> <a id="1115" class="Symbol">(</a><a id="1116" href="Data.List.Base.html#6273" class="Function">downFrom</a> <a id="1125" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1127" href="Data.List.Base.html#4864" class="Function">length</a> <a id="1134" href="Tactic.Assumption.html#951" class="Bound">c</a><a id="1135" class="Symbol">)</a>

<a id="1138" class="Keyword">module</a> <a id="1145" href="Tactic.Assumption.html#1145" class="Module">_</a> <a id="1147" class="Symbol">⦃</a> <a id="1149" href="Tactic.Assumption.html#1149" class="Bound">_</a> <a id="1151" class="Symbol">:</a> <a id="1153" href="Reflection.Debug.html#2340" class="Record">DebugOptions</a> <a id="1166" class="Symbol">⦄</a> <a id="1168" class="Keyword">where</a>
  <a id="1176" class="Keyword">macro</a>
    <a id="1186" href="Tactic.Assumption.html#1186" class="Function">assumption</a> <a id="1197" class="Symbol">=</a> <a id="1199" href="Tactic.Helpers.html#5866" class="Function">initTac</a> <a id="1207" href="Tactic.Assumption.html#885" class="Function">assumption&#39;</a>
    <a id="1223" href="Tactic.Assumption.html#1223" class="Function">assumptionOpts</a> <a id="1238" class="Symbol">=</a> <a id="1240" href="Tactic.Helpers.html#5743" class="Function">initTacOpts</a> <a id="1252" href="Tactic.Assumption.html#885" class="Function">assumption&#39;</a>

<a id="1265" class="Keyword">private</a>
  <a id="1275" class="Keyword">open</a> <a id="1280" class="Keyword">import</a> <a id="1287" href="Tactic.Defaults.html" class="Module">Tactic.Defaults</a>
  <a id="1305" class="Keyword">module</a> <a id="Test"></a><a id="1312" href="Tactic.Assumption.html#1312" class="Module">Test</a> <a id="1317" class="Keyword">where</a>
    <a id="Test.test₁"></a><a id="1327" href="Tactic.Assumption.html#1327" class="Function">test₁</a> <a id="1333" class="Symbol">:</a> <a id="1335" class="Symbol">{</a><a id="1336" href="Tactic.Assumption.html#1336" class="Bound">A</a> <a id="1338" href="Tactic.Assumption.html#1338" class="Bound">B</a> <a id="1340" class="Symbol">:</a> <a id="1342" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1345" class="Symbol">}</a> <a id="1347" class="Symbol">→</a> <a id="1349" href="Tactic.Assumption.html#1336" class="Bound">A</a> <a id="1351" class="Symbol">→</a> <a id="1353" href="Tactic.Assumption.html#1338" class="Bound">B</a> <a id="1355" class="Symbol">→</a> <a id="1357" href="Tactic.Assumption.html#1336" class="Bound">A</a>
    <a id="1363" href="Tactic.Assumption.html#1327" class="Function">test₁</a> <a id="1369" href="Tactic.Assumption.html#1369" class="Bound">a</a> <a id="1371" href="Tactic.Assumption.html#1371" class="Bound">b</a> <a id="1373" class="Symbol">=</a> <a id="1375" href="Tactic.Assumption.html#1186" class="Macro">assumption</a>
    
    <a id="Test.test₂"></a><a id="1395" href="Tactic.Assumption.html#1395" class="Function">test₂</a> <a id="1401" class="Symbol">:</a> <a id="1403" class="Symbol">{</a><a id="1404" href="Tactic.Assumption.html#1404" class="Bound">A</a> <a id="1406" href="Tactic.Assumption.html#1406" class="Bound">B</a> <a id="1408" class="Symbol">:</a> <a id="1410" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1413" class="Symbol">}</a> <a id="1415" class="Symbol">→</a> <a id="1417" href="Tactic.Assumption.html#1404" class="Bound">A</a> <a id="1419" class="Symbol">→</a> <a id="1421" href="Tactic.Assumption.html#1406" class="Bound">B</a> <a id="1423" class="Symbol">→</a> <a id="1425" href="Tactic.Assumption.html#1406" class="Bound">B</a>
    <a id="1431" href="Tactic.Assumption.html#1395" class="Function">test₂</a> <a id="1437" href="Tactic.Assumption.html#1437" class="Bound">a</a> <a id="1439" href="Tactic.Assumption.html#1439" class="Bound">b</a> <a id="1441" class="Symbol">=</a> <a id="1443" href="Tactic.Assumption.html#1186" class="Macro">assumption</a>
</pre></body></html>