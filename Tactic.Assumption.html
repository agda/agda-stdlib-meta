<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Tactic.Assumption</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/stdlib-meta/tree/master/Tactic/Assumption.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>
<a id="36" class="Comment">--------------------------------------------------------------------------------</a>
<a id="117" class="Comment">-- assumption: try to solve the goal with one of the available assumptions</a>
<a id="192" class="Comment">--------------------------------------------------------------------------------</a>

<a id="274" class="Keyword">module</a> <a id="281" href="Tactic.Assumption.html" class="Module">Tactic.Assumption</a> <a id="299" class="Keyword">where</a>

<a id="306" class="Keyword">open</a> <a id="311" class="Keyword">import</a> <a id="318" href="Prelude.html" class="Module">Prelude</a>
<a id="326" class="Keyword">open</a> <a id="331" class="Keyword">import</a> <a id="338" href="Meta.html" class="Module">Meta</a>

<a id="344" class="Keyword">open</a> <a id="349" class="Keyword">import</a> <a id="356" href="Class.Monad.html" class="Module">Class.Monad</a>
<a id="368" class="Keyword">open</a> <a id="373" class="Keyword">import</a> <a id="380" href="Class.Functor.html" class="Module">Class.Functor</a>
<a id="394" class="Keyword">open</a> <a id="399" class="Keyword">import</a> <a id="406" href="Class.MonadError.Instances.html" class="Module">Class.MonadError.Instances</a>
<a id="433" class="Keyword">open</a> <a id="438" class="Keyword">import</a> <a id="445" href="Class.MonadReader.Instances.html" class="Module">Class.MonadReader.Instances</a>
<a id="473" class="Keyword">open</a> <a id="478" class="Keyword">import</a> <a id="485" href="Class.MonadTC.Instances.html" class="Module">Class.MonadTC.Instances</a>

<a id="510" class="Keyword">open</a> <a id="515" class="Keyword">import</a> <a id="522" href="Tactic.Helpers.html" class="Module">Tactic.Helpers</a>

<a id="538" class="Keyword">open</a> <a id="543" class="Keyword">import</a> <a id="550" href="Generics.html" class="Module">Generics</a>

<a id="560" class="Keyword">instance</a>
  <a id="571" href="Tactic.Assumption.html#571" class="Function">_</a> <a id="573" class="Symbol">=</a> <a id="575" href="Class.Monad.Core.html#655" class="Function">Functor-M</a>

<a id="solve"></a><a id="586" href="Tactic.Assumption.html#586" class="Function">solve</a> <a id="592" class="Symbol">:</a> <a id="594" class="Symbol">⦃</a> <a id="596" href="Tactic.Assumption.html#596" class="Bound">_</a> <a id="598" class="Symbol">:</a> <a id="600" href="Reflection.Debug.html#2340" class="Record">DebugOptions</a> <a id="613" class="Symbol">⦄</a> <a id="615" class="Symbol">→</a> <a id="617" href="Agda.Builtin.Reflection.html#4688" class="Datatype">Term</a> <a id="622" class="Symbol">→</a> <a id="624" href="Generics.Core.html#2458" class="Function">Tactic</a>
<a id="631" href="Tactic.Assumption.html#586" class="Function">solve</a> <a id="637" href="Tactic.Assumption.html#637" class="Bound">t</a> <a id="639" class="Symbol">=</a> <a id="641" href="Tactic.Helpers.html#5923" class="Function">initTac</a> <a id="649" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="651" href="Class.MonadTC.html#2230" class="Field">runSpeculative</a> <a id="666" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="668" class="Keyword">do</a>
  <a id="673" href="Data.Sum.Base.html#784" class="InductiveConstructor">inj₁</a> <a id="678" href="Tactic.Assumption.html#678" class="Bound">goal</a> <a id="683" href="Class.Monad.Core.html#335" class="Field Operator">←</a> <a id="685" href="Class.MonadReader.html#386" class="Function">reader</a> <a id="692" href="Class.MonadTC.html#847" class="Field">TCEnv.goal</a>
    <a id="707" class="Keyword">where</a> <a id="713" class="CatchallClause Symbol">_</a> <a id="715" class="Symbol">→</a> <a id="717" href="Class.MonadTC.html#8489" class="Function">error1</a> <a id="724" class="String">&quot;solve: Goal is not a term!&quot;</a>
  <a id="755" href="Tactic.Assumption.html#755" class="Bound">metas</a> <a id="761" href="Class.Monad.Core.html#335" class="Field Operator">←</a> <a id="763" href="Generics.Utils.html#1176" class="Function">findMetas</a> <a id="773" href="Class.Functor.Core.html#707" class="Field Operator">&lt;$&gt;</a> <a id="777" href="Class.MonadTC.html#1583" class="Field">checkType</a> <a id="787" href="Tactic.Assumption.html#637" class="Bound">t</a> <a id="789" href="Tactic.Assumption.html#678" class="Bound">goal</a>
  <a id="796" href="Data.Bool.Base.html#1283" class="Function Operator">if</a> <a id="799" href="Data.List.Base.html#4523" class="Function">null</a> <a id="804" href="Tactic.Assumption.html#755" class="Bound">metas</a>
    <a id="814" href="Data.Bool.Base.html#1283" class="Function Operator">then</a> <a id="819" class="Symbol">(</a><a id="820" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,</a> <a id="823" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="827" class="Symbol">)</a>  <a id="830" href="Class.Functor.Core.html#707" class="Field Operator">&lt;$&gt;</a> <a id="834" href="Class.MonadTC.html#1445" class="Field">unify</a> <a id="840" href="Tactic.Assumption.html#678" class="Bound">goal</a> <a id="845" href="Tactic.Assumption.html#637" class="Bound">t</a>
    <a id="851" href="Data.Bool.Base.html#1283" class="Function Operator">else</a> <a id="856" class="Symbol">(</a><a id="857" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">_,</a> <a id="860" href="Agda.Builtin.Bool.html#182" class="InductiveConstructor">false</a><a id="865" class="Symbol">)</a> <a id="867" href="Class.Functor.Core.html#707" class="Field Operator">&lt;$&gt;</a> <a id="871" href="Class.MonadTC.html#8489" class="Function">error1</a> <a id="878" class="String">&quot;Unsolved metavariables remaining!&quot;</a>

<a id="assumption&#39;"></a><a id="915" href="Tactic.Assumption.html#915" class="Function">assumption&#39;</a> <a id="927" class="Symbol">:</a> <a id="929" href="Tactic.Helpers.html#5649" class="Function">ITactic</a>
<a id="937" href="Tactic.Assumption.html#915" class="Function">assumption&#39;</a> <a id="949" class="Symbol">=</a> <a id="951" href="Tactic.Helpers.html#2566" class="Function">inDebugPath</a> <a id="963" class="String">&quot;assumption&quot;</a> <a id="976" class="Keyword">do</a>
  <a id="981" href="Tactic.Assumption.html#981" class="Bound">c</a> <a id="983" href="Class.Monad.Core.html#335" class="Field Operator">←</a> <a id="985" href="Class.MonadTC.html#7734" class="Function">getContext</a>
  <a id="998" href="Data.List.Base.html#4293" class="Function">foldl</a> <a id="1004" class="Symbol">(λ</a> <a id="1007" href="Tactic.Assumption.html#1007" class="Bound">x</a> <a id="1009" href="Tactic.Assumption.html#1009" class="Bound">k</a> <a id="1011" class="Symbol">→</a> <a id="1013" class="Keyword">do</a>
    <a id="1020" href="Class.MonadError.html#359" class="Field">catch</a> <a id="1026" class="Symbol">(</a><a id="1027" href="Class.MonadTC.html#10266" class="Function">unifyWithGoal</a> <a id="1041" class="Symbol">(</a><a id="1042" href="Generics.Core.html#372" class="InductiveConstructor">♯</a> <a id="1044" href="Tactic.Assumption.html#1009" class="Bound">k</a><a id="1045" class="Symbol">)</a> <a id="1047" href="Class.Monad.Core.html#369" class="Function Operator">&gt;&gt;</a> <a id="1050" href="Class.MonadTC.html#5514" class="Function">debugLog</a> <a id="1059" class="Symbol">(</a><a id="1060" class="String">&quot;Success with: &quot;</a> <a id="1077" href="Reflection.Debug.html#992" class="Function Operator">∷ᵈ</a> <a id="1080" href="Generics.Core.html#372" class="InductiveConstructor">♯</a> <a id="1082" href="Tactic.Assumption.html#1009" class="Bound">k</a> <a id="1084" href="Reflection.Debug.html#992" class="Function Operator">∷ᵈ</a> <a id="1087" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="1089" class="Symbol">))</a> <a id="1092" class="Symbol">(λ</a> <a id="1095" href="Tactic.Assumption.html#1095" class="Bound">_</a> <a id="1097" class="Symbol">→</a> <a id="1099" href="Tactic.Assumption.html#1007" class="Bound">x</a><a id="1100" class="Symbol">))</a>
    <a id="1107" class="Symbol">(</a><a id="1108" href="Class.MonadTC.html#8636" class="Function">logAndError1</a> <a id="1121" class="String">&quot;No valid assumption!&quot;</a><a id="1143" class="Symbol">)</a> <a id="1145" class="Symbol">(</a><a id="1146" href="Data.List.Base.html#6273" class="Function">downFrom</a> <a id="1155" href="Function.Base.html#1919" class="Function Operator">$</a> <a id="1157" href="Data.List.Base.html#4864" class="Function">length</a> <a id="1164" href="Tactic.Assumption.html#981" class="Bound">c</a><a id="1165" class="Symbol">)</a>

<a id="1168" class="Keyword">module</a> <a id="1175" href="Tactic.Assumption.html#1175" class="Module">_</a> <a id="1177" class="Symbol">⦃</a> <a id="1179" href="Tactic.Assumption.html#1179" class="Bound">_</a> <a id="1181" class="Symbol">:</a> <a id="1183" href="Reflection.Debug.html#2340" class="Record">DebugOptions</a> <a id="1196" class="Symbol">⦄</a> <a id="1198" class="Keyword">where</a>
  <a id="1206" class="Keyword">macro</a>
    <a id="1216" href="Tactic.Assumption.html#1216" class="Function">assumption</a> <a id="1227" class="Symbol">=</a> <a id="1229" href="Tactic.Helpers.html#5923" class="Function">initTac</a> <a id="1237" href="Tactic.Assumption.html#915" class="Function">assumption&#39;</a>
    <a id="1253" href="Tactic.Assumption.html#1253" class="Function">assumptionOpts</a> <a id="1268" class="Symbol">=</a> <a id="1270" href="Tactic.Helpers.html#5800" class="Function">initTacOpts</a> <a id="1282" href="Tactic.Assumption.html#915" class="Function">assumption&#39;</a>

<a id="1295" class="Keyword">private</a>
  <a id="1305" class="Keyword">open</a> <a id="1310" class="Keyword">import</a> <a id="1317" href="Tactic.Defaults.html" class="Module">Tactic.Defaults</a>
  <a id="1335" class="Keyword">module</a> <a id="Test"></a><a id="1342" href="Tactic.Assumption.html#1342" class="Module">Test</a> <a id="1347" class="Keyword">where</a>
    <a id="Test.test₁"></a><a id="1357" href="Tactic.Assumption.html#1357" class="Function">test₁</a> <a id="1363" class="Symbol">:</a> <a id="1365" class="Symbol">{</a><a id="1366" href="Tactic.Assumption.html#1366" class="Bound">A</a> <a id="1368" href="Tactic.Assumption.html#1368" class="Bound">B</a> <a id="1370" class="Symbol">:</a> <a id="1372" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1375" class="Symbol">}</a> <a id="1377" class="Symbol">→</a> <a id="1379" href="Tactic.Assumption.html#1366" class="Bound">A</a> <a id="1381" class="Symbol">→</a> <a id="1383" href="Tactic.Assumption.html#1368" class="Bound">B</a> <a id="1385" class="Symbol">→</a> <a id="1387" href="Tactic.Assumption.html#1366" class="Bound">A</a>
    <a id="1393" href="Tactic.Assumption.html#1357" class="Function">test₁</a> <a id="1399" href="Tactic.Assumption.html#1399" class="Bound">a</a> <a id="1401" href="Tactic.Assumption.html#1401" class="Bound">b</a> <a id="1403" class="Symbol">=</a> <a id="1405" href="Tactic.Assumption.html#1216" class="Macro">assumption</a>
    
    <a id="Test.test₂"></a><a id="1425" href="Tactic.Assumption.html#1425" class="Function">test₂</a> <a id="1431" class="Symbol">:</a> <a id="1433" class="Symbol">{</a><a id="1434" href="Tactic.Assumption.html#1434" class="Bound">A</a> <a id="1436" href="Tactic.Assumption.html#1436" class="Bound">B</a> <a id="1438" class="Symbol">:</a> <a id="1440" href="Agda.Primitive.html#326" class="Primitive">Set</a><a id="1443" class="Symbol">}</a> <a id="1445" class="Symbol">→</a> <a id="1447" href="Tactic.Assumption.html#1434" class="Bound">A</a> <a id="1449" class="Symbol">→</a> <a id="1451" href="Tactic.Assumption.html#1436" class="Bound">B</a> <a id="1453" class="Symbol">→</a> <a id="1455" href="Tactic.Assumption.html#1436" class="Bound">B</a>
    <a id="1461" href="Tactic.Assumption.html#1425" class="Function">test₂</a> <a id="1467" href="Tactic.Assumption.html#1467" class="Bound">a</a> <a id="1469" href="Tactic.Assumption.html#1469" class="Bound">b</a> <a id="1471" class="Symbol">=</a> <a id="1473" href="Tactic.Assumption.html#1216" class="Macro">assumption</a>
</pre></body></html>