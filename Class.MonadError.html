<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Class.MonadError</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/agda-stdlib-meta/tree/master///Class/MonadError.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Symbol">{-#</a> <a id="5" class="Keyword">OPTIONS</a> <a id="13" class="Pragma">--safe</a> <a id="20" class="Pragma">--without-K</a> <a id="32" class="Symbol">#-}</a>

<a id="37" class="Keyword">open</a> <a id="42" class="Keyword">import</a> <a id="49" href="Level.html" class="Module">Level</a>

<a id="56" class="Keyword">open</a> <a id="61" class="Keyword">import</a> <a id="68" href="Meta.Prelude.html" class="Module">Meta.Prelude</a>

<a id="82" class="Keyword">open</a> <a id="87" class="Keyword">import</a> <a id="94" href="Class.Monad.html" class="Module">Class.Monad</a>
<a id="106" class="Keyword">open</a> <a id="111" class="Keyword">import</a> <a id="118" href="Reflection.html" class="Module">Reflection</a> <a id="129" class="Keyword">using</a> <a id="135" class="Symbol">(</a><a id="136" href="Agda.Builtin.Reflection.html#8617" class="Postulate">TC</a><a id="138" class="Symbol">;</a> <a id="140" href="Agda.Builtin.Reflection.html#8214" class="Datatype">ErrorPart</a><a id="149" class="Symbol">;</a> <a id="151" href="Agda.Builtin.Reflection.html#8830" class="Postulate">typeError</a><a id="160" class="Symbol">;</a> <a id="162" href="Agda.Builtin.Reflection.html#9044" class="Postulate">catchTC</a><a id="169" class="Symbol">;</a> <a id="171" href="Agda.Builtin.Reflection.html#8238" class="InductiveConstructor">strErr</a><a id="177" class="Symbol">)</a>

<a id="180" class="Keyword">module</a> <a id="187" href="Class.MonadError.html" class="Module">Class.MonadError</a> <a id="204" class="Keyword">where</a>

<a id="211" class="Keyword">private</a>
  <a id="221" class="Keyword">variable</a>
    <a id="234" href="Class.MonadError.html#234" class="Generalizable">e</a> <a id="236" href="Class.MonadError.html#236" class="Generalizable">f</a> <a id="238" class="Symbol">:</a> <a id="240" href="Agda.Primitive.html#742" class="Postulate">Level</a>
    <a id="250" href="Class.MonadError.html#250" class="Generalizable">A</a> <a id="252" class="Symbol">:</a> <a id="254" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="258" href="Class.MonadError.html#236" class="Generalizable">f</a>

<a id="261" class="Keyword">record</a> <a id="MonadError"></a><a id="268" href="Class.MonadError.html#268" class="Record">MonadError</a> <a id="279" class="Symbol">(</a><a id="280" href="Class.MonadError.html#280" class="Bound">E</a> <a id="282" class="Symbol">:</a> <a id="284" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="288" href="Class.MonadError.html#234" class="Generalizable">e</a><a id="289" class="Symbol">)</a> <a id="291" class="Symbol">(</a><a id="292" href="Class.MonadError.html#292" class="Bound">M</a> <a id="294" class="Symbol">:</a> <a id="296" class="Symbol">∀</a> <a id="298" class="Symbol">{</a><a id="299" href="Class.MonadError.html#299" class="Bound">f</a><a id="300" class="Symbol">}</a> <a id="302" class="Symbol">→</a> <a id="304" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="308" href="Class.MonadError.html#299" class="Bound">f</a> <a id="310" class="Symbol">→</a> <a id="312" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="316" href="Class.MonadError.html#299" class="Bound">f</a><a id="317" class="Symbol">)</a> <a id="319" class="Symbol">:</a> <a id="321" href="Agda.Primitive.html#512" class="Primitive">Setω</a> <a id="326" class="Keyword">where</a>
  <a id="334" class="Keyword">field</a>
    <a id="MonadError.error"></a><a id="344" href="Class.MonadError.html#344" class="Field">error</a> <a id="350" class="Symbol">:</a> <a id="352" href="Class.MonadError.html#280" class="Bound">E</a> <a id="354" class="Symbol">→</a> <a id="356" href="Class.MonadError.html#292" class="Bound">M</a> <a id="358" href="Class.MonadError.html#250" class="Generalizable">A</a>
    <a id="MonadError.catch"></a><a id="364" href="Class.MonadError.html#364" class="Field">catch</a> <a id="370" class="Symbol">:</a> <a id="372" href="Class.MonadError.html#292" class="Bound">M</a> <a id="374" href="Class.MonadError.html#250" class="Generalizable">A</a> <a id="376" class="Symbol">→</a> <a id="378" class="Symbol">(</a><a id="379" href="Class.MonadError.html#280" class="Bound">E</a> <a id="381" class="Symbol">→</a> <a id="383" href="Class.MonadError.html#292" class="Bound">M</a> <a id="385" href="Class.MonadError.html#250" class="Generalizable">A</a><a id="386" class="Symbol">)</a> <a id="388" class="Symbol">→</a> <a id="390" href="Class.MonadError.html#292" class="Bound">M</a> <a id="392" href="Class.MonadError.html#250" class="Generalizable">A</a>

<a id="395" class="Keyword">open</a> <a id="400" href="Class.MonadError.html#268" class="Module">MonadError</a>

<a id="MonadError-TC"></a><a id="412" href="Class.MonadError.html#412" class="Function">MonadError-TC</a> <a id="426" class="Symbol">:</a> <a id="428" href="Class.MonadError.html#268" class="Record">MonadError</a> <a id="439" class="Symbol">(</a><a id="440" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="445" href="Agda.Builtin.Reflection.html#8214" class="Datatype">ErrorPart</a><a id="454" class="Symbol">)</a> <a id="456" href="Agda.Builtin.Reflection.html#8617" class="Postulate">TC</a>
<a id="459" href="Class.MonadError.html#412" class="Function">MonadError-TC</a> <a id="473" class="Symbol">.</a><a id="474" href="Class.MonadError.html#344" class="Field">error</a> <a id="480" class="Symbol">=</a> <a id="482" href="Agda.Builtin.Reflection.html#8830" class="Postulate">typeError</a>
<a id="492" href="Class.MonadError.html#412" class="Function">MonadError-TC</a> <a id="506" class="Symbol">.</a><a id="507" href="Class.MonadError.html#364" class="Field">catch</a> <a id="513" href="Class.MonadError.html#513" class="Bound">x</a> <a id="515" href="Class.MonadError.html#515" class="Bound">h</a> <a id="517" class="Symbol">=</a> <a id="519" href="Agda.Builtin.Reflection.html#9044" class="Postulate">catchTC</a> <a id="527" href="Class.MonadError.html#513" class="Bound">x</a> <a id="529" class="Symbol">(</a><a id="530" href="Class.MonadError.html#515" class="Bound">h</a> <a id="532" href="Data.List.Base.html#5205" class="Function Operator">[</a> <a id="534" href="Agda.Builtin.Reflection.html#8238" class="InductiveConstructor">strErr</a> <a id="541" class="String">&quot;TC doesn&#39;t provide which error to catch&quot;</a> <a id="583" href="Data.List.Base.html#5205" class="Function Operator">]</a><a id="584" class="Symbol">)</a>

<a id="ErrorT"></a><a id="587" href="Class.MonadError.html#587" class="Function">ErrorT</a> <a id="594" class="Symbol">:</a> <a id="596" class="Symbol">(</a><a id="597" href="Class.MonadError.html#597" class="Bound">E</a> <a id="599" class="Symbol">:</a> <a id="601" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="604" class="Symbol">)</a> <a id="606" class="Symbol">→</a> <a id="608" class="Symbol">(</a><a id="609" href="Class.MonadError.html#609" class="Bound">M</a> <a id="611" class="Symbol">:</a> <a id="613" class="Symbol">∀</a> <a id="615" class="Symbol">{</a><a id="616" href="Class.MonadError.html#616" class="Bound">f</a><a id="617" class="Symbol">}</a> <a id="619" class="Symbol">→</a> <a id="621" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="625" href="Class.MonadError.html#616" class="Bound">f</a> <a id="627" class="Symbol">→</a> <a id="629" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="633" href="Class.MonadError.html#616" class="Bound">f</a><a id="634" class="Symbol">)</a> <a id="636" class="Symbol">→</a> <a id="638" class="Symbol">∀</a> <a id="640" class="Symbol">{</a><a id="641" href="Class.MonadError.html#641" class="Bound">f</a><a id="642" class="Symbol">}</a> <a id="644" class="Symbol">→</a> <a id="646" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="650" href="Class.MonadError.html#641" class="Bound">f</a> <a id="652" class="Symbol">→</a> <a id="654" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="658" href="Class.MonadError.html#641" class="Bound">f</a>
<a id="660" href="Class.MonadError.html#587" class="Function">ErrorT</a> <a id="667" href="Class.MonadError.html#667" class="Bound">E</a> <a id="669" href="Class.MonadError.html#669" class="Bound">M</a> <a id="671" href="Class.MonadError.html#671" class="Bound">A</a> <a id="673" class="Symbol">=</a> <a id="675" href="Class.MonadError.html#669" class="Bound">M</a> <a id="677" class="Symbol">(</a><a id="678" href="Class.MonadError.html#667" class="Bound">E</a> <a id="680" href="Data.Sum.Base.html#625" class="Datatype Operator">⊎</a> <a id="682" href="Class.MonadError.html#671" class="Bound">A</a><a id="683" class="Symbol">)</a>

<a id="686" class="Keyword">module</a> <a id="693" href="Class.MonadError.html#693" class="Module">_</a> <a id="695" class="Symbol">{</a><a id="696" href="Class.MonadError.html#696" class="Bound">E</a> <a id="698" class="Symbol">:</a> <a id="700" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="703" class="Symbol">}</a> <a id="705" class="Symbol">{</a><a id="706" href="Class.MonadError.html#706" class="Bound">M</a> <a id="708" class="Symbol">:</a> <a id="710" class="Symbol">∀</a> <a id="712" class="Symbol">{</a><a id="713" href="Class.MonadError.html#713" class="Bound">a</a><a id="714" class="Symbol">}</a> <a id="716" class="Symbol">→</a> <a id="718" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="722" href="Class.MonadError.html#713" class="Bound">a</a> <a id="724" class="Symbol">→</a> <a id="726" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="730" href="Class.MonadError.html#713" class="Bound">a</a><a id="731" class="Symbol">}</a> <a id="733" class="Symbol">⦃</a> <a id="735" href="Class.MonadError.html#735" class="Bound">_</a> <a id="737" class="Symbol">:</a> <a id="739" href="Class.Monad.Core.html#173" class="Record">Monad</a> <a id="745" href="Class.MonadError.html#706" class="Bound">M</a> <a id="747" class="Symbol">⦄</a> <a id="749" class="Keyword">where</a>

  <a id="758" href="Class.MonadError.html#758" class="Function">Monad-ErrorT</a> <a id="771" class="Symbol">:</a> <a id="773" href="Class.Monad.Core.html#173" class="Record">Monad</a> <a id="779" class="Symbol">(</a><a id="780" href="Class.MonadError.html#587" class="Function">ErrorT</a> <a id="787" href="Class.MonadError.html#696" class="Bound">E</a> <a id="789" href="Class.MonadError.html#706" class="Bound">M</a><a id="790" class="Symbol">)</a>
  <a id="794" href="Class.MonadError.html#758" class="Function">Monad-ErrorT</a> <a id="807" class="Symbol">.</a><a id="808" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="815" href="Class.MonadError.html#815" class="Bound">a</a> <a id="817" class="Symbol">=</a> <a id="819" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="826" class="Symbol">(</a><a id="827" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="832" href="Class.MonadError.html#815" class="Bound">a</a><a id="833" class="Symbol">)</a>
  <a id="837" href="Class.MonadError.html#758" class="Function">Monad-ErrorT</a> <a id="850" class="Symbol">.</a><a id="851" href="Class.Monad.Core.html#290" class="Field Operator">_&gt;&gt;=_</a> <a id="857" href="Class.MonadError.html#857" class="Bound">x</a> <a id="859" href="Class.MonadError.html#859" class="Bound">f</a> <a id="861" class="Symbol">=</a> <a id="863" href="Class.MonadError.html#857" class="Bound">x</a> <a id="865" href="Class.Monad.Core.html#290" class="Field Operator">&gt;&gt;=</a> <a id="869" class="Symbol">λ</a> <a id="871" class="Keyword">where</a>
    <a id="881" class="Symbol">(</a><a id="882" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="887" href="Class.MonadError.html#887" class="Bound">e</a><a id="888" class="Symbol">)</a> <a id="890" class="Symbol">→</a> <a id="892" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="899" class="Symbol">(</a><a id="900" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="905" href="Class.MonadError.html#887" class="Bound">e</a><a id="906" class="Symbol">)</a>
    <a id="912" class="Symbol">(</a><a id="913" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="918" href="Class.MonadError.html#918" class="Bound">a</a><a id="919" class="Symbol">)</a> <a id="921" class="Symbol">→</a> <a id="923" href="Class.MonadError.html#859" class="Bound">f</a> <a id="925" href="Class.MonadError.html#918" class="Bound">a</a>

  <a id="930" href="Class.MonadError.html#930" class="Function">MonadError-ErrorT</a> <a id="948" class="Symbol">:</a> <a id="950" href="Class.MonadError.html#268" class="Record">MonadError</a> <a id="961" href="Class.MonadError.html#696" class="Bound">E</a> <a id="963" class="Symbol">(</a><a id="964" href="Class.MonadError.html#587" class="Function">ErrorT</a> <a id="971" href="Class.MonadError.html#696" class="Bound">E</a> <a id="973" href="Class.MonadError.html#706" class="Bound">M</a><a id="974" class="Symbol">)</a>
  <a id="978" href="Class.MonadError.html#930" class="Function">MonadError-ErrorT</a> <a id="996" class="Symbol">.</a><a id="997" href="Class.MonadError.html#344" class="Field">error</a> <a id="1003" href="Class.MonadError.html#1003" class="Bound">e</a> <a id="1005" class="Symbol">=</a> <a id="1007" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="1014" class="Symbol">(</a><a id="1015" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1020" href="Class.MonadError.html#1003" class="Bound">e</a><a id="1021" class="Symbol">)</a>
  <a id="1025" href="Class.MonadError.html#930" class="Function">MonadError-ErrorT</a> <a id="1043" class="Symbol">.</a><a id="1044" href="Class.MonadError.html#364" class="Field">catch</a> <a id="1050" href="Class.MonadError.html#1050" class="Bound">x</a> <a id="1052" href="Class.MonadError.html#1052" class="Bound">h</a> <a id="1054" class="Symbol">=</a> <a id="1056" href="Class.MonadError.html#1050" class="Bound">x</a> <a id="1058" href="Class.Monad.Core.html#290" class="Field Operator">&gt;&gt;=</a> <a id="1062" class="Symbol">λ</a> <a id="1064" class="Keyword">where</a>
    <a id="1074" class="Symbol">(</a><a id="1075" href="Data.Sum.Base.html#675" class="InductiveConstructor">inj₁</a> <a id="1080" href="Class.MonadError.html#1080" class="Bound">e</a><a id="1081" class="Symbol">)</a> <a id="1083" class="Symbol">→</a> <a id="1085" href="Class.MonadError.html#1052" class="Bound">h</a> <a id="1087" href="Class.MonadError.html#1080" class="Bound">e</a>
    <a id="1093" class="Symbol">(</a><a id="1094" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1099" href="Class.MonadError.html#1099" class="Bound">a</a><a id="1100" class="Symbol">)</a> <a id="1102" class="Symbol">→</a> <a id="1104" href="Class.Monad.Core.html#269" class="Field">return</a> <a id="1111" class="Symbol">(</a><a id="1112" href="Data.Sum.Base.html#700" class="InductiveConstructor">inj₂</a> <a id="1117" href="Class.MonadError.html#1099" class="Bound">a</a><a id="1118" class="Symbol">)</a>
</pre></body></html>